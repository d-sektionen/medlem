{"version":3,"sources":["webpack:///./src/components/votingAdmin/meetingPanel.js","webpack:///./src/components/votingAdmin/addVote.js","webpack:///./src/components/votingAdmin/voteStats.js","webpack:///./src/components/votingAdmin/votePanel.js","webpack:///./src/components/votingAdmin/attendantPanel.js","webpack:///./src/components/votingAdmin/index.js","webpack:///./src/components/votingAdmin/page.js","webpack:///./src/components/request/useRestEndpoint.js","webpack:///./src/components/ui/list.js","webpack:///./src/components/checkin/doorkeeperPanel.js"],"names":["MeetingPanel","_ref","setCurrentMeeting","currentMeeting","_useState","useState","newMeetingName","setNewMeetingName","_useRestEndpoint","useRestEndpoint","endpoint","_useRestEndpoint$","list","create","unorderedMeetings","meetings","concat","reverse","useEffect","length","Object","assign","react_default","a","createElement","Fragment","value","id","undefined","onChange","e","find","meeting","target","map","key","name","onSubmit","preventDefault","then","res","data","currentKey","createAlternative","existingData","text","AddVote","updateData","update","question","setQuestion","_useState2","alternatives","alt","setAlternatives","_useState3","open","currentQuestion","setCurrentQuestion","i","newVal","prev","slice","type","onClick","checked","VoteStats","voteId","chartContainer","useRef","useEndpoint","current","chartData","labels","datasets","values","num_votes","Chart","title","height","colors","ref","reduce","b","VotePanel","votes","openCreateModal","useModal","openChartModal","closeModal","useCloseModal","event_id","filter","vote","fi","AttendantPanel","input","setInput","destroy","attendants","meeting_id","user_username","ui_list","attendant","user","pretty_name","buttons","iconComponent","FiTrash2","VotingAdmin","grid","meetingPanel","votePanel","attendantPanel","doorkeeperPanel","event","VotingAdminPage","votingAdmin","objHasProperty","_Object$prototype$has","prototype","hasOwnProperty","call","apply","arguments","appendPK","config","pk","rv","forEach","[object Object]","__webpack_exports__","setLoading","useContext","LoadingContext","setData","error","setError","params","request","method","Promise","resolve","catch","err","reject","retrieve","prevData","obj","body","__webpack_require__","d","List","ListItem","ListButton","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_scss_ui_module_scss__WEBPACK_IMPORTED_MODULE_1__","_scss_ui_module_scss__WEBPACK_IMPORTED_MODULE_1___default","children","className","style","_ref2","subtitle","listText","listButtons","_ref3","Icon","shown","defaultProps","react_icons_fi__WEBPACK_IMPORTED_MODULE_1__","_request_useRestEndpoint__WEBPACK_IMPORTED_MODULE_2__","_ui_list__WEBPACK_IMPORTED_MODULE_3__","DoorkeeperPanel","doorkeepers","doorkeeper"],"mappings":"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","file":"component---src-components-voting-admin-page-js-a38de99d1d4c09c1a937.js","sourcesContent":["import React, { useState, useEffect } from 'react'\n\nimport style from '../../scss/checkin.module.scss'\nimport { useEndpoint, del, get } from '../request'\nimport { FiTrash2 } from 'react-icons/fi'\nimport useRestEndpoint from '../request/useRestEndpoint'\n\nconst MeetingPanel = ({ setCurrentMeeting, currentMeeting }) => {\n  const [newMeetingName, setNewMeetingName] = useState('')\n\n  const [{ list, create }, unorderedMeetings] = useRestEndpoint({\n    endpoint: '/voting/meetings/',\n  })\n\n  const meetings = unorderedMeetings ? [...unorderedMeetings].reverse() : null\n\n  useEffect(() => {\n    list()\n    // TODO: handle errors\n  }, [])\n\n  useEffect(\n    () => {\n      if (!meetings || !meetings.length) setCurrentMeeting(null)\n      else if (currentMeeting === null) setCurrentMeeting({ ...meetings[0] })\n    },\n    [meetings]\n  )\n\n  if (meetings === null) return <></>\n\n  return (\n    <div>\n      <h2>Möten</h2>\n      {meetings && meetings.length && (\n        <select\n          value={currentMeeting ? currentMeeting.id : undefined}\n          onChange={e =>\n            setCurrentMeeting(\n              meetings.find(meeting => `${meeting.id}` === e.target.value)\n            )\n          }\n        >\n          {meetings.map(meeting => (\n            <option value={meeting.id} key={meeting.id}>\n              {meeting.name}\n            </option>\n          ))}\n        </select>\n      )}\n      <form\n        onSubmit={e => {\n          e.preventDefault()\n          setNewMeetingName('')\n          // setCurrentMeeting(null)\n\n          create({\n            name: newMeetingName,\n          }).then(res => {\n            setCurrentMeeting(res.data)\n          })\n        }}\n      >\n        <input\n          value={newMeetingName}\n          onChange={e => {\n            setNewMeetingName(e.target.value)\n          }}\n        />\n      </form>\n    </div>\n  )\n}\n\nexport default MeetingPanel\n","import React, { useState, useEffect } from 'react'\nimport useRestEndpoint from '../request/useRestEndpoint'\n\nlet currentKey = 0\n// creates an alternative with an unique key, do not manually create alternative objects\n// the key does not match the id later given by the server.\nconst createAlternative = (existingData = {}) => {\n  currentKey += 1\n  return { text: '', ...existingData, key: currentKey }\n}\n\nconst AddVote = ({ currentMeeting, create, updateData, update }) => {\n  const [question, setQuestion] = useState(\n    updateData ? updateData.question : ''\n  )\n  const [alternatives, setAlternatives] = useState(\n    updateData\n      ? updateData.alternatives.map(alt => createAlternative(alt))\n      : [createAlternative(), createAlternative()]\n  )\n  const [currentQuestion, setCurrentQuestion] = useState(\n    updateData ? updateData.open : true\n  )\n\n  return (\n    <div>\n      <label>\n        Fråga\n        <input\n          value={question}\n          onChange={e => {\n            setQuestion(e.target.value)\n          }}\n        />\n      </label>\n      <hr />\n      <ul>\n        {alternatives.map((alt, i) => (\n          <li key={alt.key}>\n            <input\n              value={alt.text}\n              onChange={e => {\n                const newVal = e.target.value\n                setAlternatives(prev => [\n                  ...prev.slice(0, i),\n                  { ...prev[i], text: newVal },\n                  ...prev.slice(i + 1),\n                ])\n              }}\n            />\n            <button\n              type=\"button\"\n              onClick={() => {\n                setAlternatives(prev => [\n                  ...prev.slice(0, i),\n                  ...prev.slice(i + 1),\n                ])\n              }}\n            >\n              X\n            </button>\n          </li>\n        ))}\n      </ul>\n      <button\n        type=\"button\"\n        onClick={() => {\n          setAlternatives(prev => [...prev, createAlternative()])\n        }}\n      >\n        Lägg till alternativ\n      </button>\n      <hr />\n      <label>\n        <input\n          type=\"checkbox\"\n          checked={currentQuestion}\n          onChange={() => setCurrentQuestion(prev => !prev)}\n        />\n        Nuvarande frågan\n      </label>\n      <hr />\n      <button\n        type=\"button\"\n        onClick={() => {\n          if (updateData) {\n            update(updateData.id, {\n              question,\n              open: currentQuestion,\n              alternatives,\n              meeting: currentMeeting.id,\n            })\n          } else {\n            create({\n              question,\n              open: currentQuestion,\n              alternatives,\n              meeting: currentMeeting.id,\n            })\n          }\n        }}\n      >\n        {updateData ? 'Uppdatera omröstning' : 'Skapa ny omröstning'}\n      </button>\n    </div>\n  )\n}\n\nexport default AddVote\n","import React, { useRef, useEffect } from 'react'\nimport { Chart } from 'frappe-charts/dist/frappe-charts.esm'\nimport { useEndpoint } from '../request'\nimport 'frappe-charts/dist/frappe-charts.min.css'\n\nconst VoteStats = ({ currentMeeting, voteId }) => {\n  const chartContainer = useRef(null)\n\n  const [data] = useEndpoint({\n    endpoint: `/voting/votes/${voteId}/`,\n  })\n\n  useEffect(() => {\n    if (!chartContainer.current) return\n\n    const chartData = {\n      labels: data ? data.alternatives.map(alt => alt.text) : [],\n      datasets: [\n        {\n          name: 'Some Data',\n          type: 'bar',\n          values: data ? data.alternatives.map(alt => alt.num_votes) : [],\n        },\n      ],\n    }\n\n    const chart = new Chart(chartContainer.current, {\n      title: data ? data.question : [],\n      data: chartData,\n      type: 'pie', // or 'bar', 'line', 'scatter', 'pie', 'percentage'\n      height: 400,\n      colors: ['#20407C', '#E5398D', '#754022', '#70BD44', '#F7E623'],\n    })\n  })\n\n  return (\n    <div>\n      <div ref={chartContainer} />\n      <p>\n        {'Summa: '}\n        {(data ? data.alternatives.map(alt => alt.num_votes) : []).reduce(\n          (a, b) => a + b,\n          0\n        )}\n      </p>\n    </div>\n  )\n}\n\nexport default VoteStats\n","import React, { useState, useEffect } from 'react'\n\nimport { FiTrash2, FiCheck, FiBarChart2, FiEdit2 } from 'react-icons/fi'\n\nimport useRestEndpoint from '../request/useRestEndpoint'\nimport useModal, { useCloseModal } from '../modal/useModal'\nimport AddVote from './addVote'\nimport VoteStats from './voteStats'\n\nconst VotePanel = ({ currentMeeting }) => {\n  const [{ list, update, create }, votes] = useRestEndpoint({\n    endpoint: '/voting/votes/',\n  })\n\n  const [openCreateModal] = useModal(AddVote)\n  const [openChartModal] = useModal(VoteStats)\n  const closeModal = useCloseModal()\n\n  // Close modal when a vote is created\n  useEffect(closeModal, [votes])\n\n  useEffect(\n    () => {\n      if (currentMeeting) list({ event_id: currentMeeting.id })\n      // TODO: handle errors\n    },\n    [currentMeeting]\n  )\n\n  if (votes === null) return <></>\n\n  return (\n    <div>\n      <h2>Omröstningar</h2>\n      <button\n        onClick={() =>\n          openCreateModal('Ny omröstning', { currentMeeting, create })\n        }\n        type=\"button\"\n      >\n        Ny omröstning\n      </button>\n      <ul>\n        {votes\n          .filter(vote => vote.meeting === currentMeeting.id)\n          .map(vote => (\n            <li key={vote.id}>\n              {vote.question}\n              {\n                <FiBarChart2\n                  onClick={() =>\n                    openChartModal(`Resultat av \"${vote.question}\"`, {\n                      voteId: vote.id,\n                    })\n                  }\n                />\n              }\n              {\n                <FiEdit2\n                  onClick={() =>\n                    openCreateModal(`Uppdatera \"${vote.question}\"`, {\n                      currentMeeting,\n                      update,\n                      updateData: vote,\n                    })\n                  }\n                />\n              }\n              {vote.open && <FiCheck />}\n            </li>\n          ))}\n      </ul>\n    </div>\n  )\n}\n\nexport default VotePanel\n","import React, { useState, useEffect } from 'react'\n\nimport { FiTrash2 } from 'react-icons/fi'\nimport useRestEndpoint from '../request/useRestEndpoint'\nimport { List, ListButton, ListItem } from '../ui/list'\n\nconst AttendantPanel = ({ currentMeeting }) => {\n  const [input, setInput] = useState('')\n\n  const [{ list, destroy, create }, attendants] = useRestEndpoint({\n    endpoint: '/voting/attendants/',\n  })\n\n  useEffect(\n    () => {\n      if (currentMeeting) list({ meeting_id: currentMeeting.id })\n      // TODO: handle errors\n    },\n    [currentMeeting]\n  )\n\n  if (attendants === null) return <></>\n\n  return (\n    <div>\n      <h2>Deltagare</h2>\n      <form\n        onSubmit={e => {\n          e.preventDefault()\n          setInput('')\n\n          create({\n            user_username: input,\n            meeting_id: currentMeeting.id,\n          })\n        }}\n      >\n        <input value={input} onChange={e => setInput(e.target.value)} />\n      </form>\n      <p>Röstlängd: {attendants.length}</p>\n      <List>\n        {attendants.map(attendant => (\n          <ListItem\n            title={attendant.user.pretty_name}\n            key={attendant.id}\n            buttons={[\n              <ListButton\n                onClick={() =>\n                  destroy(attendant.id, { meeting_id: currentMeeting.id })\n                }\n                iconComponent={FiTrash2}\n                text=\"Ta bort deltagare\"\n                key=\"remove\"\n              />,\n            ]}\n          />\n        ))}\n      </List>\n    </div>\n  )\n}\n\nexport default AttendantPanel\n","import React, { useState } from 'react'\nimport MeetingPanel from './meetingPanel'\n\nimport style from '../../scss/checkin.module.scss'\nimport { useEndpoint } from '../request'\nimport DoorkeeperPanel from '../checkin/doorkeeperPanel'\nimport VotePanel from './votePanel'\nimport AttendantPanel from './attendantPanel'\nimport { GridContainer, GridItem } from '../ui/grid'\n\nconst VotingAdmin = () => {\n  const [currentMeeting, setCurrentMeeting] = useState(null)\n\n  return (\n    <GridContainer>\n      <GridItem>\n        <MeetingPanel\n          currentMeeting={currentMeeting}\n          setCurrentMeeting={setCurrentMeeting}\n        />\n      </GridItem>\n      <GridItem>\n        <VotePanel currentMeeting={currentMeeting} />\n      </GridItem>\n      <GridItem>\n        <AttendantPanel currentMeeting={currentMeeting} />\n      </GridItem>\n      <GridItem>\n        <DoorkeeperPanel event={currentMeeting} />\n      </GridItem>\n    </GridContainer>\n  )\n}\n\nexport default VotingAdmin\n","import React from 'react'\nimport VotingAdmin from '.'\n\nconst VotingAdminPage = () => <VotingAdmin />\n\nexport default VotingAdminPage\n","import { useContext, useState, useEffect } from 'react'\n\nimport { LoadingContext } from '../layout/layout'\nimport request from '.'\n\nconst objHasProperty = (...args) =>\n  Object.prototype.hasOwnProperty.call(...args)\n\nconst appendPK = (config, pk) => {\n  let rv = { ...config }\n\n  ;['endpoint', 'url'].forEach(key => {\n    if (objHasProperty(rv, key)) rv = { ...rv, [key]: `${rv[key]}${pk}/` }\n  })\n\n  return rv\n}\n\nexport default config => {\n  const setLoading = useContext(LoadingContext)[1]\n  const [data, setData] = useState(null)\n  const [error, setError] = useState(null)\n\n  const list = (params = {}) => {\n    setLoading(true)\n    return request({\n      ...config,\n      params: {\n        ...(objHasProperty(config, 'params') ? config.params : {}),\n        ...params,\n      },\n      method: 'get',\n    })\n      .then(res => {\n        setError(null)\n        setData(res.data)\n        setLoading(false)\n        return Promise.resolve(res)\n      })\n      .catch(err => {\n        setError(err)\n        setLoading(false)\n        return Promise.reject(err)\n      })\n  }\n\n  const create = (body = {}) => {\n    setLoading(true)\n    return request({ ...config, data: body, method: 'post' })\n      .then(res => {\n        setError(null)\n        setData(prevData => [...prevData, res.data])\n        setLoading(false)\n        return Promise.resolve(res)\n      })\n      .catch(err => {\n        setError(err)\n        setLoading(false)\n        return Promise.reject(err)\n      })\n  }\n\n  const update = (pk, body = {}) => {\n    setLoading(true)\n    return request({ ...appendPK(config, pk), data: body, method: 'put' })\n      .then(res => {\n        setError(null)\n        setData(prevData => [\n          ...prevData.filter(obj => obj.id !== pk),\n          res.data,\n        ])\n        setLoading(false)\n        return Promise.resolve(res)\n      })\n      .catch(err => {\n        setError(err)\n        setLoading(false)\n        return Promise.reject(err)\n      })\n  }\n\n  const retrieve = (pk, params = {}) => {\n    setLoading(true)\n    return request({\n      ...appendPK(config, pk),\n      params: {\n        ...(objHasProperty(config, 'params') ? config.params : {}),\n        ...params,\n      },\n      method: 'get',\n    })\n      .then(res => {\n        setError(null)\n        setData(prevData => [\n          ...prevData.filter(obj => obj.id !== pk),\n          res.data,\n        ])\n        setLoading(false)\n        return Promise.resolve(res)\n      })\n      .catch(err => {\n        setError(err)\n        setLoading(false)\n        return Promise.reject(err)\n      })\n  }\n\n  const destroy = (pk, body = {}) => {\n    setLoading(true)\n\n    return request({ ...appendPK(config, pk), data: body, method: 'delete' })\n      .then(res => {\n        setError(null)\n        setData(prevData => prevData.filter(obj => obj.id !== pk))\n        setLoading(false)\n        return Promise.resolve(res)\n      })\n      .catch(err => {\n        setError(err)\n        setLoading(false)\n        return Promise.reject(err)\n      })\n  }\n\n  return [{ list, retrieve, update, create, destroy }, data, error]\n}\n","import React from 'react'\n\nimport style from '../../scss/ui.module.scss'\n\nconst List = ({ children }) => <ul className={style.list}>{children}</ul>\n\nconst ListItem = ({ title, subtitle, buttons }) => (\n  <li>\n    <div className={style.listText}>\n      <h3>{title}</h3>\n      <p>{subtitle}</p>\n    </div>\n    <div className={style.listButtons}>{buttons}</div>\n  </li>\n)\n\nconst ListButton = ({ onClick, iconComponent: Icon, text, shown }) =>\n  shown ? (\n    <button type=\"button\" onClick={onClick} title={text}>\n      <Icon />\n    </button>\n  ) : (\n    <></>\n  )\n\nListButton.defaultProps = {\n  shown: true,\n}\n\nexport { List, ListItem, ListButton }\n","import React, { useState, useEffect } from 'react'\n\nimport { FiTrash2 } from 'react-icons/fi'\nimport useRestEndpoint from '../request/useRestEndpoint'\nimport { List, ListItem, ListButton } from '../ui/list'\n\nconst DoorkeeperPanel = ({ event }) => {\n  const [input, setInput] = useState('')\n\n  const [{ list, destroy, create }, doorkeepers] = useRestEndpoint({\n    endpoint: '/checkin/doorkeepers/',\n  })\n\n  useEffect(\n    () => {\n      if (event) list({ event_id: event.id })\n      // TODO: handle errors\n    },\n    [event]\n  )\n\n  if (doorkeepers === null) return <></>\n\n  return (\n    <div>\n      <h2>Dörrvakter</h2>\n      <form\n        onSubmit={e => {\n          e.preventDefault()\n          setInput('')\n\n          create({\n            user_username: input,\n            event_id: event.id,\n          })\n        }}\n      >\n        <input value={input} onChange={e => setInput(e.target.value)} />\n      </form>\n      <List>\n        {doorkeepers.map(doorkeeper => (\n          <ListItem\n            title={doorkeeper.user.pretty_name}\n            key={doorkeeper.id}\n            buttons={[\n              <ListButton\n                onClick={() => destroy(doorkeeper.id)}\n                iconComponent={FiTrash2}\n                text=\"Ta bort dörrvakt\"\n                key=\"remove\"\n              />,\n            ]}\n          />\n        ))}\n      </List>\n    </div>\n  )\n}\n\nexport default DoorkeeperPanel\n"],"sourceRoot":""}