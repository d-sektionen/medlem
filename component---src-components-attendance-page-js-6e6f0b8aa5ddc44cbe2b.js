(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{ReHE:function(e,t,n){"use strict";n("a1Th"),n("rGqo"),n("rE2o"),n("ioFf");var a=n("q1tI"),r=n.n(a),c=n("Tgqd"),l=n("QaCa"),o=n("VtrM"),u=n("ZACD");function i(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}t.a=({event:e})=>{const{0:t,1:n}=Object(a.useState)(""),{data:m,mutate:s}=Object(o.b)("/checkin/doorkeepers/?event_id="+e.id);return r.a.createElement("div",null,r.a.createElement("h2",null,"Dörrvakter"),r.a.createElement("form",{onSubmit:a=>{a.preventDefault(),n(""),(async e=>{const{data:t}=await Object(u.f)("/checkin/doorkeepers/",e);s([].concat(i(m),[t]))})({user_username:t,event_id:e.id})}},r.a.createElement("input",{value:t,onChange:e=>n(e.target.value)})),r.a.createElement(l.a,null,m&&m.map(e=>r.a.createElement(l.c,{title:e.user.pretty_name,key:e.id,buttons:[r.a.createElement(l.b,{onClick:()=>(async e=>{await Object(u.b)("/checkin/doorkeepers/"+e+"/"),s(m.filter(t=>t.id!==e))})(e.id),iconComponent:c.l,text:"Ta bort dörrvakt",key:"remove"})]}))))}},d7Br:function(e,t,n){"use strict";n.r(t);n("a1Th"),n("rGqo"),n("rE2o"),n("ioFf");var a=n("q1tI"),r=n.n(a),c=n("VtrM");var l=({currentOccurrence:e})=>{if(!e)return r.a.createElement(r.a.Fragment,null);const{attendants:t,attendant_limit:n,members_only:a}=e;return r.a.createElement("div",null,r.a.createElement("h2",null,"Deltagare"),r.a.createElement("p",null,"Antal deltagare: ",t.length),0!==n&&r.a.createElement("p",null,"Deltagargräns: ",n),r.a.createElement("p",null,a?"Endast för medlemmar":"Öppet för alla användare"),r.a.createElement("ul",null,t.map(e=>r.a.createElement("li",{key:e.id},e.username))))},o=n("ReHE"),u=n("zw+i"),i=n("r90U"),m=n("INns"),s=n("noUn");var d=({create:e})=>r.a.createElement(s.a,{endpoint:"/attendance/occurrences/",customFetcher:e}),p=n("zGz4"),b=n("ZACD");function f(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}t.default=({pageContext:{title:e}})=>{const{0:t,1:n}=Object(a.useState)(null),{data:s,mutate:y}=Object(c.b)("/attendance/occurrences/"),[h]=Object(p.a)(d),E=Object(p.b)(),v=s?f(s).reverse():null;return Object(a.useEffect)(()=>{t&&n(s.find(e=>e.id===t.id))},[s]),r.a.createElement(i.a,null,r.a.createElement(u.a,null,r.a.createElement(u.b,{fullWidth:!0},r.a.createElement(m.a,{title:e,choice:t,setChoice:n,choices:v,label:"name",action:()=>{h("Ny händelse",{create:async e=>{await(async e=>{const{data:t}=await Object(b.f)("/attendance/occurrences/",e);y([].concat(f(s),[t]))})(e),E()}})},actionLabel:"Ny händelse"})),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(u.b,null,r.a.createElement(l,{currentOccurrence:t})),r.a.createElement(u.b,null,r.a.createElement(o.a,{event:t})))))}},kRcL:function(e,t,n){e.exports={label:"form-module--label--1j4rO",inputWrapper:"form-module--inputWrapper--tEZjQ",required:"form-module--required--1ei65"}},noUn:function(e,t,n){"use strict";n("rGqo");var a=n("q1tI"),r=n.n(a),c=n("ZACD"),l=n("X0yR"),o=n("kRcL"),u=n.n(o);var i=({value:e,onChange:t,type:n,label:a,required:c,min_value:o,max_value:i,min_length:m,max_length:s})=>{const d=e=>{t(e.target.value)},p={datetime:r.a.createElement(l.a,{value:e,onChange:t}),date:r.a.createElement("input",{type:"date",value:e,onChange:d}),boolean:r.a.createElement("input",{type:"checkbox",value:e,onChange:e=>{t(e.target.checked)}}),integer:r.a.createElement("input",{type:"number",value:e,onChange:d,max:i,min:o})},b=Object.prototype.hasOwnProperty.call(p,n)?p[n]:r.a.createElement("input",{value:e,onChange:d,maxLength:s,minLength:m});return r.a.createElement("label",{className:u.a.label},""+a,c&&r.a.createElement("span",{className:u.a.required},"*"),r.a.createElement("div",{className:u.a.inputWrapper},b))},m=n("Rq/j");const s=({endpoint:e,method:t,customFetcher:n,onSubmit:l})=>{const{0:o,1:u}=Object(a.useState)(),{0:s,1:d}=Object(a.useState)({}),{0:p,1:b}=Object(a.useState)({});return Object(a.useEffect)(()=>{Object(c.d)(e).then(e=>{const t=e.data.actions.POST,n=Object.keys(t).map(e=>Object.assign({key:e},t[e])).filter(e=>!e.read_only);u(n)}).catch(e=>{})},e),r.a.createElement("form",{onSubmit:a=>{a.preventDefault(),l(),n?n(s).catch(e=>{e.response&&b(e.response.data)}):Object(c.a)({endpoint:e,method:t,data:s})}},o&&o.map(e=>r.a.createElement(r.a.Fragment,{key:e.key},r.a.createElement(i,Object.assign({},e,{onChange:t=>{((e,t)=>{d(n=>Object.assign({},n,{[e]:t}))})(e.key,t)},value:s[e.key]})),Object.prototype.hasOwnProperty.call(p,e.key)&&r.a.createElement("div",null,p[e.key].join(", ")))),r.a.createElement(m.a,{type:"submit",onClick:()=>{}},"Submit"))};s.defaultProps={method:"POST",customFetcher:null,onSubmit:()=>{}};t.a=s}}]);
//# sourceMappingURL=component---src-components-attendance-page-js-6e6f0b8aa5ddc44cbe2b.js.map