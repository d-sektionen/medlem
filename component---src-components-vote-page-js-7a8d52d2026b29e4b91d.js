(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"Z/Vw":function(e,t,n){"use strict";n.r(t);var a=n("q1tI"),r=n.n(a),l=n("8k0H"),o=(n("pS08"),n("AqHK"),n("n7j8"),n("ZACD"));function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var c=function(e){var t,n;function a(t){var n;(n=e.call(this,t)||this).state={checkedId:-1};var a=n.props.onMessage;return n.onAlternativeChecked=n.onAlternativeChecked.bind(i(n)),n.placeVote=n.placeVote.bind(i(n)),n.showMessage=a,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var l=a.prototype;return l.onAlternativeChecked=function(e){this.setState({checkedId:e})},l.placeVote=function(){var e=this.props,t=e.setLoading,n=e.vote,a=this.state.checkedId,r=this.showMessage,l={vote_id:n.id,alternative_id:a};t(!0),Object(o.f)("/voting/made_votes/",l).then((function(){t(!1),r("Tack!","Din röst har registrerats")})).catch((function(e){t(!1),r("Ett fel uppstod",e)}))},l.render=function(){var e=this,t=this.props.vote,n=this.state.checkedId,a=-1===n,l=a?"Välj ett alternativ":"Rösta";return r.a.createElement("div",null,r.a.createElement("strong",null,t.question),r.a.createElement("ul",null,t.alternatives.map((function(t){var a=t.text,l=t.id;return r.a.createElement("li",{key:l},r.a.createElement("label",null,r.a.createElement("input",{type:"radio",checked:n===l,onChange:function(){return e.onAlternativeChecked(l)}})," "+a))}))),r.a.createElement("button",{type:"button",disabled:a,onClick:this.placeVote},l))},a}(a.Component),s=function(e){var t=e.showMessage,n=e.setLoading,a=Object(o.g)({endpoint:"/voting/votes/?current=true"}),l=a[0];if(a[1]&&t("Något gick fel","Logga ut eller refresha eller nåt.",!0),!l)return r.a.createElement(r.a.Fragment,null);if(0===l.length)return r.a.createElement("div",null,"Det finns ingen aktiv omröstning");var i=l[0];return i.has_voted?r.a.createElement("p",null,"Du har redan röstat i den nuvarande omröstningen."):r.a.createElement(c,{vote:i,onMessage:t,setLoading:n})},u=function(){var e=Object(a.useContext)(l.a)[1],t=Object(a.useState)(null),n=t[0],o=t[1],i=Object(a.useState)(!1),c=i[0],u=i[1];if(null!==n){var d=n.title,h=n.content;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,d),r.a.createElement("p",null,h),r.a.createElement("button",{type:"button",onClick:function(){return o(null)}},c?"Ladda om sidan":"Stäng"))}return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"D-cide"),r.a.createElement(s,{showMessage:function(e,t,n){u(n),o({title:e,content:t})},setLoading:e}))},d=n("r90U"),h=n("zw+i");t.default=function(){return r.a.createElement(d.a,null,r.a.createElement(h.a,null,r.a.createElement(h.b,null,r.a.createElement(u,null))))}}}]);
//# sourceMappingURL=component---src-components-vote-page-js-7a8d52d2026b29e4b91d.js.map