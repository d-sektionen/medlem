{"version":3,"sources":["webpack:///./src/components/votingAdmin/meetingPanel.js","webpack:///./src/components/votingAdmin/addVote.js","webpack:///./node_modules/frappe-charts/dist/frappe-charts.esm.js","webpack:///./src/components/votingAdmin/voteStats.js","webpack:///./src/components/votingAdmin/votePanel.js","webpack:///./src/components/votingAdmin/attendantPanel.js","webpack:///./src/components/votingAdmin/index.js","webpack:///./src/components/votingAdmin/page.js","webpack:///./src/components/request/useRestEndpoint.js","webpack:///./src/components/ui/list.js","webpack:///./src/components/checkin/doorkeeperPanel.js"],"names":["MeetingPanel","setCurrentMeeting","currentMeeting","newMeetingName","setNewMeetingName","useState","list","create","unorderedMeetings","useRestEndpoint","endpoint","meetings","reverse","useEffect","length","value","id","undefined","onChange","e","find","meeting","target","map","key","name","onSubmit","preventDefault","then","res","data","currentKey","createAlternative","existingData","text","AddVote","updateData","update","question","setQuestion","alternatives","setAlternatives","alt","currentQuestion","setCurrentQuestion","open","i","newVal","prev","slice","type","onClick","checked","$","expr","con","document","querySelector","getOffset","element","rect","getBoundingClientRect","top","documentElement","scrollTop","body","left","scrollLeft","tag","o","createElement","val","appendChild","ref","parentNode","insertBefore","Object","keys","prop","style","setAttribute","BASE_MEASURES","margins","bottom","right","paddings","baseHeight","titleHeight","legendHeight","titleFontSize","getTopOffset","m","getLeftOffset","getExtraHeight","getExtraWidth","INIT_CHART_UPDATE_TIMEOUT","CHART_POST_ANIMATE_TIMEOUT","AXIS_DATASET_CHART_TYPES","AXIS_LEGEND_BAR_SIZE","BAR_CHART_SPACE_RATIO","MIN_BAR_PERCENT_HEIGHT","LINE_CHART_DOT_SIZE","PERCENTAGE_BAR_DEFAULT_HEIGHT","PERCENTAGE_BAR_DEFAULT_DEPTH","HEATMAP_DISTRIBUTION_SIZE","HEATMAP_SQUARE_SIZE","DEFAULT_CHAR_WIDTH","TOOLTIP_POINTER_TRIANGLE_HEIGHT","DEFAULT_CHART_COLORS","DEFAULT_COLORS","bar","line","pie","percentage","heatmap","donut","ANGLE_RATIO","Math","PI","FULL_ANGLE","SvgTip","parent","colors","this","titleName","titleValue","listValues","titleValueFirst","x","y","setup","makeTooltip","fill","calcPosition","container","inside","className","innerHTML","hideTip","title","dataPointList","addEventListener","index","concat","set","color","formatted","li","styles","width","offsetWidth","offsetHeight","maxLeft","pointer","delta","pointerOffset","valueFirst","refresh","opacity","floatTwo","d","parseFloat","toFixed","fillArray","array","count","start","fillerArray","Array","abs","getStringWidth","string","charWidth","getPositionByAngle","angle","radius","sin","cos","getBarHeightAndYAttr","yTop","zeroLine","height","equilizeNoOfElements","array1","array2","extraCount","truncateString","txt","len","getSplineCurvePointsStr","xList","yList","points","push","controlPoint","current","previous","next","pointA","pointB","lengthX","lengthY","sqrt","pow","atan2","command","reduce","acc","point","a","pointStr","cps","cpe","PRESET_COLOR_MAP","limitColor","r","lightenDarkenColor","amt","col","getColor","usePound","num","parseInt","b","toString","AXIS_TICK_LENGTH","LABEL_MARGIN","LABEL_MAX_CHARS","FONT_SIZE","BASE_LINE_COLOR","FONT_FILL","$$1","createSVG","createElementNS","setGradientStop","gradElem","offset","makeSVGGroup","transform","args","makePath","pathStr","stroke","strokeWidth","makeGradient","svgDefElem","lighter","gradientId","gradientDef","x1","x2","y1","y2","renderVerticalGradient","opacities","heatSquare","size","makeText","content","options","fontSize","dy","textAnchor","makeHoriLine","label","lineType","shortenNumbers","number","Number","isNaN","p","floor","log10","l","shortened","round","shortenLargeNumber","xLine","pos","mode","makeVertLine","makeOverlay","unit","transformValue","nodeName","getAttribute","childNodes","overlay","cloneNode","updateOverlay","attributes","values","filter","attr","includes","specified","nodeValue","UNIT_ANIM_DUR","PATH_ANIM_DUR","MARKER_LINE_ANIM_DUR","REPLACE_ALL_NEW_DUR","STD_EASING","translate","oldCoord","newCoord","duration","old","join","translateHoriLine","yLine","newY","oldY","animatePathStr","oldPath","EASING","ease","linear","easein","easeout","easeinout","webkitTransform","msTransform","mozTransform","oTransform","animateSVG","svgContainer","elements","newElements","animElements","animElement","newElement","props","dur","easingType","oldValues","attributeName","animateElement","currentValue","animAttr","from","to","begin","keySplines","keyTimes","calcMode","animateSVGElement","replaceChild","animSvg","CSSTEXT","BaseChart","HTMLElement","Error","rawChartArgs","realData","prepareData","prepareFirstData","validateColors","config","showTooltip","showLegend","isNavigable","animate","truncateLegends","measures","JSON","parse","stringify","setMeasures","argHeight","state","initTimeout","overlays","configure","validColors","forEach","test","isValidColor","console","warn","boundDrawFn","draw","window","removeEventListener","makeContainer","updateWidth","independentWidth","tip","bindTooltip","onlyWidthChange","init","calc","makeChartArea","setupComponents","components","c","drawArea","render","setTimeout","renderLegend","setupNavigation","padding","baseWidth","getComputedStyle","paddingLeft","paddingRight","clientWidth","svg","removeChild","svgDefs","titleEL","legendArea","updateTipOffset","Map","error","elementsToAnimate","svgElement","animSvgElement","runSMILAnimation","make","updateNav","bindUnits","bindOverlay","keyActions","onEnterKey","bind","onLeftArrow","onUpArrow","onRightArrow","onDownArrow","el","innerHeight","clientHeight","innerWidth","isElementInViewport","event","keyCode","chartSvg","clone","classList","add","styleEl","firstChild","prepareForExport","filename","blob","Blob","url","URL","createObjectURL","href","download","click","revokeObjectURL","downloadFile","AggregationChart","super","maxSlices","maxLegendPoints","s","sliceTotals","allTotals","labels","total","datasets","totals","sort","remaining","sumOfRemaining","grandTotal","center","textContent","legendTotals","barWidth","divisor","dot","truncate","cx","cy","dx","group","legendDot","NO_OF_YEAR_MONTHS","NO_OF_DAYS_IN_WEEK","NO_OF_MILLIS","SEC_IN_DAY","MONTH_NAMES","DAY_NAMES_SHORT","treatAsUtc","date","result","Date","setMinutes","getMinutes","getTimezoneOffset","getYyyyMmDd","dd","getDate","mm","getMonth","getFullYear","getTime","getWeeksBetween","startDate","endDate","weekStartDate","setDayToSunday","ceil","millisecondsPerDay","getDaysBetween","areInSameMonth","getMonthName","short","monthName","getLastDateInMonth","month","year","newDate","day","getDay","addDays","numberOfDays","setDate","ChartComponent","layerClass","layerTransform","constants","getData","makeElements","animateElements","store","layer","oldData","componentConfigs","donutSlices","sliceStrings","transition","newData","pieSlices","percentageBars","xPositions","depth","percentageBar","widths","barHeight","barDepth","yAxis","positions","position","newPos","newLabels","oldPos","oldLabels","xAxis","calcLabels","newX","oldX","translateVertLine","yMarkers","labelPos","labelSvg","yMarker","newOptions","yRegions","region","yRegion","startPos","endPos","newStarts","oldStarts","rectGroup","newY1","newY2","oldY2","newHeight","animateRegion","heatDomain","colWidth","rowHeight","squareSize","xTranslate","serializedSubDomains","cols","week","weekNo","toUpperCase","yyyyMmDd","dataValue","square","barGraph","unitType","units","yPositions","j","meta","minHeight","datasetBar","offsets","barsWidth","newXPos","newYPos","newOffsets","oldXPos","oldYPos","oldOffsets","rectAnim","oldCoordStr","split","animateBar","lineGraph","paths","hideLine","pointsStr","spline","path","heatline","gradient_id","regionFill","gradient_id_region","getPaths","hideDots","datasetDot","valuesOverPoints","newValues","newXList","newYList","pathComponents","animPath","regStartPt","regEndPt","animRegion","animatePath","animateDot","getComponent","k","assign","normalize","mantissa","exponent","sig","isFinite","exp","getChartIntervals","maxValue","minValue","normalMaxValue","normalMinValue","intervals","max","min","upperBound","lowerBound","range","noOfParts","partSize","getChartRangeIntervals","getIntervalSize","orderedArray","scale","scaleMultiplier","COL_WIDTH","ROW_HEIGHT","AxisChart","barOptions","lineOptions","axisOptions","tooltipOptions","xAxisMode","yAxisMode","xIsSeries","shortenYAxisNumbers","formatTooltipX","formatTooltipY","datasetLength","zeroArray","vals","chartType","end","dataPrep","zeroData","zeroDataPrep","calcXPositions","calcYAxisParameters","getAllYValues","makeDataByIndex","unitWidth","xOffset","dataValues","withMinimum","yPts","getPositiveFirstIntervals","absMinValue","intervalSize","unshift","pseudoMaxValue","pseudoMinValue","calcChartIntervals","intervalHeight","zeroIndex","interval","indexOf","getZeroIndex","calcDatasetPoints","calcYExtremes","calcYRegions","scaleAll","cumulativeYs","cumulativeYPos","stacked","yExtremes","cumulative","allValueLists","chartWidth","isSeries","allowedSpace","allowedLetters","getShortenedLabels","barDatasets","lineDatasets","barsConfigs","spaceRatio","lineConfigs","minLine","dotSize","markerConfigs","optionals","dataUnitComponents","component","dataByIndex","formatX","formatY","yPos","formattedLabel","xPos","yExtreme","relX","pageX","relY","pageY","mapTooltipXPosition","goal","arr","closest","curr","getClosestInArray","dbi","setValues","showTip","legendBar","overlayGuides","g","currentIndex","currentUnit","setCurrentDataPoint","properties","evt","createEvent","initEvent","dispatchEvent","fire","getDataPoint","datasetValues","addDataPoint","splice","removeDataPoint","chartTypes","bars","get","gOff","pOff","formattedLabels","fraction","countLabel","validStarts","startSubDomain","startSubDomainIndex","discreteDomains","spacing","noOfWeeks","setFullYear","dataPoints","timestampSec$$1","firstWeekStart","distribution","distributionSize","dataMaxValue","distributionStep","checkpoint","calcDistribution","domainConfigs","getDomains","lessCol","dayName","dayText","comp","daySquares","daySquare","dateParts","lessText","moreText","startMonth","startYear","endMonth","endYear","noOfMonths","startOfMonth","getDomainConfig","startOfWeek","domainConfig","noOfMonthWeeks","getCol","empty","currentDate","currentDateWithinData","getSubDomainConfig","mouseMove","mouseLeave","hoverRadio","startAngle","clockWise","prevSlicesProperties","slicesProperties","curAngle","originDiffAngle","largeArc","diffAngle","endAngle","startPosition","endPosition","prevProperty","curStart","curEnd","curPath","arcStartX","arcStartY","arcEndX","midArc","arcEndY","makeCircleStr","makeArcPathStr","property","flag","calTranslateByAngle","g_off","formatted_labels","percent","slices","prevIndex","curActiveSliceIndex","prevAcitve","curActiveSlice","hoverSlice","makeStrokeCircleStr","makeArcStrokePathStr","Chart","getChartByType","VoteStats","voteId","chartContainer","useRef","useEndpoint","chartData","num_votes","VotePanel","votes","openCreateModal","useModal","openChartModal","closeModal","useCloseModal","event_id","vote","AttendantPanel","input","setInput","destroy","attendants","meeting_id","user_username","attendant","user","pretty_name","buttons","iconComponent","FiTrash2","VotingAdmin","VotingAdminPage","objHasProperty","prototype","hasOwnProperty","call","appendPK","pk","rv","setLoading","useContext","LoadingContext","setData","setError","params","request","method","Promise","resolve","catch","err","reject","retrieve","prevData","obj","List","children","ListItem","subtitle","listText","listButtons","ListButton","Icon","shown","defaultProps","DoorkeeperPanel","doorkeepers","doorkeeper"],"mappings":"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","file":"component---src-components-voting-admin-page-js-3d0d48444cd1a05ab4ce.js","sourcesContent":["import React, { useState, useEffect } from 'react'\n\nimport style from '../../scss/checkin.module.scss'\nimport { useEndpoint, del, get } from '../request'\nimport { FiTrash2 } from 'react-icons/fi'\nimport useRestEndpoint from '../request/useRestEndpoint'\n\nconst MeetingPanel = ({ setCurrentMeeting, currentMeeting }) => {\n  const [newMeetingName, setNewMeetingName] = useState('')\n\n  const [{ list, create }, unorderedMeetings] = useRestEndpoint({\n    endpoint: '/voting/meetings/',\n  })\n\n  const meetings = unorderedMeetings ? [...unorderedMeetings].reverse() : null\n\n  useEffect(() => {\n    list()\n    // TODO: handle errors\n  }, [])\n\n  useEffect(\n    () => {\n      if (!meetings || !meetings.length) setCurrentMeeting(null)\n      else if (currentMeeting === null) setCurrentMeeting({ ...meetings[0] })\n    },\n    [meetings]\n  )\n\n  if (meetings === null) return <></>\n\n  return (\n    <div>\n      <h2>Möten</h2>\n      {meetings && meetings.length && (\n        <select\n          value={currentMeeting ? currentMeeting.id : undefined}\n          onChange={e =>\n            setCurrentMeeting(\n              meetings.find(meeting => `${meeting.id}` === e.target.value)\n            )\n          }\n        >\n          {meetings.map(meeting => (\n            <option value={meeting.id} key={meeting.id}>\n              {meeting.name}\n            </option>\n          ))}\n        </select>\n      )}\n      <form\n        onSubmit={e => {\n          e.preventDefault()\n          setNewMeetingName('')\n          // setCurrentMeeting(null)\n\n          create({\n            name: newMeetingName,\n          }).then(res => {\n            setCurrentMeeting(res.data)\n          })\n        }}\n      >\n        <input\n          value={newMeetingName}\n          onChange={e => {\n            setNewMeetingName(e.target.value)\n          }}\n        />\n      </form>\n    </div>\n  )\n}\n\nexport default MeetingPanel\n","import React, { useState, useEffect } from 'react'\nimport useRestEndpoint from '../request/useRestEndpoint'\n\nlet currentKey = 0\n// creates an alternative with an unique key, do not manually create alternative objects\n// the key does not match the id later given by the server.\nconst createAlternative = (existingData = {}) => {\n  currentKey += 1\n  return { text: '', ...existingData, key: currentKey }\n}\n\nconst AddVote = ({ currentMeeting, create, updateData, update }) => {\n  const [question, setQuestion] = useState(\n    updateData ? updateData.question : ''\n  )\n  const [alternatives, setAlternatives] = useState(\n    updateData\n      ? updateData.alternatives.map(alt => createAlternative(alt))\n      : [createAlternative(), createAlternative()]\n  )\n  const [currentQuestion, setCurrentQuestion] = useState(\n    updateData ? updateData.open : true\n  )\n\n  return (\n    <div>\n      <label>\n        Fråga\n        <input\n          value={question}\n          onChange={e => {\n            setQuestion(e.target.value)\n          }}\n        />\n      </label>\n      <hr />\n      <ul>\n        {alternatives.map((alt, i) => (\n          <li key={alt.key}>\n            <input\n              value={alt.text}\n              onChange={e => {\n                const newVal = e.target.value\n                setAlternatives(prev => [\n                  ...prev.slice(0, i),\n                  { ...prev[i], text: newVal },\n                  ...prev.slice(i + 1),\n                ])\n              }}\n            />\n            <button\n              type=\"button\"\n              onClick={() => {\n                setAlternatives(prev => [\n                  ...prev.slice(0, i),\n                  ...prev.slice(i + 1),\n                ])\n              }}\n            >\n              X\n            </button>\n          </li>\n        ))}\n      </ul>\n      <button\n        type=\"button\"\n        onClick={() => {\n          setAlternatives(prev => [...prev, createAlternative()])\n        }}\n      >\n        Lägg till alternativ\n      </button>\n      <hr />\n      <label>\n        <input\n          type=\"checkbox\"\n          checked={currentQuestion}\n          onChange={() => setCurrentQuestion(prev => !prev)}\n        />\n        Nuvarande frågan\n      </label>\n      <hr />\n      <button\n        type=\"button\"\n        onClick={() => {\n          if (updateData) {\n            update(updateData.id, {\n              question,\n              open: currentQuestion,\n              alternatives,\n              meeting: currentMeeting.id,\n            })\n          } else {\n            create({\n              question,\n              open: currentQuestion,\n              alternatives,\n              meeting: currentMeeting.id,\n            })\n          }\n        }}\n      >\n        {updateData ? 'Uppdatera omröstning' : 'Skapa ny omröstning'}\n      </button>\n    </div>\n  )\n}\n\nexport default AddVote\n","import \"core-js/modules/es6.array.sort\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/web.dom.iterable\";\n\nfunction $(expr, con) {\n  return typeof expr === \"string\" ? (con || document).querySelector(expr) : expr || null;\n}\n\n$.create = (tag, o) => {\n  var element = document.createElement(tag);\n\n  for (var i in o) {\n    var val = o[i];\n\n    if (i === \"inside\") {\n      $(val).appendChild(element);\n    } else if (i === \"around\") {\n      var ref = $(val);\n      ref.parentNode.insertBefore(element, ref);\n      element.appendChild(ref);\n    } else if (i === \"styles\") {\n      if (typeof val === \"object\") {\n        Object.keys(val).map(prop => {\n          element.style[prop] = val[prop];\n        });\n      }\n    } else if (i in element) {\n      element[i] = val;\n    } else {\n      element.setAttribute(i, val);\n    }\n  }\n\n  return element;\n};\n\nfunction getOffset(element) {\n  let rect = element.getBoundingClientRect();\n  return {\n    // https://stackoverflow.com/a/7436602/6495043\n    // rect.top varies with scroll, so we add whatever has been\n    // scrolled to it to get absolute distance from actual page top\n    top: rect.top + (document.documentElement.scrollTop || document.body.scrollTop),\n    left: rect.left + (document.documentElement.scrollLeft || document.body.scrollLeft)\n  };\n}\n\nfunction isElementInViewport(el) {\n  // Although straightforward: https://stackoverflow.com/a/7557433/6495043\n  var rect = el.getBoundingClientRect();\n  return rect.top >= 0 && rect.left >= 0 && rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n  /*or $(window).height() */\n  rect.right <= (window.innerWidth || document.documentElement.clientWidth)\n  /*or $(window).width() */\n  ;\n}\n\nfunction getElementContentWidth(element) {\n  var styles = window.getComputedStyle(element);\n  var padding = parseFloat(styles.paddingLeft) + parseFloat(styles.paddingRight);\n  return element.clientWidth - padding;\n}\n\nfunction fire(target, type, properties) {\n  var evt = document.createEvent(\"HTMLEvents\");\n  evt.initEvent(type, true, true);\n\n  for (var j in properties) {\n    evt[j] = properties[j];\n  }\n\n  return target.dispatchEvent(evt);\n} // https://css-tricks.com/snippets/javascript/loop-queryselectorall-matches/\n\n\nconst BASE_MEASURES = {\n  margins: {\n    top: 10,\n    bottom: 10,\n    left: 20,\n    right: 20\n  },\n  paddings: {\n    top: 20,\n    bottom: 40,\n    left: 30,\n    right: 10\n  },\n  baseHeight: 240,\n  titleHeight: 20,\n  legendHeight: 30,\n  titleFontSize: 12\n};\n\nfunction getTopOffset(m) {\n  return m.titleHeight + m.margins.top + m.paddings.top;\n}\n\nfunction getLeftOffset(m) {\n  return m.margins.left + m.paddings.left;\n}\n\nfunction getExtraHeight(m) {\n  let totalExtraHeight = m.margins.top + m.margins.bottom + m.paddings.top + m.paddings.bottom + m.titleHeight + m.legendHeight;\n  return totalExtraHeight;\n}\n\nfunction getExtraWidth(m) {\n  let totalExtraWidth = m.margins.left + m.margins.right + m.paddings.left + m.paddings.right;\n  return totalExtraWidth;\n}\n\nconst INIT_CHART_UPDATE_TIMEOUT = 700;\nconst CHART_POST_ANIMATE_TIMEOUT = 400;\nconst DEFAULT_AXIS_CHART_TYPE = 'line';\nconst AXIS_DATASET_CHART_TYPES = ['line', 'bar'];\nconst AXIS_LEGEND_BAR_SIZE = 100;\nconst BAR_CHART_SPACE_RATIO = 0.5;\nconst MIN_BAR_PERCENT_HEIGHT = 0.00;\nconst LINE_CHART_DOT_SIZE = 4;\nconst DOT_OVERLAY_SIZE_INCR = 4;\nconst PERCENTAGE_BAR_DEFAULT_HEIGHT = 20;\nconst PERCENTAGE_BAR_DEFAULT_DEPTH = 2; // Fixed 5-color theme,\n// More colors are difficult to parse visually\n\nconst HEATMAP_DISTRIBUTION_SIZE = 5;\nconst HEATMAP_SQUARE_SIZE = 10;\nconst HEATMAP_GUTTER_SIZE = 2;\nconst DEFAULT_CHAR_WIDTH = 7;\nconst TOOLTIP_POINTER_TRIANGLE_HEIGHT = 5;\nconst DEFAULT_CHART_COLORS = ['light-blue', 'blue', 'violet', 'red', 'orange', 'yellow', 'green', 'light-green', 'purple', 'magenta', 'light-grey', 'dark-grey'];\nconst HEATMAP_COLORS_GREEN = ['#ebedf0', '#c6e48b', '#7bc96f', '#239a3b', '#196127'];\nconst DEFAULT_COLORS = {\n  bar: DEFAULT_CHART_COLORS,\n  line: DEFAULT_CHART_COLORS,\n  pie: DEFAULT_CHART_COLORS,\n  percentage: DEFAULT_CHART_COLORS,\n  heatmap: HEATMAP_COLORS_GREEN,\n  donut: DEFAULT_CHART_COLORS\n}; // Universal constants\n\nconst ANGLE_RATIO = Math.PI / 180;\nconst FULL_ANGLE = 360;\n\nclass SvgTip {\n  constructor({\n    parent = null,\n    colors = []\n  }) {\n    this.parent = parent;\n    this.colors = colors;\n    this.titleName = '';\n    this.titleValue = '';\n    this.listValues = [];\n    this.titleValueFirst = 0;\n    this.x = 0;\n    this.y = 0;\n    this.top = 0;\n    this.left = 0;\n    this.setup();\n  }\n\n  setup() {\n    this.makeTooltip();\n  }\n\n  refresh() {\n    this.fill();\n    this.calcPosition();\n  }\n\n  makeTooltip() {\n    this.container = $.create('div', {\n      inside: this.parent,\n      className: 'graph-svg-tip comparison',\n      innerHTML: \"<span class=\\\"title\\\"></span>\\n\\t\\t\\t\\t<ul class=\\\"data-point-list\\\"></ul>\\n\\t\\t\\t\\t<div class=\\\"svg-pointer\\\"></div>\"\n    });\n    this.hideTip();\n    this.title = this.container.querySelector('.title');\n    this.dataPointList = this.container.querySelector('.data-point-list');\n    this.parent.addEventListener('mouseleave', () => {\n      this.hideTip();\n    });\n  }\n\n  fill() {\n    let title;\n\n    if (this.index) {\n      this.container.setAttribute('data-point-index', this.index);\n    }\n\n    if (this.titleValueFirst) {\n      title = \"<strong>\".concat(this.titleValue, \"</strong>\").concat(this.titleName);\n    } else {\n      title = \"\".concat(this.titleName, \"<strong>\").concat(this.titleValue, \"</strong>\");\n    }\n\n    this.title.innerHTML = title;\n    this.dataPointList.innerHTML = '';\n    this.listValues.map((set, i) => {\n      const color = this.colors[i] || 'black';\n      let value = set.formatted === 0 || set.formatted ? set.formatted : set.value;\n      let li = $.create('li', {\n        styles: {\n          'border-top': \"3px solid \".concat(color)\n        },\n        innerHTML: \"<strong style=\\\"display: block;\\\">\".concat(value === 0 || value ? value : '', \"</strong>\\n\\t\\t\\t\\t\\t\").concat(set.title ? set.title : '')\n      });\n      this.dataPointList.appendChild(li);\n    });\n  }\n\n  calcPosition() {\n    let width = this.container.offsetWidth;\n    this.top = this.y - this.container.offsetHeight - TOOLTIP_POINTER_TRIANGLE_HEIGHT;\n    this.left = this.x - width / 2;\n    let maxLeft = this.parent.offsetWidth - width;\n    let pointer = this.container.querySelector('.svg-pointer');\n\n    if (this.left < 0) {\n      pointer.style.left = \"calc(50% - \".concat(-1 * this.left, \"px)\");\n      this.left = 0;\n    } else if (this.left > maxLeft) {\n      let delta = this.left - maxLeft;\n      let pointerOffset = \"calc(50% + \".concat(delta, \"px)\");\n      pointer.style.left = pointerOffset;\n      this.left = maxLeft;\n    } else {\n      pointer.style.left = \"50%\";\n    }\n  }\n\n  setValues(x, y, title = {}, listValues = [], index = -1) {\n    this.titleName = title.name;\n    this.titleValue = title.value;\n    this.listValues = listValues;\n    this.x = x;\n    this.y = y;\n    this.titleValueFirst = title.valueFirst || 0;\n    this.index = index;\n    this.refresh();\n  }\n\n  hideTip() {\n    this.container.style.top = '0px';\n    this.container.style.left = '0px';\n    this.container.style.opacity = '0';\n  }\n\n  showTip() {\n    this.container.style.top = this.top + 'px';\n    this.container.style.left = this.left + 'px';\n    this.container.style.opacity = '1';\n  }\n\n}\n/**\n * Returns the value of a number upto 2 decimal places.\n * @param {Number} d Any number\n */\n\n\nfunction floatTwo(d) {\n  return parseFloat(d.toFixed(2));\n}\n/**\n * Returns whether or not two given arrays are equal.\n * @param {Array} arr1 First array\n * @param {Array} arr2 Second array\n */\n\n/**\n * Shuffles array in place. ES6 version\n * @param {Array} array An array containing the items.\n */\n\n/**\n * Fill an array with extra points\n * @param {Array} array Array\n * @param {Number} count number of filler elements\n * @param {Object} element element to fill with\n * @param {Boolean} start fill at start?\n */\n\n\nfunction fillArray(array, count, element, start = false) {\n  if (!element) {\n    element = start ? array[0] : array[array.length - 1];\n  }\n\n  let fillerArray = new Array(Math.abs(count)).fill(element);\n  array = start ? fillerArray.concat(array) : array.concat(fillerArray);\n  return array;\n}\n/**\n * Returns pixel width of string.\n * @param {String} string\n * @param {Number} charWidth Width of single char in pixels\n */\n\n\nfunction getStringWidth(string, charWidth) {\n  return (string + \"\").length * charWidth;\n} // https://stackoverflow.com/a/29325222\n\n\nfunction getPositionByAngle(angle, radius) {\n  return {\n    x: Math.sin(angle * ANGLE_RATIO) * radius,\n    y: Math.cos(angle * ANGLE_RATIO) * radius\n  };\n}\n\nfunction getBarHeightAndYAttr(yTop, zeroLine) {\n  let height, y;\n\n  if (yTop <= zeroLine) {\n    height = zeroLine - yTop;\n    y = yTop;\n  } else {\n    height = yTop - zeroLine;\n    y = zeroLine;\n  }\n\n  return [height, y];\n}\n\nfunction equilizeNoOfElements(array1, array2, extraCount = array2.length - array1.length) {\n  // Doesn't work if either has zero elements.\n  if (extraCount > 0) {\n    array1 = fillArray(array1, extraCount);\n  } else {\n    array2 = fillArray(array2, extraCount);\n  }\n\n  return [array1, array2];\n}\n\nfunction truncateString(txt, len) {\n  if (!txt) {\n    return;\n  }\n\n  if (txt.length > len) {\n    return txt.slice(0, len - 3) + '...';\n  } else {\n    return txt;\n  }\n}\n\nfunction shortenLargeNumber(label) {\n  let number;\n  if (typeof label === 'number') number = label;else if (typeof label === 'string') {\n    number = Number(label);\n    if (Number.isNaN(number)) return label;\n  } // Using absolute since log wont work for negative numbers\n\n  let p = Math.floor(Math.log10(Math.abs(number)));\n  if (p <= 2) return number; // Return as is for a 3 digit number of less\n\n  let l = Math.floor(p / 3);\n  let shortened = Math.pow(10, p - l * 3) * +(number / Math.pow(10, p)).toFixed(1); // Correct for floating point error upto 2 decimal places\n\n  return Math.round(shortened * 100) / 100 + ' ' + ['', 'K', 'M', 'B', 'T'][l];\n} // cubic bezier curve calculation (from example by François Romain)\n\n\nfunction getSplineCurvePointsStr(xList, yList) {\n  let points = [];\n\n  for (let i = 0; i < xList.length; i++) {\n    points.push([xList[i], yList[i]]);\n  }\n\n  let smoothing = 0.2;\n\n  let line = (pointA, pointB) => {\n    let lengthX = pointB[0] - pointA[0];\n    let lengthY = pointB[1] - pointA[1];\n    return {\n      length: Math.sqrt(Math.pow(lengthX, 2) + Math.pow(lengthY, 2)),\n      angle: Math.atan2(lengthY, lengthX)\n    };\n  };\n\n  let controlPoint = (current, previous, next, reverse) => {\n    let p = previous || current;\n    let n = next || current;\n    let o = line(p, n);\n    let angle = o.angle + (reverse ? Math.PI : 0);\n    let length = o.length * smoothing;\n    let x = current[0] + Math.cos(angle) * length;\n    let y = current[1] + Math.sin(angle) * length;\n    return [x, y];\n  };\n\n  let bezierCommand = (point, i, a) => {\n    let cps = controlPoint(a[i - 1], a[i - 2], point);\n    let cpe = controlPoint(point, a[i - 1], a[i + 1], true);\n    return \"C \".concat(cps[0], \",\").concat(cps[1], \" \").concat(cpe[0], \",\").concat(cpe[1], \" \").concat(point[0], \",\").concat(point[1]);\n  };\n\n  let pointStr = (points, command) => {\n    return points.reduce((acc, point, i, a) => i === 0 ? \"\".concat(point[0], \",\").concat(point[1]) : \"\".concat(acc, \" \").concat(command(point, i, a)), '');\n  };\n\n  return pointStr(points, bezierCommand);\n}\n\nconst PRESET_COLOR_MAP = {\n  'light-blue': '#7cd6fd',\n  'blue': '#5e64ff',\n  'violet': '#743ee2',\n  'red': '#ff5858',\n  'orange': '#ffa00a',\n  'yellow': '#feef72',\n  'green': '#28a745',\n  'light-green': '#98d85b',\n  'purple': '#b554ff',\n  'magenta': '#ffa3ef',\n  'black': '#36114C',\n  'grey': '#bdd3e6',\n  'light-grey': '#f0f4f7',\n  'dark-grey': '#b8c2cc'\n};\n\nfunction limitColor(r) {\n  if (r > 255) return 255;else if (r < 0) return 0;\n  return r;\n}\n\nfunction lightenDarkenColor(color, amt) {\n  let col = getColor(color);\n  let usePound = false;\n\n  if (col[0] == \"#\") {\n    col = col.slice(1);\n    usePound = true;\n  }\n\n  let num = parseInt(col, 16);\n  let r = limitColor((num >> 16) + amt);\n  let b = limitColor((num >> 8 & 0x00FF) + amt);\n  let g = limitColor((num & 0x0000FF) + amt);\n  return (usePound ? \"#\" : \"\") + (g | b << 8 | r << 16).toString(16);\n}\n\nfunction isValidColor(string) {\n  // https://stackoverflow.com/a/8027444/6495043\n  return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(string);\n}\n\nconst getColor = color => {\n  return PRESET_COLOR_MAP[color] || color;\n};\n\nconst AXIS_TICK_LENGTH = 6;\nconst LABEL_MARGIN = 4;\nconst LABEL_MAX_CHARS = 15;\nconst FONT_SIZE = 10;\nconst BASE_LINE_COLOR = '#dadada';\nconst FONT_FILL = '#555b51';\n\nfunction $$1(expr, con) {\n  return typeof expr === \"string\" ? (con || document).querySelector(expr) : expr || null;\n}\n\nfunction createSVG(tag, o) {\n  var element = document.createElementNS(\"http://www.w3.org/2000/svg\", tag);\n\n  for (var i in o) {\n    var val = o[i];\n\n    if (i === \"inside\") {\n      $$1(val).appendChild(element);\n    } else if (i === \"around\") {\n      var ref = $$1(val);\n      ref.parentNode.insertBefore(element, ref);\n      element.appendChild(ref);\n    } else if (i === \"styles\") {\n      if (typeof val === \"object\") {\n        Object.keys(val).map(prop => {\n          element.style[prop] = val[prop];\n        });\n      }\n    } else {\n      if (i === \"className\") {\n        i = \"class\";\n      }\n\n      if (i === \"innerHTML\") {\n        element['textContent'] = val;\n      } else {\n        element.setAttribute(i, val);\n      }\n    }\n  }\n\n  return element;\n}\n\nfunction renderVerticalGradient(svgDefElem, gradientId) {\n  return createSVG('linearGradient', {\n    inside: svgDefElem,\n    id: gradientId,\n    x1: 0,\n    x2: 0,\n    y1: 0,\n    y2: 1\n  });\n}\n\nfunction setGradientStop(gradElem, offset, color, opacity) {\n  return createSVG('stop', {\n    'inside': gradElem,\n    'style': \"stop-color: \".concat(color),\n    'offset': offset,\n    'stop-opacity': opacity\n  });\n}\n\nfunction makeSVGContainer(parent, className, width, height) {\n  return createSVG('svg', {\n    className: className,\n    inside: parent,\n    width: width,\n    height: height\n  });\n}\n\nfunction makeSVGDefs(svgContainer) {\n  return createSVG('defs', {\n    inside: svgContainer\n  });\n}\n\nfunction makeSVGGroup(className, transform = '', parent = undefined) {\n  let args = {\n    className: className,\n    transform: transform\n  };\n  if (parent) args.inside = parent;\n  return createSVG('g', args);\n}\n\nfunction makePath(pathStr, className = '', stroke = 'none', fill = 'none', strokeWidth = 2) {\n  return createSVG('path', {\n    className: className,\n    d: pathStr,\n    styles: {\n      stroke: stroke,\n      fill: fill,\n      'stroke-width': strokeWidth\n    }\n  });\n}\n\nfunction makeArcPathStr(startPosition, endPosition, center, radius, clockWise = 1, largeArc = 0) {\n  let [arcStartX, arcStartY] = [center.x + startPosition.x, center.y + startPosition.y];\n  let [arcEndX, arcEndY] = [center.x + endPosition.x, center.y + endPosition.y];\n  return \"M\".concat(center.x, \" \").concat(center.y, \"\\n\\t\\tL\").concat(arcStartX, \" \").concat(arcStartY, \"\\n\\t\\tA \").concat(radius, \" \").concat(radius, \" 0 \").concat(largeArc, \" \").concat(clockWise ? 1 : 0, \"\\n\\t\\t\").concat(arcEndX, \" \").concat(arcEndY, \" z\");\n}\n\nfunction makeCircleStr(startPosition, endPosition, center, radius, clockWise = 1, largeArc = 0) {\n  let [arcStartX, arcStartY] = [center.x + startPosition.x, center.y + startPosition.y];\n  let [arcEndX, midArc, arcEndY] = [center.x + endPosition.x, center.y * 2, center.y + endPosition.y];\n  return \"M\".concat(center.x, \" \").concat(center.y, \"\\n\\t\\tL\").concat(arcStartX, \" \").concat(arcStartY, \"\\n\\t\\tA \").concat(radius, \" \").concat(radius, \" 0 \").concat(largeArc, \" \").concat(clockWise ? 1 : 0, \"\\n\\t\\t\").concat(arcEndX, \" \").concat(midArc, \" z\\n\\t\\tL\").concat(arcStartX, \" \").concat(midArc, \"\\n\\t\\tA \").concat(radius, \" \").concat(radius, \" 0 \").concat(largeArc, \" \").concat(clockWise ? 1 : 0, \"\\n\\t\\t\").concat(arcEndX, \" \").concat(arcEndY, \" z\");\n}\n\nfunction makeArcStrokePathStr(startPosition, endPosition, center, radius, clockWise = 1, largeArc = 0) {\n  let [arcStartX, arcStartY] = [center.x + startPosition.x, center.y + startPosition.y];\n  let [arcEndX, arcEndY] = [center.x + endPosition.x, center.y + endPosition.y];\n  return \"M\".concat(arcStartX, \" \").concat(arcStartY, \"\\n\\t\\tA \").concat(radius, \" \").concat(radius, \" 0 \").concat(largeArc, \" \").concat(clockWise ? 1 : 0, \"\\n\\t\\t\").concat(arcEndX, \" \").concat(arcEndY);\n}\n\nfunction makeStrokeCircleStr(startPosition, endPosition, center, radius, clockWise = 1, largeArc = 0) {\n  let [arcStartX, arcStartY] = [center.x + startPosition.x, center.y + startPosition.y];\n  let [arcEndX, midArc, arcEndY] = [center.x + endPosition.x, radius * 2 + arcStartY, center.y + startPosition.y];\n  return \"M\".concat(arcStartX, \" \").concat(arcStartY, \"\\n\\t\\tA \").concat(radius, \" \").concat(radius, \" 0 \").concat(largeArc, \" \").concat(clockWise ? 1 : 0, \"\\n\\t\\t\").concat(arcEndX, \" \").concat(midArc, \"\\n\\t\\tM\").concat(arcStartX, \" \").concat(midArc, \"\\n\\t\\tA \").concat(radius, \" \").concat(radius, \" 0 \").concat(largeArc, \" \").concat(clockWise ? 1 : 0, \"\\n\\t\\t\").concat(arcEndX, \" \").concat(arcEndY);\n}\n\nfunction makeGradient(svgDefElem, color, lighter = false) {\n  let gradientId = 'path-fill-gradient' + '-' + color + '-' + (lighter ? 'lighter' : 'default');\n  let gradientDef = renderVerticalGradient(svgDefElem, gradientId);\n  let opacities = [1, 0.6, 0.2];\n\n  if (lighter) {\n    opacities = [0.4, 0.2, 0];\n  }\n\n  setGradientStop(gradientDef, \"0%\", color, opacities[0]);\n  setGradientStop(gradientDef, \"50%\", color, opacities[1]);\n  setGradientStop(gradientDef, \"100%\", color, opacities[2]);\n  return gradientId;\n}\n\nfunction percentageBar(x, y, width, height, depth = PERCENTAGE_BAR_DEFAULT_DEPTH, fill = 'none') {\n  let args = {\n    className: 'percentage-bar',\n    x: x,\n    y: y,\n    width: width,\n    height: height,\n    fill: fill,\n    styles: {\n      'stroke': lightenDarkenColor(fill, -25),\n      // Diabolically good: https://stackoverflow.com/a/9000859\n      // https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-dasharray\n      'stroke-dasharray': \"0, \".concat(height + width, \", \").concat(width, \", \").concat(height),\n      'stroke-width': depth\n    }\n  };\n  return createSVG(\"rect\", args);\n}\n\nfunction heatSquare(className, x, y, size, fill = 'none', data = {}) {\n  let args = {\n    className: className,\n    x: x,\n    y: y,\n    width: size,\n    height: size,\n    fill: fill\n  };\n  Object.keys(data).map(key => {\n    args[key] = data[key];\n  });\n  return createSVG(\"rect\", args);\n}\n\nfunction legendBar(x, y, size, fill = 'none', label, truncate = false) {\n  label = truncate ? truncateString(label, LABEL_MAX_CHARS) : label;\n  let args = {\n    className: 'legend-bar',\n    x: 0,\n    y: 0,\n    width: size,\n    height: '2px',\n    fill: fill\n  };\n  let text = createSVG('text', {\n    className: 'legend-dataset-text',\n    x: 0,\n    y: 0,\n    dy: FONT_SIZE * 2 + 'px',\n    'font-size': FONT_SIZE * 1.2 + 'px',\n    'text-anchor': 'start',\n    fill: FONT_FILL,\n    innerHTML: label\n  });\n  let group = createSVG('g', {\n    transform: \"translate(\".concat(x, \", \").concat(y, \")\")\n  });\n  group.appendChild(createSVG(\"rect\", args));\n  group.appendChild(text);\n  return group;\n}\n\nfunction legendDot(x, y, size, fill = 'none', label, truncate = false) {\n  label = truncate ? truncateString(label, LABEL_MAX_CHARS) : label;\n  let args = {\n    className: 'legend-dot',\n    cx: 0,\n    cy: 0,\n    r: size,\n    fill: fill\n  };\n  let text = createSVG('text', {\n    className: 'legend-dataset-text',\n    x: 0,\n    y: 0,\n    dx: FONT_SIZE + 'px',\n    dy: FONT_SIZE / 3 + 'px',\n    'font-size': FONT_SIZE * 1.2 + 'px',\n    'text-anchor': 'start',\n    fill: FONT_FILL,\n    innerHTML: label\n  });\n  let group = createSVG('g', {\n    transform: \"translate(\".concat(x, \", \").concat(y, \")\")\n  });\n  group.appendChild(createSVG(\"circle\", args));\n  group.appendChild(text);\n  return group;\n}\n\nfunction makeText(className, x, y, content, options = {}) {\n  let fontSize = options.fontSize || FONT_SIZE;\n  let dy = options.dy !== undefined ? options.dy : fontSize / 2;\n  let fill = options.fill || FONT_FILL;\n  let textAnchor = options.textAnchor || 'start';\n  return createSVG('text', {\n    className: className,\n    x: x,\n    y: y,\n    dy: dy + 'px',\n    'font-size': fontSize + 'px',\n    fill: fill,\n    'text-anchor': textAnchor,\n    innerHTML: content\n  });\n}\n\nfunction makeVertLine(x, label, y1, y2, options = {}) {\n  if (!options.stroke) options.stroke = BASE_LINE_COLOR;\n  let l = createSVG('line', {\n    className: 'line-vertical ' + options.className,\n    x1: 0,\n    x2: 0,\n    y1: y1,\n    y2: y2,\n    styles: {\n      stroke: options.stroke\n    }\n  });\n  let text = createSVG('text', {\n    x: 0,\n    y: y1 > y2 ? y1 + LABEL_MARGIN : y1 - LABEL_MARGIN - FONT_SIZE,\n    dy: FONT_SIZE + 'px',\n    'font-size': FONT_SIZE + 'px',\n    'text-anchor': 'middle',\n    innerHTML: label + \"\"\n  });\n  let line = createSVG('g', {\n    transform: \"translate(\".concat(x, \", 0)\")\n  });\n  line.appendChild(l);\n  line.appendChild(text);\n  return line;\n}\n\nfunction makeHoriLine(y, label, x1, x2, options = {}) {\n  if (!options.stroke) options.stroke = BASE_LINE_COLOR;\n  if (!options.lineType) options.lineType = '';\n  if (options.shortenNumbers) label = shortenLargeNumber(label);\n  let className = 'line-horizontal ' + options.className + (options.lineType === \"dashed\" ? \"dashed\" : \"\");\n  let l = createSVG('line', {\n    className: className,\n    x1: x1,\n    x2: x2,\n    y1: 0,\n    y2: 0,\n    styles: {\n      stroke: options.stroke\n    }\n  });\n  let text = createSVG('text', {\n    x: x1 < x2 ? x1 - LABEL_MARGIN : x1 + LABEL_MARGIN,\n    y: 0,\n    dy: FONT_SIZE / 2 - 2 + 'px',\n    'font-size': FONT_SIZE + 'px',\n    'text-anchor': x1 < x2 ? 'end' : 'start',\n    innerHTML: label + \"\"\n  });\n  let line = createSVG('g', {\n    transform: \"translate(0, \".concat(y, \")\"),\n    'stroke-opacity': 1\n  });\n\n  if (text === 0 || text === '0') {\n    line.style.stroke = \"rgba(27, 31, 35, 0.6)\";\n  }\n\n  line.appendChild(l);\n  line.appendChild(text);\n  return line;\n}\n\nfunction yLine(y, label, width, options = {}) {\n  if (!options.pos) options.pos = 'left';\n  if (!options.offset) options.offset = 0;\n  if (!options.mode) options.mode = 'span';\n  if (!options.stroke) options.stroke = BASE_LINE_COLOR;\n  if (!options.className) options.className = '';\n  let x1 = -1 * AXIS_TICK_LENGTH;\n  let x2 = options.mode === 'span' ? width + AXIS_TICK_LENGTH : 0;\n\n  if (options.mode === 'tick' && options.pos === 'right') {\n    x1 = width + AXIS_TICK_LENGTH;\n    x2 = width;\n  } // let offset = options.pos === 'left' ? -1 * options.offset : options.offset;\n\n\n  x1 += options.offset;\n  x2 += options.offset;\n  return makeHoriLine(y, label, x1, x2, {\n    stroke: options.stroke,\n    className: options.className,\n    lineType: options.lineType,\n    shortenNumbers: options.shortenNumbers\n  });\n}\n\nfunction xLine(x, label, height, options = {}) {\n  if (!options.pos) options.pos = 'bottom';\n  if (!options.offset) options.offset = 0;\n  if (!options.mode) options.mode = 'span';\n  if (!options.stroke) options.stroke = BASE_LINE_COLOR;\n  if (!options.className) options.className = ''; // Draw X axis line in span/tick mode with optional label\n  //                        \ty2(span)\n  // \t\t\t\t\t\t|\n  // \t\t\t\t\t\t|\n  //\t\t\t\tx line\t|\n  //\t\t\t\t\t\t|\n  // \t\t\t\t\t   \t|\n  // ---------------------+-- y2(tick)\n  //\t\t\t\t\t\t|\n  //\t\t\t\t\t\t\ty1\n\n  let y1 = height + AXIS_TICK_LENGTH;\n  let y2 = options.mode === 'span' ? -1 * AXIS_TICK_LENGTH : height;\n\n  if (options.mode === 'tick' && options.pos === 'top') {\n    // top axis ticks\n    y1 = -1 * AXIS_TICK_LENGTH;\n    y2 = 0;\n  }\n\n  return makeVertLine(x, label, y1, y2, {\n    stroke: options.stroke,\n    className: options.className,\n    lineType: options.lineType\n  });\n}\n\nfunction yMarker(y, label, width, options = {}) {\n  if (!options.labelPos) options.labelPos = 'right';\n  let x = options.labelPos === 'left' ? LABEL_MARGIN : width - getStringWidth(label, 5) - LABEL_MARGIN;\n  let labelSvg = createSVG('text', {\n    className: 'chart-label',\n    x: x,\n    y: 0,\n    dy: FONT_SIZE / -2 + 'px',\n    'font-size': FONT_SIZE + 'px',\n    'text-anchor': 'start',\n    innerHTML: label + \"\"\n  });\n  let line = makeHoriLine(y, '', 0, width, {\n    stroke: options.stroke || BASE_LINE_COLOR,\n    className: options.className || '',\n    lineType: options.lineType\n  });\n  line.appendChild(labelSvg);\n  return line;\n}\n\nfunction yRegion(y1, y2, width, label, options = {}) {\n  // return a group\n  let height = y1 - y2;\n  let rect = createSVG('rect', {\n    className: \"bar mini\",\n    // remove class\n    styles: {\n      fill: \"rgba(228, 234, 239, 0.49)\",\n      stroke: BASE_LINE_COLOR,\n      'stroke-dasharray': \"\".concat(width, \", \").concat(height)\n    },\n    // 'data-point-index': index,\n    x: 0,\n    y: 0,\n    width: width,\n    height: height\n  });\n  if (!options.labelPos) options.labelPos = 'right';\n  let x = options.labelPos === 'left' ? LABEL_MARGIN : width - getStringWidth(label + \"\", 4.5) - LABEL_MARGIN;\n  let labelSvg = createSVG('text', {\n    className: 'chart-label',\n    x: x,\n    y: 0,\n    dy: FONT_SIZE / -2 + 'px',\n    'font-size': FONT_SIZE + 'px',\n    'text-anchor': 'start',\n    innerHTML: label + \"\"\n  });\n  let region = createSVG('g', {\n    transform: \"translate(0, \".concat(y2, \")\")\n  });\n  region.appendChild(rect);\n  region.appendChild(labelSvg);\n  return region;\n}\n\nfunction datasetBar(x, yTop, width, color, label = '', index = 0, offset = 0, meta = {}) {\n  let [height, y] = getBarHeightAndYAttr(yTop, meta.zeroLine);\n  y -= offset;\n\n  if (height === 0) {\n    height = meta.minHeight;\n    y -= meta.minHeight;\n  }\n\n  let rect = createSVG('rect', {\n    className: \"bar mini\",\n    style: \"fill: \".concat(color),\n    'data-point-index': index,\n    x: x,\n    y: y,\n    width: width,\n    height: height\n  });\n  label += \"\";\n\n  if (!label && !label.length) {\n    return rect;\n  } else {\n    rect.setAttribute('y', 0);\n    rect.setAttribute('x', 0);\n    let text = createSVG('text', {\n      className: 'data-point-value',\n      x: width / 2,\n      y: 0,\n      dy: FONT_SIZE / 2 * -1 + 'px',\n      'font-size': FONT_SIZE + 'px',\n      'text-anchor': 'middle',\n      innerHTML: label\n    });\n    let group = createSVG('g', {\n      'data-point-index': index,\n      transform: \"translate(\".concat(x, \", \").concat(y, \")\")\n    });\n    group.appendChild(rect);\n    group.appendChild(text);\n    return group;\n  }\n}\n\nfunction datasetDot(x, y, radius, color, label = '', index = 0) {\n  let dot = createSVG('circle', {\n    style: \"fill: \".concat(color),\n    'data-point-index': index,\n    cx: x,\n    cy: y,\n    r: radius\n  });\n  label += \"\";\n\n  if (!label && !label.length) {\n    return dot;\n  } else {\n    dot.setAttribute('cy', 0);\n    dot.setAttribute('cx', 0);\n    let text = createSVG('text', {\n      className: 'data-point-value',\n      x: 0,\n      y: 0,\n      dy: FONT_SIZE / 2 * -1 - radius + 'px',\n      'font-size': FONT_SIZE + 'px',\n      'text-anchor': 'middle',\n      innerHTML: label\n    });\n    let group = createSVG('g', {\n      'data-point-index': index,\n      transform: \"translate(\".concat(x, \", \").concat(y, \")\")\n    });\n    group.appendChild(dot);\n    group.appendChild(text);\n    return group;\n  }\n}\n\nfunction getPaths(xList, yList, color, options = {}, meta = {}) {\n  let pointsList = yList.map((y, i) => xList[i] + ',' + y);\n  let pointsStr = pointsList.join(\"L\"); // Spline\n\n  if (options.spline) pointsStr = getSplineCurvePointsStr(xList, yList);\n  let path = makePath(\"M\" + pointsStr, 'line-graph-path', color); // HeatLine\n\n  if (options.heatline) {\n    let gradient_id = makeGradient(meta.svgDefs, color);\n    path.style.stroke = \"url(#\".concat(gradient_id, \")\");\n  }\n\n  let paths = {\n    path: path\n  }; // Region\n\n  if (options.regionFill) {\n    let gradient_id_region = makeGradient(meta.svgDefs, color, true);\n    let pathStr = \"M\" + \"\".concat(xList[0], \",\").concat(meta.zeroLine, \"L\") + pointsStr + \"L\".concat(xList.slice(-1)[0], \",\").concat(meta.zeroLine);\n    paths.region = makePath(pathStr, \"region-fill\", 'none', \"url(#\".concat(gradient_id_region, \")\"));\n  }\n\n  return paths;\n}\n\nlet makeOverlay = {\n  'bar': unit => {\n    let transformValue;\n\n    if (unit.nodeName !== 'rect') {\n      transformValue = unit.getAttribute('transform');\n      unit = unit.childNodes[0];\n    }\n\n    let overlay = unit.cloneNode();\n    overlay.style.fill = '#000000';\n    overlay.style.opacity = '0.4';\n\n    if (transformValue) {\n      overlay.setAttribute('transform', transformValue);\n    }\n\n    return overlay;\n  },\n  'dot': unit => {\n    let transformValue;\n\n    if (unit.nodeName !== 'circle') {\n      transformValue = unit.getAttribute('transform');\n      unit = unit.childNodes[0];\n    }\n\n    let overlay = unit.cloneNode();\n    let radius = unit.getAttribute('r');\n    let fill = unit.getAttribute('fill');\n    overlay.setAttribute('r', parseInt(radius) + DOT_OVERLAY_SIZE_INCR);\n    overlay.setAttribute('fill', fill);\n    overlay.style.opacity = '0.6';\n\n    if (transformValue) {\n      overlay.setAttribute('transform', transformValue);\n    }\n\n    return overlay;\n  },\n  'heat_square': unit => {\n    let transformValue;\n\n    if (unit.nodeName !== 'circle') {\n      transformValue = unit.getAttribute('transform');\n      unit = unit.childNodes[0];\n    }\n\n    let overlay = unit.cloneNode();\n    let radius = unit.getAttribute('r');\n    let fill = unit.getAttribute('fill');\n    overlay.setAttribute('r', parseInt(radius) + DOT_OVERLAY_SIZE_INCR);\n    overlay.setAttribute('fill', fill);\n    overlay.style.opacity = '0.6';\n\n    if (transformValue) {\n      overlay.setAttribute('transform', transformValue);\n    }\n\n    return overlay;\n  }\n};\nlet updateOverlay = {\n  'bar': (unit, overlay) => {\n    let transformValue;\n\n    if (unit.nodeName !== 'rect') {\n      transformValue = unit.getAttribute('transform');\n      unit = unit.childNodes[0];\n    }\n\n    let attributes = ['x', 'y', 'width', 'height'];\n    Object.values(unit.attributes).filter(attr => attributes.includes(attr.name) && attr.specified).map(attr => {\n      overlay.setAttribute(attr.name, attr.nodeValue);\n    });\n\n    if (transformValue) {\n      overlay.setAttribute('transform', transformValue);\n    }\n  },\n  'dot': (unit, overlay) => {\n    let transformValue;\n\n    if (unit.nodeName !== 'circle') {\n      transformValue = unit.getAttribute('transform');\n      unit = unit.childNodes[0];\n    }\n\n    let attributes = ['cx', 'cy'];\n    Object.values(unit.attributes).filter(attr => attributes.includes(attr.name) && attr.specified).map(attr => {\n      overlay.setAttribute(attr.name, attr.nodeValue);\n    });\n\n    if (transformValue) {\n      overlay.setAttribute('transform', transformValue);\n    }\n  },\n  'heat_square': (unit, overlay) => {\n    let transformValue;\n\n    if (unit.nodeName !== 'circle') {\n      transformValue = unit.getAttribute('transform');\n      unit = unit.childNodes[0];\n    }\n\n    let attributes = ['cx', 'cy'];\n    Object.values(unit.attributes).filter(attr => attributes.includes(attr.name) && attr.specified).map(attr => {\n      overlay.setAttribute(attr.name, attr.nodeValue);\n    });\n\n    if (transformValue) {\n      overlay.setAttribute('transform', transformValue);\n    }\n  }\n};\nconst UNIT_ANIM_DUR = 350;\nconst PATH_ANIM_DUR = 350;\nconst MARKER_LINE_ANIM_DUR = UNIT_ANIM_DUR;\nconst REPLACE_ALL_NEW_DUR = 250;\nconst STD_EASING = 'easein';\n\nfunction translate(unit, oldCoord, newCoord, duration) {\n  let old = typeof oldCoord === 'string' ? oldCoord : oldCoord.join(', ');\n  return [unit, {\n    transform: newCoord.join(', ')\n  }, duration, STD_EASING, \"translate\", {\n    transform: old\n  }];\n}\n\nfunction translateVertLine(xLine, newX, oldX) {\n  return translate(xLine, [oldX, 0], [newX, 0], MARKER_LINE_ANIM_DUR);\n}\n\nfunction translateHoriLine(yLine, newY, oldY) {\n  return translate(yLine, [0, oldY], [0, newY], MARKER_LINE_ANIM_DUR);\n}\n\nfunction animateRegion(rectGroup, newY1, newY2, oldY2) {\n  let newHeight = newY1 - newY2;\n  let rect = rectGroup.childNodes[0];\n  let width = rect.getAttribute(\"width\");\n  let rectAnim = [rect, {\n    height: newHeight,\n    'stroke-dasharray': \"\".concat(width, \", \").concat(newHeight)\n  }, MARKER_LINE_ANIM_DUR, STD_EASING];\n  let groupAnim = translate(rectGroup, [0, oldY2], [0, newY2], MARKER_LINE_ANIM_DUR);\n  return [rectAnim, groupAnim];\n}\n\nfunction animateBar(bar, x, yTop, width, offset = 0, meta = {}) {\n  let [height, y] = getBarHeightAndYAttr(yTop, meta.zeroLine);\n  y -= offset;\n\n  if (bar.nodeName !== 'rect') {\n    let rect = bar.childNodes[0];\n    let rectAnim = [rect, {\n      width: width,\n      height: height\n    }, UNIT_ANIM_DUR, STD_EASING];\n    let oldCoordStr = bar.getAttribute(\"transform\").split(\"(\")[1].slice(0, -1);\n    let groupAnim = translate(bar, oldCoordStr, [x, y], MARKER_LINE_ANIM_DUR);\n    return [rectAnim, groupAnim];\n  } else {\n    return [[bar, {\n      width: width,\n      height: height,\n      x: x,\n      y: y\n    }, UNIT_ANIM_DUR, STD_EASING]];\n  } // bar.animate({height: args.newHeight, y: yTop}, UNIT_ANIM_DUR, mina.easein);\n\n}\n\nfunction animateDot(dot, x, y) {\n  if (dot.nodeName !== 'circle') {\n    let oldCoordStr = dot.getAttribute(\"transform\").split(\"(\")[1].slice(0, -1);\n    let groupAnim = translate(dot, oldCoordStr, [x, y], MARKER_LINE_ANIM_DUR);\n    return [groupAnim];\n  } else {\n    return [[dot, {\n      cx: x,\n      cy: y\n    }, UNIT_ANIM_DUR, STD_EASING]];\n  } // dot.animate({cy: yTop}, UNIT_ANIM_DUR, mina.easein);\n\n}\n\nfunction animatePath(paths, newXList, newYList, zeroLine, spline) {\n  let pathComponents = [];\n  let pointsStr = newYList.map((y, i) => newXList[i] + ',' + y).join(\"L\");\n  if (spline) pointsStr = getSplineCurvePointsStr(newXList, newYList);\n  const animPath = [paths.path, {\n    d: \"M\" + pointsStr\n  }, PATH_ANIM_DUR, STD_EASING];\n  pathComponents.push(animPath);\n\n  if (paths.region) {\n    let regStartPt = \"\".concat(newXList[0], \",\").concat(zeroLine, \"L\");\n    let regEndPt = \"L\".concat(newXList.slice(-1)[0], \", \").concat(zeroLine);\n    const animRegion = [paths.region, {\n      d: \"M\" + regStartPt + pointsStr + regEndPt\n    }, PATH_ANIM_DUR, STD_EASING];\n    pathComponents.push(animRegion);\n  }\n\n  return pathComponents;\n}\n\nfunction animatePathStr(oldPath, pathStr) {\n  return [oldPath, {\n    d: pathStr\n  }, UNIT_ANIM_DUR, STD_EASING];\n} // Leveraging SMIL Animations\n\n\nconst EASING = {\n  ease: \"0.25 0.1 0.25 1\",\n  linear: \"0 0 1 1\",\n  // easein: \"0.42 0 1 1\",\n  easein: \"0.1 0.8 0.2 1\",\n  easeout: \"0 0 0.58 1\",\n  easeinout: \"0.42 0 0.58 1\"\n};\n\nfunction animateSVGElement(element, props, dur, easingType = \"linear\", type = undefined, oldValues = {}) {\n  let animElement = element.cloneNode(true);\n  let newElement = element.cloneNode(true);\n\n  for (var attributeName in props) {\n    let animateElement;\n\n    if (attributeName === 'transform') {\n      animateElement = document.createElementNS(\"http://www.w3.org/2000/svg\", \"animateTransform\");\n    } else {\n      animateElement = document.createElementNS(\"http://www.w3.org/2000/svg\", \"animate\");\n    }\n\n    let currentValue = oldValues[attributeName] || element.getAttribute(attributeName);\n    let value = props[attributeName];\n    let animAttr = {\n      attributeName: attributeName,\n      from: currentValue,\n      to: value,\n      begin: \"0s\",\n      dur: dur / 1000 + \"s\",\n      values: currentValue + \";\" + value,\n      keySplines: EASING[easingType],\n      keyTimes: \"0;1\",\n      calcMode: \"spline\",\n      fill: 'freeze'\n    };\n\n    if (type) {\n      animAttr[\"type\"] = type;\n    }\n\n    for (var i in animAttr) {\n      animateElement.setAttribute(i, animAttr[i]);\n    }\n\n    animElement.appendChild(animateElement);\n\n    if (type) {\n      newElement.setAttribute(attributeName, \"translate(\".concat(value, \")\"));\n    } else {\n      newElement.setAttribute(attributeName, value);\n    }\n  }\n\n  return [animElement, newElement];\n}\n\nfunction transform(element, style) {\n  // eslint-disable-line no-unused-vars\n  element.style.transform = style;\n  element.style.webkitTransform = style;\n  element.style.msTransform = style;\n  element.style.mozTransform = style;\n  element.style.oTransform = style;\n}\n\nfunction animateSVG(svgContainer, elements) {\n  let newElements = [];\n  let animElements = [];\n  elements.map(element => {\n    let unit = element[0];\n    let parent = unit.parentNode;\n    let animElement, newElement;\n    element[0] = unit;\n    [animElement, newElement] = animateSVGElement(...element);\n    newElements.push(newElement);\n    animElements.push([animElement, parent]);\n    parent.replaceChild(animElement, unit);\n  });\n  let animSvg = svgContainer.cloneNode(true);\n  animElements.map((animElement, i) => {\n    animElement[1].replaceChild(newElements[i], animElement[0]);\n    elements[i][0] = newElements[i];\n  });\n  return animSvg;\n}\n\nfunction runSMILAnimation(parent, svgElement, elementsToAnimate) {\n  if (elementsToAnimate.length === 0) return;\n  let animSvgElement = animateSVG(svgElement, elementsToAnimate);\n\n  if (svgElement.parentNode == parent) {\n    parent.removeChild(svgElement);\n    parent.appendChild(animSvgElement);\n  } // Replace the new svgElement (data has already been replaced)\n\n\n  setTimeout(() => {\n    if (animSvgElement.parentNode == parent) {\n      parent.removeChild(animSvgElement);\n      parent.appendChild(svgElement);\n    }\n  }, REPLACE_ALL_NEW_DUR);\n}\n\nconst CSSTEXT = \".chart-container{position:relative;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif}.chart-container .axis,.chart-container .chart-label{fill:#555b51}.chart-container .axis line,.chart-container .chart-label line{stroke:#dadada}.chart-container .dataset-units circle{stroke:#fff;stroke-width:2}.chart-container .dataset-units path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container .dataset-path{stroke-width:2px}.chart-container .path-group path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container line.dashed{stroke-dasharray:5,3}.chart-container .axis-line .specific-value{text-anchor:start}.chart-container .axis-line .y-line{text-anchor:end}.chart-container .axis-line .x-line{text-anchor:middle}.chart-container .legend-dataset-text{fill:#6c7680;font-weight:600}.graph-svg-tip{position:absolute;z-index:99999;padding:10px;font-size:12px;color:#959da5;text-align:center;background:rgba(0,0,0,.8);border-radius:3px}.graph-svg-tip ul{padding-left:0;display:flex}.graph-svg-tip ol{padding-left:0;display:flex}.graph-svg-tip ul.data-point-list li{min-width:90px;flex:1;font-weight:600}.graph-svg-tip strong{color:#dfe2e5;font-weight:600}.graph-svg-tip .svg-pointer{position:absolute;height:5px;margin:0 0 0 -5px;content:' ';border:5px solid transparent;border-top-color:rgba(0,0,0,.8)}.graph-svg-tip.comparison{padding:0;text-align:left;pointer-events:none}.graph-svg-tip.comparison .title{display:block;padding:10px;margin:0;font-weight:600;line-height:1;pointer-events:none}.graph-svg-tip.comparison ul{margin:0;white-space:nowrap;list-style:none}.graph-svg-tip.comparison li{display:inline-block;padding:5px 10px}\";\n\nfunction downloadFile(filename, data) {\n  var a = document.createElement('a');\n  a.style = \"display: none\";\n  var blob = new Blob(data, {\n    type: \"image/svg+xml; charset=utf-8\"\n  });\n  var url = window.URL.createObjectURL(blob);\n  a.href = url;\n  a.download = filename;\n  document.body.appendChild(a);\n  a.click();\n  setTimeout(function () {\n    document.body.removeChild(a);\n    window.URL.revokeObjectURL(url);\n  }, 300);\n}\n\nfunction prepareForExport(svg) {\n  let clone = svg.cloneNode(true);\n  clone.classList.add('chart-container');\n  clone.setAttribute('xmlns', \"http://www.w3.org/2000/svg\");\n  clone.setAttribute('xmlns:xlink', \"http://www.w3.org/1999/xlink\");\n  let styleEl = $.create('style', {\n    'innerHTML': CSSTEXT\n  });\n  clone.insertBefore(styleEl, clone.firstChild);\n  let container = $.create('div');\n  container.appendChild(clone);\n  return container.innerHTML;\n}\n\nclass BaseChart {\n  constructor(parent, options) {\n    this.parent = typeof parent === 'string' ? document.querySelector(parent) : parent;\n\n    if (!(this.parent instanceof HTMLElement)) {\n      throw new Error('No `parent` element to render on was provided.');\n    }\n\n    this.rawChartArgs = options;\n    this.title = options.title || '';\n    this.type = options.type || '';\n    this.realData = this.prepareData(options.data);\n    this.data = this.prepareFirstData(this.realData);\n    this.colors = this.validateColors(options.colors, this.type);\n    this.config = {\n      showTooltip: 1,\n      // calculate\n      showLegend: 1,\n      // calculate\n      isNavigable: options.isNavigable || 0,\n      animate: typeof options.animate !== 'undefined' ? options.animate : 1,\n      truncateLegends: options.truncateLegends || 0\n    };\n    this.measures = JSON.parse(JSON.stringify(BASE_MEASURES));\n    let m = this.measures;\n    this.setMeasures(options);\n\n    if (!this.title.length) {\n      m.titleHeight = 0;\n    }\n\n    if (!this.config.showLegend) m.legendHeight = 0;\n    this.argHeight = options.height || m.baseHeight;\n    this.state = {};\n    this.options = {};\n    this.initTimeout = INIT_CHART_UPDATE_TIMEOUT;\n\n    if (this.config.isNavigable) {\n      this.overlays = [];\n    }\n\n    this.configure(options);\n  }\n\n  prepareData(data) {\n    return data;\n  }\n\n  prepareFirstData(data) {\n    return data;\n  }\n\n  validateColors(colors, type) {\n    const validColors = [];\n    colors = (colors || []).concat(DEFAULT_COLORS[type]);\n    colors.forEach(string => {\n      const color = getColor(string);\n\n      if (!isValidColor(color)) {\n        console.warn('\"' + string + '\" is not a valid color.');\n      } else {\n        validColors.push(color);\n      }\n    });\n    return validColors;\n  }\n\n  setMeasures() {// Override measures, including those for title and legend\n    // set config for legend and title\n  }\n\n  configure() {\n    let height = this.argHeight;\n    this.baseHeight = height;\n    this.height = height - getExtraHeight(this.measures); // Bind window events\n\n    this.boundDrawFn = () => this.draw(true);\n\n    window.addEventListener('resize', this.boundDrawFn);\n    window.addEventListener('orientationchange', this.boundDrawFn);\n  }\n\n  destroy() {\n    window.removeEventListener('resize', this.boundDrawFn);\n    window.removeEventListener('orientationchange', this.boundDrawFn);\n  } // Has to be called manually\n\n\n  setup() {\n    this.makeContainer();\n    this.updateWidth();\n    this.makeTooltip();\n    this.draw(false, true);\n  }\n\n  makeContainer() {\n    // Chart needs a dedicated parent element\n    this.parent.innerHTML = '';\n    let args = {\n      inside: this.parent,\n      className: 'chart-container'\n    };\n\n    if (this.independentWidth) {\n      args.styles = {\n        width: this.independentWidth + 'px'\n      };\n    }\n\n    this.container = $.create('div', args);\n  }\n\n  makeTooltip() {\n    this.tip = new SvgTip({\n      parent: this.container,\n      colors: this.colors\n    });\n    this.bindTooltip();\n  }\n\n  bindTooltip() {}\n\n  draw(onlyWidthChange = false, init = false) {\n    this.updateWidth();\n    this.calc(onlyWidthChange);\n    this.makeChartArea();\n    this.setupComponents();\n    this.components.forEach(c => c.setup(this.drawArea)); // this.components.forEach(c => c.make());\n\n    this.render(this.components, false);\n\n    if (init) {\n      this.data = this.realData;\n      setTimeout(() => {\n        this.update(this.data);\n      }, this.initTimeout);\n    }\n\n    this.renderLegend();\n    this.setupNavigation(init);\n  }\n\n  calc() {} // builds state\n\n\n  updateWidth() {\n    this.baseWidth = getElementContentWidth(this.parent);\n    this.width = this.baseWidth - getExtraWidth(this.measures);\n  }\n\n  makeChartArea() {\n    if (this.svg) {\n      this.container.removeChild(this.svg);\n    }\n\n    let m = this.measures;\n    this.svg = makeSVGContainer(this.container, 'frappe-chart chart', this.baseWidth, this.baseHeight);\n    this.svgDefs = makeSVGDefs(this.svg);\n\n    if (this.title.length) {\n      this.titleEL = makeText('title', m.margins.left, m.margins.top, this.title, {\n        fontSize: m.titleFontSize,\n        fill: '#666666',\n        dy: m.titleFontSize\n      });\n    }\n\n    let top = getTopOffset(m);\n    this.drawArea = makeSVGGroup(this.type + '-chart chart-draw-area', \"translate(\".concat(getLeftOffset(m), \", \").concat(top, \")\"));\n\n    if (this.config.showLegend) {\n      top += this.height + m.paddings.bottom;\n      this.legendArea = makeSVGGroup('chart-legend', \"translate(\".concat(getLeftOffset(m), \", \").concat(top, \")\"));\n    }\n\n    if (this.title.length) {\n      this.svg.appendChild(this.titleEL);\n    }\n\n    this.svg.appendChild(this.drawArea);\n\n    if (this.config.showLegend) {\n      this.svg.appendChild(this.legendArea);\n    }\n\n    this.updateTipOffset(getLeftOffset(m), getTopOffset(m));\n  }\n\n  updateTipOffset(x, y) {\n    this.tip.offset = {\n      x: x,\n      y: y\n    };\n  }\n\n  setupComponents() {\n    this.components = new Map();\n  }\n\n  update(data) {\n    if (!data) {\n      console.error('No data to update.');\n    }\n\n    this.data = this.prepareData(data);\n    this.calc(); // builds state\n\n    this.render(this.components, this.config.animate);\n  }\n\n  render(components = this.components, animate = true) {\n    if (this.config.isNavigable) {\n      // Remove all existing overlays\n      this.overlays.map(o => o.parentNode.removeChild(o)); // ref.parentNode.insertBefore(element, ref);\n    }\n\n    let elementsToAnimate = []; // Can decouple to this.refreshComponents() first to save animation timeout\n\n    components.forEach(c => {\n      elementsToAnimate = elementsToAnimate.concat(c.update(animate));\n    });\n\n    if (elementsToAnimate.length > 0) {\n      runSMILAnimation(this.container, this.svg, elementsToAnimate);\n      setTimeout(() => {\n        components.forEach(c => c.make());\n        this.updateNav();\n      }, CHART_POST_ANIMATE_TIMEOUT);\n    } else {\n      components.forEach(c => c.make());\n      this.updateNav();\n    }\n  }\n\n  updateNav() {\n    if (this.config.isNavigable) {\n      this.makeOverlay();\n      this.bindUnits();\n    }\n  }\n\n  renderLegend() {}\n\n  setupNavigation(init = false) {\n    if (!this.config.isNavigable) return;\n\n    if (init) {\n      this.bindOverlay();\n      this.keyActions = {\n        '13': this.onEnterKey.bind(this),\n        '37': this.onLeftArrow.bind(this),\n        '38': this.onUpArrow.bind(this),\n        '39': this.onRightArrow.bind(this),\n        '40': this.onDownArrow.bind(this)\n      };\n      document.addEventListener('keydown', e => {\n        if (isElementInViewport(this.container)) {\n          e = e || window.event;\n\n          if (this.keyActions[e.keyCode]) {\n            this.keyActions[e.keyCode]();\n          }\n        }\n      });\n    }\n  }\n\n  makeOverlay() {}\n\n  updateOverlay() {}\n\n  bindOverlay() {}\n\n  bindUnits() {}\n\n  onLeftArrow() {}\n\n  onRightArrow() {}\n\n  onUpArrow() {}\n\n  onDownArrow() {}\n\n  onEnterKey() {}\n\n  addDataPoint() {}\n\n  removeDataPoint() {}\n\n  getDataPoint() {}\n\n  setCurrentDataPoint() {}\n\n  updateDataset() {}\n\n  export() {\n    let chartSvg = prepareForExport(this.svg);\n    downloadFile(this.title || 'Chart', [chartSvg]);\n  }\n\n}\n\nclass AggregationChart extends BaseChart {\n  constructor(parent, args) {\n    super(parent, args);\n  }\n\n  configure(args) {\n    super.configure(args);\n    this.config.maxSlices = args.maxSlices || 20;\n    this.config.maxLegendPoints = args.maxLegendPoints || 20;\n  }\n\n  calc() {\n    let s = this.state;\n    let maxSlices = this.config.maxSlices;\n    s.sliceTotals = [];\n    let allTotals = this.data.labels.map((label, i) => {\n      let total = 0;\n      this.data.datasets.map(e => {\n        total += e.values[i];\n      });\n      return [total, label];\n    }).filter(d => {\n      return d[0] >= 0;\n    }); // keep only positive results\n\n    let totals = allTotals;\n\n    if (allTotals.length > maxSlices) {\n      // Prune and keep a grey area for rest as per maxSlices\n      allTotals.sort((a, b) => {\n        return b[0] - a[0];\n      });\n      totals = allTotals.slice(0, maxSlices - 1);\n      let remaining = allTotals.slice(maxSlices - 1);\n      let sumOfRemaining = 0;\n      remaining.map(d => {\n        sumOfRemaining += d[0];\n      });\n      totals.push([sumOfRemaining, 'Rest']);\n      this.colors[maxSlices - 1] = 'grey';\n    }\n\n    s.labels = [];\n    totals.map(d => {\n      s.sliceTotals.push(d[0]);\n      s.labels.push(d[1]);\n    });\n    s.grandTotal = s.sliceTotals.reduce((a, b) => a + b, 0);\n    this.center = {\n      x: this.width / 2,\n      y: this.height / 2\n    };\n  }\n\n  renderLegend() {\n    let s = this.state;\n    this.legendArea.textContent = '';\n    this.legendTotals = s.sliceTotals.slice(0, this.config.maxLegendPoints);\n    let count = 0;\n    let y = 0;\n    this.legendTotals.map((d, i) => {\n      let barWidth = 110;\n      let divisor = Math.floor((this.width - getExtraWidth(this.measures)) / barWidth);\n\n      if (this.legendTotals.length < divisor) {\n        barWidth = this.width / this.legendTotals.length;\n      }\n\n      if (count > divisor) {\n        count = 0;\n        y += 20;\n      }\n\n      let x = barWidth * count + 5;\n      let dot = legendDot(x, y, 5, this.colors[i], \"\".concat(s.labels[i], \": \").concat(d), this.config.truncateLegends);\n      this.legendArea.appendChild(dot);\n      count++;\n    });\n  }\n\n} // Playing around with dates\n\n\nconst NO_OF_YEAR_MONTHS = 12;\nconst NO_OF_DAYS_IN_WEEK = 7;\nconst NO_OF_MILLIS = 1000;\nconst SEC_IN_DAY = 86400;\nconst MONTH_NAMES = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\nconst DAY_NAMES_SHORT = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"]; // https://stackoverflow.com/a/11252167/6495043\n\nfunction treatAsUtc(date) {\n  let result = new Date(date);\n  result.setMinutes(result.getMinutes() - result.getTimezoneOffset());\n  return result;\n}\n\nfunction getYyyyMmDd(date) {\n  let dd = date.getDate();\n  let mm = date.getMonth() + 1; // getMonth() is zero-based\n\n  return [date.getFullYear(), (mm > 9 ? '' : '0') + mm, (dd > 9 ? '' : '0') + dd].join('-');\n}\n\nfunction clone(date) {\n  return new Date(date.getTime());\n} // export function getMonthsBetween(startDate, endDate) {}\n\n\nfunction getWeeksBetween(startDate, endDate) {\n  let weekStartDate = setDayToSunday(startDate);\n  return Math.ceil(getDaysBetween(weekStartDate, endDate) / NO_OF_DAYS_IN_WEEK);\n}\n\nfunction getDaysBetween(startDate, endDate) {\n  let millisecondsPerDay = SEC_IN_DAY * NO_OF_MILLIS;\n  return (treatAsUtc(endDate) - treatAsUtc(startDate)) / millisecondsPerDay;\n}\n\nfunction areInSameMonth(startDate, endDate) {\n  return startDate.getMonth() === endDate.getMonth() && startDate.getFullYear() === endDate.getFullYear();\n}\n\nfunction getMonthName(i, short = false) {\n  let monthName = MONTH_NAMES[i];\n  return short ? monthName.slice(0, 3) : monthName;\n}\n\nfunction getLastDateInMonth(month, year) {\n  return new Date(year, month + 1, 0); // 0: last day in previous month\n} // mutates\n\n\nfunction setDayToSunday(date) {\n  let newDate = clone(date);\n  const day = newDate.getDay();\n\n  if (day !== 0) {\n    addDays(newDate, -1 * day);\n  }\n\n  return newDate;\n} // mutates\n\n\nfunction addDays(date, numberOfDays) {\n  date.setDate(date.getDate() + numberOfDays);\n}\n\nclass ChartComponent {\n  constructor({\n    layerClass = '',\n    layerTransform = '',\n    constants,\n    getData,\n    makeElements,\n    animateElements\n  }) {\n    this.layerTransform = layerTransform;\n    this.constants = constants;\n    this.makeElements = makeElements;\n    this.getData = getData;\n    this.animateElements = animateElements;\n    this.store = [];\n    this.labels = [];\n    this.layerClass = layerClass;\n    this.layerClass = typeof this.layerClass === 'function' ? this.layerClass() : this.layerClass;\n    this.refresh();\n  }\n\n  refresh(data) {\n    this.data = data || this.getData();\n  }\n\n  setup(parent) {\n    this.layer = makeSVGGroup(this.layerClass, this.layerTransform, parent);\n  }\n\n  make() {\n    this.render(this.data);\n    this.oldData = this.data;\n  }\n\n  render(data) {\n    this.store = this.makeElements(data);\n    this.layer.textContent = '';\n    this.store.forEach(element => {\n      this.layer.appendChild(element);\n    });\n    this.labels.forEach(element => {\n      this.layer.appendChild(element);\n    });\n  }\n\n  update(animate = true) {\n    this.refresh();\n    let animateElements = [];\n\n    if (animate) {\n      animateElements = this.animateElements(this.data) || [];\n    }\n\n    return animateElements;\n  }\n\n}\n\nlet componentConfigs = {\n  donutSlices: {\n    layerClass: 'donut-slices',\n\n    makeElements(data) {\n      return data.sliceStrings.map((s, i) => {\n        let slice = makePath(s, 'donut-path', data.colors[i], 'none', data.strokeWidth);\n        slice.style.transition = 'transform .3s;';\n        return slice;\n      });\n    },\n\n    animateElements(newData) {\n      return this.store.map((slice, i) => animatePathStr(slice, newData.sliceStrings[i]));\n    }\n\n  },\n  pieSlices: {\n    layerClass: 'pie-slices',\n\n    makeElements(data) {\n      return data.sliceStrings.map((s, i) => {\n        let slice = makePath(s, 'pie-path', 'none', data.colors[i]);\n        slice.style.transition = 'transform .3s;';\n        return slice;\n      });\n    },\n\n    animateElements(newData) {\n      return this.store.map((slice, i) => animatePathStr(slice, newData.sliceStrings[i]));\n    }\n\n  },\n  percentageBars: {\n    layerClass: 'percentage-bars',\n\n    makeElements(data) {\n      return data.xPositions.map((x, i) => {\n        let y = 0;\n        let bar = percentageBar(x, y, data.widths[i], this.constants.barHeight, this.constants.barDepth, data.colors[i]);\n        return bar;\n      });\n    },\n\n    animateElements(newData) {\n      if (newData) return [];\n    }\n\n  },\n  yAxis: {\n    layerClass: 'y axis',\n\n    makeElements(data) {\n      return data.positions.map((position, i) => yLine(position, data.labels[i], this.constants.width, {\n        mode: this.constants.mode,\n        pos: this.constants.pos,\n        shortenNumbers: this.constants.shortenNumbers\n      }));\n    },\n\n    animateElements(newData) {\n      let newPos = newData.positions;\n      let newLabels = newData.labels;\n      let oldPos = this.oldData.positions;\n      let oldLabels = this.oldData.labels;\n      [oldPos, newPos] = equilizeNoOfElements(oldPos, newPos);\n      [oldLabels, newLabels] = equilizeNoOfElements(oldLabels, newLabels);\n      this.render({\n        positions: oldPos,\n        labels: newLabels\n      });\n      return this.store.map((line, i) => {\n        return translateHoriLine(line, newPos[i], oldPos[i]);\n      });\n    }\n\n  },\n  xAxis: {\n    layerClass: 'x axis',\n\n    makeElements(data) {\n      return data.positions.map((position, i) => xLine(position, data.calcLabels[i], this.constants.height, {\n        mode: this.constants.mode,\n        pos: this.constants.pos\n      }));\n    },\n\n    animateElements(newData) {\n      let newPos = newData.positions;\n      let newLabels = newData.calcLabels;\n      let oldPos = this.oldData.positions;\n      let oldLabels = this.oldData.calcLabels;\n      [oldPos, newPos] = equilizeNoOfElements(oldPos, newPos);\n      [oldLabels, newLabels] = equilizeNoOfElements(oldLabels, newLabels);\n      this.render({\n        positions: oldPos,\n        calcLabels: newLabels\n      });\n      return this.store.map((line, i) => {\n        return translateVertLine(line, newPos[i], oldPos[i]);\n      });\n    }\n\n  },\n  yMarkers: {\n    layerClass: 'y-markers',\n\n    makeElements(data) {\n      return data.map(m => yMarker(m.position, m.label, this.constants.width, {\n        labelPos: m.options.labelPos,\n        mode: 'span',\n        lineType: 'dashed'\n      }));\n    },\n\n    animateElements(newData) {\n      [this.oldData, newData] = equilizeNoOfElements(this.oldData, newData);\n      let newPos = newData.map(d => d.position);\n      let newLabels = newData.map(d => d.label);\n      let newOptions = newData.map(d => d.options);\n      let oldPos = this.oldData.map(d => d.position);\n      this.render(oldPos.map((pos, i) => {\n        return {\n          position: oldPos[i],\n          label: newLabels[i],\n          options: newOptions[i]\n        };\n      }));\n      return this.store.map((line, i) => {\n        return translateHoriLine(line, newPos[i], oldPos[i]);\n      });\n    }\n\n  },\n  yRegions: {\n    layerClass: 'y-regions',\n\n    makeElements(data) {\n      return data.map(r => yRegion(r.startPos, r.endPos, this.constants.width, r.label, {\n        labelPos: r.options.labelPos\n      }));\n    },\n\n    animateElements(newData) {\n      [this.oldData, newData] = equilizeNoOfElements(this.oldData, newData);\n      let newPos = newData.map(d => d.endPos);\n      let newLabels = newData.map(d => d.label);\n      let newStarts = newData.map(d => d.startPos);\n      let newOptions = newData.map(d => d.options);\n      let oldPos = this.oldData.map(d => d.endPos);\n      let oldStarts = this.oldData.map(d => d.startPos);\n      this.render(oldPos.map((pos, i) => {\n        return {\n          startPos: oldStarts[i],\n          endPos: oldPos[i],\n          label: newLabels[i],\n          options: newOptions[i]\n        };\n      }));\n      let animateElements = [];\n      this.store.map((rectGroup, i) => {\n        animateElements = animateElements.concat(animateRegion(rectGroup, newStarts[i], newPos[i], oldPos[i]));\n      });\n      return animateElements;\n    }\n\n  },\n  heatDomain: {\n    layerClass: function layerClass() {\n      return 'heat-domain domain-' + this.constants.index;\n    },\n\n    makeElements(data) {\n      let {\n        index,\n        colWidth,\n        rowHeight,\n        squareSize,\n        xTranslate\n      } = this.constants;\n      let monthNameHeight = -12;\n      let x = xTranslate,\n          y = 0;\n      this.serializedSubDomains = [];\n      data.cols.map((week, weekNo) => {\n        if (weekNo === 1) {\n          this.labels.push(makeText('domain-name', x, monthNameHeight, getMonthName(index, true).toUpperCase(), {\n            fontSize: 9\n          }));\n        }\n\n        week.map((day, i) => {\n          if (day.fill) {\n            let data = {\n              'data-date': day.yyyyMmDd,\n              'data-value': day.dataValue,\n              'data-day': i\n            };\n            let square = heatSquare('day', x, y, squareSize, day.fill, data);\n            this.serializedSubDomains.push(square);\n          }\n\n          y += rowHeight;\n        });\n        y = 0;\n        x += colWidth;\n      });\n      return this.serializedSubDomains;\n    },\n\n    animateElements(newData) {\n      if (newData) return [];\n    }\n\n  },\n  barGraph: {\n    layerClass: function layerClass() {\n      return 'dataset-units dataset-bars dataset-' + this.constants.index;\n    },\n\n    makeElements(data) {\n      let c = this.constants;\n      this.unitType = 'bar';\n      this.units = data.yPositions.map((y, j) => {\n        return datasetBar(data.xPositions[j], y, data.barWidth, c.color, data.labels[j], j, data.offsets[j], {\n          zeroLine: data.zeroLine,\n          barsWidth: data.barsWidth,\n          minHeight: c.minHeight\n        });\n      });\n      return this.units;\n    },\n\n    animateElements(newData) {\n      let newXPos = newData.xPositions;\n      let newYPos = newData.yPositions;\n      let newOffsets = newData.offsets;\n      let newLabels = newData.labels;\n      let oldXPos = this.oldData.xPositions;\n      let oldYPos = this.oldData.yPositions;\n      let oldOffsets = this.oldData.offsets;\n      let oldLabels = this.oldData.labels;\n      [oldXPos, newXPos] = equilizeNoOfElements(oldXPos, newXPos);\n      [oldYPos, newYPos] = equilizeNoOfElements(oldYPos, newYPos);\n      [oldOffsets, newOffsets] = equilizeNoOfElements(oldOffsets, newOffsets);\n      [oldLabels, newLabels] = equilizeNoOfElements(oldLabels, newLabels);\n      this.render({\n        xPositions: oldXPos,\n        yPositions: oldYPos,\n        offsets: oldOffsets,\n        labels: newLabels,\n        zeroLine: this.oldData.zeroLine,\n        barsWidth: this.oldData.barsWidth,\n        barWidth: this.oldData.barWidth\n      });\n      let animateElements = [];\n      this.store.map((bar, i) => {\n        animateElements = animateElements.concat(animateBar(bar, newXPos[i], newYPos[i], newData.barWidth, newOffsets[i], {\n          zeroLine: newData.zeroLine\n        }));\n      });\n      return animateElements;\n    }\n\n  },\n  lineGraph: {\n    layerClass: function layerClass() {\n      return 'dataset-units dataset-line dataset-' + this.constants.index;\n    },\n\n    makeElements(data) {\n      let c = this.constants;\n      this.unitType = 'dot';\n      this.paths = {};\n\n      if (!c.hideLine) {\n        this.paths = getPaths(data.xPositions, data.yPositions, c.color, {\n          heatline: c.heatline,\n          regionFill: c.regionFill,\n          spline: c.spline\n        }, {\n          svgDefs: c.svgDefs,\n          zeroLine: data.zeroLine\n        });\n      }\n\n      this.units = [];\n\n      if (!c.hideDots) {\n        this.units = data.yPositions.map((y, j) => {\n          return datasetDot(data.xPositions[j], y, data.radius, c.color, c.valuesOverPoints ? data.values[j] : '', j);\n        });\n      }\n\n      return Object.values(this.paths).concat(this.units);\n    },\n\n    animateElements(newData) {\n      let newXPos = newData.xPositions;\n      let newYPos = newData.yPositions;\n      let newValues = newData.values;\n      let oldXPos = this.oldData.xPositions;\n      let oldYPos = this.oldData.yPositions;\n      let oldValues = this.oldData.values;\n      [oldXPos, newXPos] = equilizeNoOfElements(oldXPos, newXPos);\n      [oldYPos, newYPos] = equilizeNoOfElements(oldYPos, newYPos);\n      [oldValues, newValues] = equilizeNoOfElements(oldValues, newValues);\n      this.render({\n        xPositions: oldXPos,\n        yPositions: oldYPos,\n        values: newValues,\n        zeroLine: this.oldData.zeroLine,\n        radius: this.oldData.radius\n      });\n      let animateElements = [];\n\n      if (Object.keys(this.paths).length) {\n        animateElements = animateElements.concat(animatePath(this.paths, newXPos, newYPos, newData.zeroLine, this.constants.spline));\n      }\n\n      if (this.units.length) {\n        this.units.map((dot, i) => {\n          animateElements = animateElements.concat(animateDot(dot, newXPos[i], newYPos[i]));\n        });\n      }\n\n      return animateElements;\n    }\n\n  }\n};\n\nfunction getComponent(name, constants, getData) {\n  let keys = Object.keys(componentConfigs).filter(k => name.includes(k));\n  let config = componentConfigs[keys[0]];\n  Object.assign(config, {\n    constants: constants,\n    getData: getData\n  });\n  return new ChartComponent(config);\n}\n\nclass PercentageChart extends AggregationChart {\n  constructor(parent, args) {\n    super(parent, args);\n    this.type = 'percentage';\n    this.setup();\n  }\n\n  setMeasures(options) {\n    let m = this.measures;\n    this.barOptions = options.barOptions || {};\n    let b = this.barOptions;\n    b.height = b.height || PERCENTAGE_BAR_DEFAULT_HEIGHT;\n    b.depth = b.depth || PERCENTAGE_BAR_DEFAULT_DEPTH;\n    m.paddings.right = 30;\n    m.legendHeight = 60;\n    m.baseHeight = (b.height + b.depth * 0.5) * 8;\n  }\n\n  setupComponents() {\n    let s = this.state;\n    let componentConfigs = [['percentageBars', {\n      barHeight: this.barOptions.height,\n      barDepth: this.barOptions.depth\n    }, function () {\n      return {\n        xPositions: s.xPositions,\n        widths: s.widths,\n        colors: this.colors\n      };\n    }.bind(this)]];\n    this.components = new Map(componentConfigs.map(args => {\n      let component = getComponent(...args);\n      return [args[0], component];\n    }));\n  }\n\n  calc() {\n    super.calc();\n    let s = this.state;\n    s.xPositions = [];\n    s.widths = [];\n    let xPos = 0;\n    s.sliceTotals.map(value => {\n      let width = this.width * value / s.grandTotal;\n      s.widths.push(width);\n      s.xPositions.push(xPos);\n      xPos += width;\n    });\n  }\n\n  makeDataByIndex() {}\n\n  bindTooltip() {\n    let s = this.state;\n    this.container.addEventListener('mousemove', e => {\n      let bars = this.components.get('percentageBars').store;\n      let bar = e.target;\n\n      if (bars.includes(bar)) {\n        let i = bars.indexOf(bar);\n        let gOff = getOffset(this.container),\n            pOff = getOffset(bar);\n        let x = pOff.left - gOff.left + parseInt(bar.getAttribute('width')) / 2;\n        let y = pOff.top - gOff.top;\n        let title = (this.formattedLabels && this.formattedLabels.length > 0 ? this.formattedLabels[i] : this.state.labels[i]) + ': ';\n        let fraction = s.sliceTotals[i] / s.grandTotal;\n        this.tip.setValues(x, y, {\n          name: title,\n          value: (fraction * 100).toFixed(1) + \"%\"\n        });\n        this.tip.showTip();\n      }\n    });\n  }\n\n}\n\nclass PieChart extends AggregationChart {\n  constructor(parent, args) {\n    super(parent, args);\n    this.type = 'pie';\n    this.initTimeout = 0;\n    this.init = 1;\n    this.setup();\n  }\n\n  configure(args) {\n    super.configure(args);\n    this.mouseMove = this.mouseMove.bind(this);\n    this.mouseLeave = this.mouseLeave.bind(this);\n    this.hoverRadio = args.hoverRadio || 0.1;\n    this.config.startAngle = args.startAngle || 0;\n    this.clockWise = args.clockWise || false;\n  }\n\n  calc() {\n    super.calc();\n    let s = this.state;\n    this.radius = this.height > this.width ? this.center.x : this.center.y;\n    const {\n      radius,\n      clockWise\n    } = this;\n    const prevSlicesProperties = s.slicesProperties || [];\n    s.sliceStrings = [];\n    s.slicesProperties = [];\n    let curAngle = 180 - this.config.startAngle;\n    s.sliceTotals.map((total, i) => {\n      const startAngle = curAngle;\n      const originDiffAngle = total / s.grandTotal * FULL_ANGLE;\n      const largeArc = originDiffAngle > 180 ? 1 : 0;\n      const diffAngle = clockWise ? -originDiffAngle : originDiffAngle;\n      const endAngle = curAngle = curAngle + diffAngle;\n      const startPosition = getPositionByAngle(startAngle, radius);\n      const endPosition = getPositionByAngle(endAngle, radius);\n      const prevProperty = this.init && prevSlicesProperties[i];\n      let curStart, curEnd;\n\n      if (this.init) {\n        curStart = prevProperty ? prevProperty.startPosition : startPosition;\n        curEnd = prevProperty ? prevProperty.endPosition : startPosition;\n      } else {\n        curStart = startPosition;\n        curEnd = endPosition;\n      }\n\n      const curPath = originDiffAngle === 360 ? makeCircleStr(curStart, curEnd, this.center, this.radius, clockWise, largeArc) : makeArcPathStr(curStart, curEnd, this.center, this.radius, clockWise, largeArc);\n      s.sliceStrings.push(curPath);\n      s.slicesProperties.push({\n        startPosition,\n        endPosition,\n        value: total,\n        total: s.grandTotal,\n        startAngle,\n        endAngle,\n        angle: diffAngle\n      });\n    });\n    this.init = 0;\n  }\n\n  setupComponents() {\n    let s = this.state;\n    let componentConfigs = [['pieSlices', {}, function () {\n      return {\n        sliceStrings: s.sliceStrings,\n        colors: this.colors\n      };\n    }.bind(this)]];\n    this.components = new Map(componentConfigs.map(args => {\n      let component = getComponent(...args);\n      return [args[0], component];\n    }));\n  }\n\n  calTranslateByAngle(property) {\n    const {\n      radius,\n      hoverRadio\n    } = this;\n    const position = getPositionByAngle(property.startAngle + property.angle / 2, radius);\n    return \"translate3d(\".concat(position.x * hoverRadio, \"px,\").concat(position.y * hoverRadio, \"px,0)\");\n  }\n\n  hoverSlice(path, i, flag, e) {\n    if (!path) return;\n    const color = this.colors[i];\n\n    if (flag) {\n      transform(path, this.calTranslateByAngle(this.state.slicesProperties[i]));\n      path.style.fill = lightenDarkenColor(color, 50);\n      let g_off = getOffset(this.svg);\n      let x = e.pageX - g_off.left + 10;\n      let y = e.pageY - g_off.top - 10;\n      let title = (this.formatted_labels && this.formatted_labels.length > 0 ? this.formatted_labels[i] : this.state.labels[i]) + ': ';\n      let percent = (this.state.sliceTotals[i] * 100 / this.state.grandTotal).toFixed(1);\n      this.tip.setValues(x, y, {\n        name: title,\n        value: percent + \"%\"\n      });\n      this.tip.showTip();\n    } else {\n      transform(path, 'translate3d(0,0,0)');\n      this.tip.hideTip();\n      path.style.fill = color;\n    }\n  }\n\n  bindTooltip() {\n    this.container.addEventListener('mousemove', this.mouseMove);\n    this.container.addEventListener('mouseleave', this.mouseLeave);\n  }\n\n  mouseMove(e) {\n    const target = e.target;\n    let slices = this.components.get('pieSlices').store;\n    let prevIndex = this.curActiveSliceIndex;\n    let prevAcitve = this.curActiveSlice;\n\n    if (slices.includes(target)) {\n      let i = slices.indexOf(target);\n      this.hoverSlice(prevAcitve, prevIndex, false);\n      this.curActiveSlice = target;\n      this.curActiveSliceIndex = i;\n      this.hoverSlice(target, i, true, e);\n    } else {\n      this.mouseLeave();\n    }\n  }\n\n  mouseLeave() {\n    this.hoverSlice(this.curActiveSlice, this.curActiveSliceIndex, false);\n  }\n\n}\n\nfunction normalize(x) {\n  // Calculates mantissa and exponent of a number\n  // Returns normalized number and exponent\n  // https://stackoverflow.com/q/9383593/6495043\n  if (x === 0) {\n    return [0, 0];\n  }\n\n  if (isNaN(x)) {\n    return {\n      mantissa: -6755399441055744,\n      exponent: 972\n    };\n  }\n\n  var sig = x > 0 ? 1 : -1;\n\n  if (!isFinite(x)) {\n    return {\n      mantissa: sig * 4503599627370496,\n      exponent: 972\n    };\n  }\n\n  x = Math.abs(x);\n  var exp = Math.floor(Math.log10(x));\n  var man = x / Math.pow(10, exp);\n  return [sig * man, exp];\n}\n\nfunction getChartRangeIntervals(max, min = 0) {\n  let upperBound = Math.ceil(max);\n  let lowerBound = Math.floor(min);\n  let range = upperBound - lowerBound;\n  let noOfParts = range;\n  let partSize = 1; // To avoid too many partitions\n\n  if (range > 5) {\n    if (range % 2 !== 0) {\n      upperBound++; // Recalc range\n\n      range = upperBound - lowerBound;\n    }\n\n    noOfParts = range / 2;\n    partSize = 2;\n  } // Special case: 1 and 2\n\n\n  if (range <= 2) {\n    noOfParts = 4;\n    partSize = range / noOfParts;\n  } // Special case: 0\n\n\n  if (range === 0) {\n    noOfParts = 5;\n    partSize = 1;\n  }\n\n  let intervals = [];\n\n  for (var i = 0; i <= noOfParts; i++) {\n    intervals.push(lowerBound + partSize * i);\n  }\n\n  return intervals;\n}\n\nfunction getChartIntervals(maxValue, minValue = 0) {\n  let [normalMaxValue, exponent] = normalize(maxValue);\n  let normalMinValue = minValue ? minValue / Math.pow(10, exponent) : 0; // Allow only 7 significant digits\n\n  normalMaxValue = normalMaxValue.toFixed(6);\n  let intervals = getChartRangeIntervals(normalMaxValue, normalMinValue);\n  intervals = intervals.map(value => value * Math.pow(10, exponent));\n  return intervals;\n}\n\nfunction calcChartIntervals(values, withMinimum = false) {\n  //*** Where the magic happens ***\n  // Calculates best-fit y intervals from given values\n  // and returns the interval array\n  let maxValue = Math.max(...values);\n  let minValue = Math.min(...values); // Exponent to be used for pretty print\n\n  let exponent = 0,\n      intervals = []; // eslint-disable-line no-unused-vars\n\n  function getPositiveFirstIntervals(maxValue, absMinValue) {\n    let intervals = getChartIntervals(maxValue);\n    let intervalSize = intervals[1] - intervals[0]; // Then unshift the negative values\n\n    let value = 0;\n\n    for (var i = 1; value < absMinValue; i++) {\n      value += intervalSize;\n      intervals.unshift(-1 * value);\n    }\n\n    return intervals;\n  } // CASE I: Both non-negative\n\n\n  if (maxValue >= 0 && minValue >= 0) {\n    exponent = normalize(maxValue)[1];\n\n    if (!withMinimum) {\n      intervals = getChartIntervals(maxValue);\n    } else {\n      intervals = getChartIntervals(maxValue, minValue);\n    }\n  } // CASE II: Only minValue negative\n  else if (maxValue > 0 && minValue < 0) {\n      // `withMinimum` irrelevant in this case,\n      // We'll be handling both sides of zero separately\n      // (both starting from zero)\n      // Because ceil() and floor() behave differently\n      // in those two regions\n      let absMinValue = Math.abs(minValue);\n\n      if (maxValue >= absMinValue) {\n        exponent = normalize(maxValue)[1];\n        intervals = getPositiveFirstIntervals(maxValue, absMinValue);\n      } else {\n        // Mirror: maxValue => absMinValue, then change sign\n        exponent = normalize(absMinValue)[1];\n        let posIntervals = getPositiveFirstIntervals(absMinValue, maxValue);\n        intervals = posIntervals.map(d => d * -1);\n      }\n    } // CASE III: Both non-positive\n    else if (maxValue <= 0 && minValue <= 0) {\n        // Mirrored Case I:\n        // Work with positives, then reverse the sign and array\n        let pseudoMaxValue = Math.abs(minValue);\n        let pseudoMinValue = Math.abs(maxValue);\n        exponent = normalize(pseudoMaxValue)[1];\n\n        if (!withMinimum) {\n          intervals = getChartIntervals(pseudoMaxValue);\n        } else {\n          intervals = getChartIntervals(pseudoMaxValue, pseudoMinValue);\n        }\n\n        intervals = intervals.reverse().map(d => d * -1);\n      }\n\n  return intervals;\n}\n\nfunction getZeroIndex(yPts) {\n  let zeroIndex;\n  let interval = getIntervalSize(yPts);\n\n  if (yPts.indexOf(0) >= 0) {\n    // the range has a given zero\n    // zero-line on the chart\n    zeroIndex = yPts.indexOf(0);\n  } else if (yPts[0] > 0) {\n    // Minimum value is positive\n    // zero-line is off the chart: below\n    let min = yPts[0];\n    zeroIndex = -1 * min / interval;\n  } else {\n    // Maximum value is negative\n    // zero-line is off the chart: above\n    let max = yPts[yPts.length - 1];\n    zeroIndex = -1 * max / interval + (yPts.length - 1);\n  }\n\n  return zeroIndex;\n}\n\nfunction getIntervalSize(orderedArray) {\n  return orderedArray[1] - orderedArray[0];\n}\n\nfunction getValueRange(orderedArray) {\n  return orderedArray[orderedArray.length - 1] - orderedArray[0];\n}\n\nfunction scale(val, yAxis) {\n  return floatTwo(yAxis.zeroLine - val * yAxis.scaleMultiplier);\n}\n\nfunction getClosestInArray(goal, arr, index = false) {\n  let closest = arr.reduce(function (prev, curr) {\n    return Math.abs(curr - goal) < Math.abs(prev - goal) ? curr : prev;\n  }, []);\n  return index ? arr.indexOf(closest) : closest;\n}\n\nfunction calcDistribution(values, distributionSize) {\n  // Assume non-negative values,\n  // implying distribution minimum at zero\n  let dataMaxValue = Math.max(...values);\n  let distributionStep = 1 / (distributionSize - 1);\n  let distribution = [];\n\n  for (var i = 0; i < distributionSize; i++) {\n    let checkpoint = dataMaxValue * (distributionStep * i);\n    distribution.push(checkpoint);\n  }\n\n  return distribution;\n}\n\nfunction getMaxCheckpoint(value, distribution) {\n  return distribution.filter(d => d < value).length;\n}\n\nconst COL_WIDTH = HEATMAP_SQUARE_SIZE + HEATMAP_GUTTER_SIZE;\nconst ROW_HEIGHT = COL_WIDTH; // const DAY_INCR = 1;\n\nclass Heatmap extends BaseChart {\n  constructor(parent, options) {\n    super(parent, options);\n    this.type = 'heatmap';\n    this.countLabel = options.countLabel || '';\n    let validStarts = ['Sunday', 'Monday'];\n    let startSubDomain = validStarts.includes(options.startSubDomain) ? options.startSubDomain : 'Sunday';\n    this.startSubDomainIndex = validStarts.indexOf(startSubDomain);\n    this.setup();\n  }\n\n  setMeasures(options) {\n    let m = this.measures;\n    this.discreteDomains = options.discreteDomains === 0 ? 0 : 1;\n    m.paddings.top = ROW_HEIGHT * 3;\n    m.paddings.bottom = 0;\n    m.legendHeight = ROW_HEIGHT * 2;\n    m.baseHeight = ROW_HEIGHT * NO_OF_DAYS_IN_WEEK + getExtraHeight(m);\n    let d = this.data;\n    let spacing = this.discreteDomains ? NO_OF_YEAR_MONTHS : 0;\n    this.independentWidth = (getWeeksBetween(d.start, d.end) + spacing) * COL_WIDTH + getExtraWidth(m);\n  }\n\n  updateWidth() {\n    let spacing = this.discreteDomains ? NO_OF_YEAR_MONTHS : 0;\n    let noOfWeeks = this.state.noOfWeeks ? this.state.noOfWeeks : 52;\n    this.baseWidth = (noOfWeeks + spacing) * COL_WIDTH + getExtraWidth(this.measures);\n  }\n\n  prepareData(data = this.data) {\n    if (data.start && data.end && data.start > data.end) {\n      throw new Error('Start date cannot be greater than end date.');\n    }\n\n    if (!data.start) {\n      data.start = new Date();\n      data.start.setFullYear(data.start.getFullYear() - 1);\n    }\n\n    if (!data.end) {\n      data.end = new Date();\n    }\n\n    data.dataPoints = data.dataPoints || {};\n\n    if (parseInt(Object.keys(data.dataPoints)[0]) > 100000) {\n      let points = {};\n      Object.keys(data.dataPoints).forEach(timestampSec$$1 => {\n        let date = new Date(timestampSec$$1 * NO_OF_MILLIS);\n        points[getYyyyMmDd(date)] = data.dataPoints[timestampSec$$1];\n      });\n      data.dataPoints = points;\n    }\n\n    return data;\n  }\n\n  calc() {\n    let s = this.state;\n    s.start = clone(this.data.start);\n    s.end = clone(this.data.end);\n    s.firstWeekStart = clone(s.start);\n    s.noOfWeeks = getWeeksBetween(s.start, s.end);\n    s.distribution = calcDistribution(Object.values(this.data.dataPoints), HEATMAP_DISTRIBUTION_SIZE);\n    s.domainConfigs = this.getDomains();\n  }\n\n  setupComponents() {\n    let s = this.state;\n    let lessCol = this.discreteDomains ? 0 : 1;\n    let componentConfigs = s.domainConfigs.map((config, i) => ['heatDomain', {\n      index: config.index,\n      colWidth: COL_WIDTH,\n      rowHeight: ROW_HEIGHT,\n      squareSize: HEATMAP_SQUARE_SIZE,\n      xTranslate: s.domainConfigs.filter((config, j) => j < i).map(config => config.cols.length - lessCol).reduce((a, b) => a + b, 0) * COL_WIDTH\n    }, function () {\n      return s.domainConfigs[i];\n    }.bind(this)]);\n    this.components = new Map(componentConfigs.map((args, i) => {\n      let component = getComponent(...args);\n      return [args[0] + '-' + i, component];\n    }));\n    let y = 0;\n    DAY_NAMES_SHORT.forEach((dayName, i) => {\n      if ([1, 3, 5].includes(i)) {\n        let dayText = makeText('subdomain-name', -COL_WIDTH / 2, y, dayName, {\n          fontSize: HEATMAP_SQUARE_SIZE,\n          dy: 8,\n          textAnchor: 'end'\n        });\n        this.drawArea.appendChild(dayText);\n      }\n\n      y += ROW_HEIGHT;\n    });\n  }\n\n  update(data) {\n    if (!data) {\n      console.error('No data to update.');\n    }\n\n    this.data = this.prepareData(data);\n    this.draw();\n    this.bindTooltip();\n  }\n\n  bindTooltip() {\n    this.container.addEventListener('mousemove', e => {\n      this.components.forEach(comp => {\n        let daySquares = comp.store;\n        let daySquare = e.target;\n\n        if (daySquares.includes(daySquare)) {\n          let count = daySquare.getAttribute('data-value');\n          let dateParts = daySquare.getAttribute('data-date').split('-');\n          let month = getMonthName(parseInt(dateParts[1]) - 1, true);\n          let gOff = this.container.getBoundingClientRect(),\n              pOff = daySquare.getBoundingClientRect();\n          let width = parseInt(e.target.getAttribute('width'));\n          let x = pOff.left - gOff.left + width / 2;\n          let y = pOff.top - gOff.top;\n          let value = count + ' ' + this.countLabel;\n          let name = ' on ' + month + ' ' + dateParts[0] + ', ' + dateParts[2];\n          this.tip.setValues(x, y, {\n            name: name,\n            value: value,\n            valueFirst: 1\n          }, []);\n          this.tip.showTip();\n        }\n      });\n    });\n  }\n\n  renderLegend() {\n    this.legendArea.textContent = '';\n    let x = 0;\n    let y = ROW_HEIGHT;\n    let lessText = makeText('subdomain-name', x, y, 'Less', {\n      fontSize: HEATMAP_SQUARE_SIZE + 1,\n      dy: 9\n    });\n    x = COL_WIDTH * 2 + COL_WIDTH / 2;\n    this.legendArea.appendChild(lessText);\n    this.colors.slice(0, HEATMAP_DISTRIBUTION_SIZE).map((color, i) => {\n      const square = heatSquare('heatmap-legend-unit', x + (COL_WIDTH + 3) * i, y, HEATMAP_SQUARE_SIZE, color);\n      this.legendArea.appendChild(square);\n    });\n    let moreTextX = x + HEATMAP_DISTRIBUTION_SIZE * (COL_WIDTH + 3) + COL_WIDTH / 4;\n    let moreText = makeText('subdomain-name', moreTextX, y, 'More', {\n      fontSize: HEATMAP_SQUARE_SIZE + 1,\n      dy: 9\n    });\n    this.legendArea.appendChild(moreText);\n  }\n\n  getDomains() {\n    let s = this.state;\n    const [startMonth, startYear] = [s.start.getMonth(), s.start.getFullYear()];\n    const [endMonth, endYear] = [s.end.getMonth(), s.end.getFullYear()];\n    const noOfMonths = endMonth - startMonth + 1 + (endYear - startYear) * 12;\n    let domainConfigs = [];\n    let startOfMonth = clone(s.start);\n\n    for (var i = 0; i < noOfMonths; i++) {\n      let endDate = s.end;\n\n      if (!areInSameMonth(startOfMonth, s.end)) {\n        let [month, year] = [startOfMonth.getMonth(), startOfMonth.getFullYear()];\n        endDate = getLastDateInMonth(month, year);\n      }\n\n      domainConfigs.push(this.getDomainConfig(startOfMonth, endDate));\n      addDays(endDate, 1);\n      startOfMonth = endDate;\n    }\n\n    return domainConfigs;\n  }\n\n  getDomainConfig(startDate, endDate = '') {\n    let [month, year] = [startDate.getMonth(), startDate.getFullYear()];\n    let startOfWeek = setDayToSunday(startDate); // TODO: Monday as well\n\n    endDate = clone(endDate) || getLastDateInMonth(month, year);\n    let domainConfig = {\n      index: month,\n      cols: []\n    };\n    addDays(endDate, 1);\n    let noOfMonthWeeks = getWeeksBetween(startOfWeek, endDate);\n    let cols = [],\n        col;\n\n    for (var i = 0; i < noOfMonthWeeks; i++) {\n      col = this.getCol(startOfWeek, month);\n      cols.push(col);\n      startOfWeek = new Date(col[NO_OF_DAYS_IN_WEEK - 1].yyyyMmDd);\n      addDays(startOfWeek, 1);\n    }\n\n    if (col[NO_OF_DAYS_IN_WEEK - 1].dataValue !== undefined) {\n      addDays(startOfWeek, 1);\n      cols.push(this.getCol(startOfWeek, month, true));\n    }\n\n    domainConfig.cols = cols;\n    return domainConfig;\n  }\n\n  getCol(startDate, month, empty = false) {\n    let s = this.state; // startDate is the start of week\n\n    let currentDate = clone(startDate);\n    let col = [];\n\n    for (var i = 0; i < NO_OF_DAYS_IN_WEEK; i++, addDays(currentDate, 1)) {\n      let config = {}; // Non-generic adjustment for entire heatmap, needs state\n\n      let currentDateWithinData = currentDate >= s.start && currentDate <= s.end;\n\n      if (empty || currentDate.getMonth() !== month || !currentDateWithinData) {\n        config.yyyyMmDd = getYyyyMmDd(currentDate);\n      } else {\n        config = this.getSubDomainConfig(currentDate);\n      }\n\n      col.push(config);\n    }\n\n    return col;\n  }\n\n  getSubDomainConfig(date) {\n    let yyyyMmDd = getYyyyMmDd(date);\n    let dataValue = this.data.dataPoints[yyyyMmDd];\n    let config = {\n      yyyyMmDd: yyyyMmDd,\n      dataValue: dataValue || 0,\n      fill: this.colors[getMaxCheckpoint(dataValue, this.state.distribution)]\n    };\n    return config;\n  }\n\n}\n\nfunction dataPrep(data, type) {\n  data.labels = data.labels || [];\n  let datasetLength = data.labels.length; // Datasets\n\n  let datasets = data.datasets;\n  let zeroArray = new Array(datasetLength).fill(0);\n\n  if (!datasets) {\n    // default\n    datasets = [{\n      values: zeroArray\n    }];\n  }\n\n  datasets.map(d => {\n    // Set values\n    if (!d.values) {\n      d.values = zeroArray;\n    } else {\n      // Check for non values\n      let vals = d.values;\n      vals = vals.map(val => !isNaN(val) ? val : 0); // Trim or extend\n\n      if (vals.length > datasetLength) {\n        vals = vals.slice(0, datasetLength);\n      } else {\n        vals = fillArray(vals, datasetLength - vals.length, 0);\n      }\n    } // Set labels\n    //\n    // Set type\n\n\n    if (!d.chartType) {\n      if (!AXIS_DATASET_CHART_TYPES.includes(type)) type === DEFAULT_AXIS_CHART_TYPE;\n      d.chartType = type;\n    }\n  }); // Markers\n  // Regions\n  // data.yRegions = data.yRegions || [];\n\n  if (data.yRegions) {\n    data.yRegions.map(d => {\n      if (d.end < d.start) {\n        [d.start, d.end] = [d.end, d.start];\n      }\n    });\n  }\n\n  return data;\n}\n\nfunction zeroDataPrep(realData) {\n  let datasetLength = realData.labels.length;\n  let zeroArray = new Array(datasetLength).fill(0);\n  let zeroData = {\n    labels: realData.labels.slice(0, -1),\n    datasets: realData.datasets.map(d => {\n      return {\n        name: '',\n        values: zeroArray.slice(0, -1),\n        chartType: d.chartType\n      };\n    })\n  };\n\n  if (realData.yMarkers) {\n    zeroData.yMarkers = [{\n      value: 0,\n      label: ''\n    }];\n  }\n\n  if (realData.yRegions) {\n    zeroData.yRegions = [{\n      start: 0,\n      end: 0,\n      label: ''\n    }];\n  }\n\n  return zeroData;\n}\n\nfunction getShortenedLabels(chartWidth, labels = [], isSeries = true) {\n  let allowedSpace = chartWidth / labels.length;\n  if (allowedSpace <= 0) allowedSpace = 1;\n  let allowedLetters = allowedSpace / DEFAULT_CHAR_WIDTH;\n  let calcLabels = labels.map((label, i) => {\n    label += \"\";\n\n    if (label.length > allowedLetters) {\n      if (!isSeries) {\n        if (allowedLetters - 3 > 0) {\n          label = label.slice(0, allowedLetters - 3) + \" ...\";\n        } else {\n          label = label.slice(0, allowedLetters) + '..';\n        }\n      } else {\n        let multiple = Math.ceil(label.length / allowedLetters);\n\n        if (i % multiple !== 0) {\n          label = \"\";\n        }\n      }\n    }\n\n    return label;\n  });\n  return calcLabels;\n}\n\nclass AxisChart extends BaseChart {\n  constructor(parent, args) {\n    super(parent, args);\n    this.barOptions = args.barOptions || {};\n    this.lineOptions = args.lineOptions || {};\n    this.type = args.type || 'line';\n    this.init = 1;\n    this.setup();\n  }\n\n  setMeasures() {\n    if (this.data.datasets.length <= 1) {\n      this.config.showLegend = 0;\n      this.measures.paddings.bottom = 30;\n    }\n  }\n\n  configure(options) {\n    super.configure(options);\n    options.axisOptions = options.axisOptions || {};\n    options.tooltipOptions = options.tooltipOptions || {};\n    this.config.xAxisMode = options.axisOptions.xAxisMode || 'span';\n    this.config.yAxisMode = options.axisOptions.yAxisMode || 'span';\n    this.config.xIsSeries = options.axisOptions.xIsSeries || 0;\n    this.config.shortenYAxisNumbers = options.axisOptions.shortenYAxisNumbers || 0;\n    this.config.formatTooltipX = options.tooltipOptions.formatTooltipX;\n    this.config.formatTooltipY = options.tooltipOptions.formatTooltipY;\n    this.config.valuesOverPoints = options.valuesOverPoints;\n  }\n\n  prepareData(data = this.data) {\n    return dataPrep(data, this.type);\n  }\n\n  prepareFirstData(data = this.data) {\n    return zeroDataPrep(data);\n  }\n\n  calc(onlyWidthChange = false) {\n    this.calcXPositions();\n\n    if (!onlyWidthChange) {\n      this.calcYAxisParameters(this.getAllYValues(), this.type === 'line');\n    }\n\n    this.makeDataByIndex();\n  }\n\n  calcXPositions() {\n    let s = this.state;\n    let labels = this.data.labels;\n    s.datasetLength = labels.length;\n    s.unitWidth = this.width / s.datasetLength; // Default, as per bar, and mixed. Only line will be a special case\n\n    s.xOffset = s.unitWidth / 2; // // For a pure Line Chart\n    // s.unitWidth = this.width/(s.datasetLength - 1);\n    // s.xOffset = 0;\n\n    s.xAxis = {\n      labels: labels,\n      positions: labels.map((d, i) => floatTwo(s.xOffset + i * s.unitWidth))\n    };\n  }\n\n  calcYAxisParameters(dataValues, withMinimum = 'false') {\n    const yPts = calcChartIntervals(dataValues, withMinimum);\n    const scaleMultiplier = this.height / getValueRange(yPts);\n    const intervalHeight = getIntervalSize(yPts) * scaleMultiplier;\n    const zeroLine = this.height - getZeroIndex(yPts) * intervalHeight;\n    this.state.yAxis = {\n      labels: yPts,\n      positions: yPts.map(d => zeroLine - d * scaleMultiplier),\n      scaleMultiplier: scaleMultiplier,\n      zeroLine: zeroLine\n    }; // Dependent if above changes\n\n    this.calcDatasetPoints();\n    this.calcYExtremes();\n    this.calcYRegions();\n  }\n\n  calcDatasetPoints() {\n    let s = this.state;\n\n    let scaleAll = values => values.map(val => scale(val, s.yAxis));\n\n    s.datasets = this.data.datasets.map((d, i) => {\n      let values = d.values;\n      let cumulativeYs = d.cumulativeYs || [];\n      return {\n        name: d.name,\n        index: i,\n        chartType: d.chartType,\n        values: values,\n        yPositions: scaleAll(values),\n        cumulativeYs: cumulativeYs,\n        cumulativeYPos: scaleAll(cumulativeYs)\n      };\n    });\n  }\n\n  calcYExtremes() {\n    let s = this.state;\n\n    if (this.barOptions.stacked) {\n      s.yExtremes = s.datasets[s.datasets.length - 1].cumulativeYPos;\n      return;\n    }\n\n    s.yExtremes = new Array(s.datasetLength).fill(9999);\n    s.datasets.map(d => {\n      d.yPositions.map((pos, j) => {\n        if (pos < s.yExtremes[j]) {\n          s.yExtremes[j] = pos;\n        }\n      });\n    });\n  }\n\n  calcYRegions() {\n    let s = this.state;\n\n    if (this.data.yMarkers) {\n      this.state.yMarkers = this.data.yMarkers.map(d => {\n        d.position = scale(d.value, s.yAxis);\n        if (!d.options) d.options = {}; // if(!d.label.includes(':')) {\n        // \td.label += ': ' + d.value;\n        // }\n\n        return d;\n      });\n    }\n\n    if (this.data.yRegions) {\n      this.state.yRegions = this.data.yRegions.map(d => {\n        d.startPos = scale(d.start, s.yAxis);\n        d.endPos = scale(d.end, s.yAxis);\n        if (!d.options) d.options = {};\n        return d;\n      });\n    }\n  }\n\n  getAllYValues() {\n    let key = 'values';\n\n    if (this.barOptions.stacked) {\n      key = 'cumulativeYs';\n      let cumulative = new Array(this.state.datasetLength).fill(0);\n      this.data.datasets.map((d, i) => {\n        let values = this.data.datasets[i].values;\n        d[key] = cumulative = cumulative.map((c, i) => c + values[i]);\n      });\n    }\n\n    let allValueLists = this.data.datasets.map(d => d[key]);\n\n    if (this.data.yMarkers) {\n      allValueLists.push(this.data.yMarkers.map(d => d.value));\n    }\n\n    if (this.data.yRegions) {\n      this.data.yRegions.map(d => {\n        allValueLists.push([d.end, d.start]);\n      });\n    }\n\n    return [].concat(...allValueLists);\n  }\n\n  setupComponents() {\n    let componentConfigs = [['yAxis', {\n      mode: this.config.yAxisMode,\n      width: this.width,\n      shortenNumbers: this.config.shortenYAxisNumbers // pos: 'right'\n\n    }, function () {\n      return this.state.yAxis;\n    }.bind(this)], ['xAxis', {\n      mode: this.config.xAxisMode,\n      height: this.height // pos: 'right'\n\n    }, function () {\n      let s = this.state;\n      s.xAxis.calcLabels = getShortenedLabels(this.width, s.xAxis.labels, this.config.xIsSeries);\n      return s.xAxis;\n    }.bind(this)], ['yRegions', {\n      width: this.width,\n      pos: 'right'\n    }, function () {\n      return this.state.yRegions;\n    }.bind(this)]];\n    let barDatasets = this.state.datasets.filter(d => d.chartType === 'bar');\n    let lineDatasets = this.state.datasets.filter(d => d.chartType === 'line');\n    let barsConfigs = barDatasets.map(d => {\n      let index = d.index;\n      return ['barGraph' + '-' + d.index, {\n        index: index,\n        color: this.colors[index],\n        stacked: this.barOptions.stacked,\n        // same for all datasets\n        valuesOverPoints: this.config.valuesOverPoints,\n        minHeight: this.height * MIN_BAR_PERCENT_HEIGHT\n      }, function () {\n        let s = this.state;\n        let d = s.datasets[index];\n        let stacked = this.barOptions.stacked;\n        let spaceRatio = this.barOptions.spaceRatio || BAR_CHART_SPACE_RATIO;\n        let barsWidth = s.unitWidth * (1 - spaceRatio);\n        let barWidth = barsWidth / (stacked ? 1 : barDatasets.length);\n        let xPositions = s.xAxis.positions.map(x => x - barsWidth / 2);\n\n        if (!stacked) {\n          xPositions = xPositions.map(p => p + barWidth * index);\n        }\n\n        let labels = new Array(s.datasetLength).fill('');\n\n        if (this.config.valuesOverPoints) {\n          if (stacked && d.index === s.datasets.length - 1) {\n            labels = d.cumulativeYs;\n          } else {\n            labels = d.values;\n          }\n        }\n\n        let offsets = new Array(s.datasetLength).fill(0);\n\n        if (stacked) {\n          offsets = d.yPositions.map((y, j) => y - d.cumulativeYPos[j]);\n        }\n\n        return {\n          xPositions: xPositions,\n          yPositions: d.yPositions,\n          offsets: offsets,\n          // values: d.values,\n          labels: labels,\n          zeroLine: s.yAxis.zeroLine,\n          barsWidth: barsWidth,\n          barWidth: barWidth\n        };\n      }.bind(this)];\n    });\n    let lineConfigs = lineDatasets.map(d => {\n      let index = d.index;\n      return ['lineGraph' + '-' + d.index, {\n        index: index,\n        color: this.colors[index],\n        svgDefs: this.svgDefs,\n        heatline: this.lineOptions.heatline,\n        regionFill: this.lineOptions.regionFill,\n        spline: this.lineOptions.spline,\n        hideDots: this.lineOptions.hideDots,\n        hideLine: this.lineOptions.hideLine,\n        // same for all datasets\n        valuesOverPoints: this.config.valuesOverPoints\n      }, function () {\n        let s = this.state;\n        let d = s.datasets[index];\n        let minLine = s.yAxis.positions[0] < s.yAxis.zeroLine ? s.yAxis.positions[0] : s.yAxis.zeroLine;\n        return {\n          xPositions: s.xAxis.positions,\n          yPositions: d.yPositions,\n          values: d.values,\n          zeroLine: minLine,\n          radius: this.lineOptions.dotSize || LINE_CHART_DOT_SIZE\n        };\n      }.bind(this)];\n    });\n    let markerConfigs = [['yMarkers', {\n      width: this.width,\n      pos: 'right'\n    }, function () {\n      return this.state.yMarkers;\n    }.bind(this)]];\n    componentConfigs = componentConfigs.concat(barsConfigs, lineConfigs, markerConfigs);\n    let optionals = ['yMarkers', 'yRegions'];\n    this.dataUnitComponents = [];\n    this.components = new Map(componentConfigs.filter(args => !optionals.includes(args[0]) || this.state[args[0]]).map(args => {\n      let component = getComponent(...args);\n\n      if (args[0].includes('lineGraph') || args[0].includes('barGraph')) {\n        this.dataUnitComponents.push(component);\n      }\n\n      return [args[0], component];\n    }));\n  }\n\n  makeDataByIndex() {\n    this.dataByIndex = {};\n    let s = this.state;\n    let formatX = this.config.formatTooltipX;\n    let formatY = this.config.formatTooltipY;\n    let titles = s.xAxis.labels;\n    titles.map((label, index) => {\n      let values = this.state.datasets.map((set, i) => {\n        let value = set.values[index];\n        return {\n          title: set.name,\n          value: value,\n          yPos: set.yPositions[index],\n          color: this.colors[i],\n          formatted: formatY ? formatY(value) : value\n        };\n      });\n      this.dataByIndex[index] = {\n        label: label,\n        formattedLabel: formatX ? formatX(label) : label,\n        xPos: s.xAxis.positions[index],\n        values: values,\n        yExtreme: s.yExtremes[index]\n      };\n    });\n  }\n\n  bindTooltip() {\n    // NOTE: could be in tooltip itself, as it is a given functionality for its parent\n    this.container.addEventListener('mousemove', e => {\n      let m = this.measures;\n      let o = getOffset(this.container);\n      let relX = e.pageX - o.left - getLeftOffset(m);\n      let relY = e.pageY - o.top;\n\n      if (relY < this.height + getTopOffset(m) && relY > getTopOffset(m)) {\n        this.mapTooltipXPosition(relX);\n      } else {\n        this.tip.hideTip();\n      }\n    });\n  }\n\n  mapTooltipXPosition(relX) {\n    let s = this.state;\n    if (!s.yExtremes) return;\n    let index = getClosestInArray(relX, s.xAxis.positions, true);\n    let dbi = this.dataByIndex[index];\n    this.tip.setValues(dbi.xPos + this.tip.offset.x, dbi.yExtreme + this.tip.offset.y, {\n      name: dbi.formattedLabel,\n      value: ''\n    }, dbi.values, index);\n    this.tip.showTip();\n  }\n\n  renderLegend() {\n    let s = this.data;\n\n    if (s.datasets.length > 1) {\n      this.legendArea.textContent = '';\n      s.datasets.map((d, i) => {\n        let barWidth = AXIS_LEGEND_BAR_SIZE; // let rightEndPoint = this.baseWidth - this.measures.margins.left - this.measures.margins.right;\n        // let multiplier = s.datasets.length - i;\n\n        let rect = legendBar( // rightEndPoint - multiplier * barWidth,\t// To right align\n        barWidth * i, '0', barWidth, this.colors[i], d.name, this.config.truncateLegends);\n        this.legendArea.appendChild(rect);\n      });\n    }\n  } // Overlay\n\n\n  makeOverlay() {\n    if (this.init) {\n      this.init = 0;\n      return;\n    }\n\n    if (this.overlayGuides) {\n      this.overlayGuides.forEach(g => {\n        let o = g.overlay;\n        o.parentNode.removeChild(o);\n      });\n    }\n\n    this.overlayGuides = this.dataUnitComponents.map(c => {\n      return {\n        type: c.unitType,\n        overlay: undefined,\n        units: c.units\n      };\n    });\n\n    if (this.state.currentIndex === undefined) {\n      this.state.currentIndex = this.state.datasetLength - 1;\n    } // Render overlays\n\n\n    this.overlayGuides.map(d => {\n      let currentUnit = d.units[this.state.currentIndex];\n      d.overlay = makeOverlay[d.type](currentUnit);\n      this.drawArea.appendChild(d.overlay);\n    });\n  }\n\n  updateOverlayGuides() {\n    if (this.overlayGuides) {\n      this.overlayGuides.forEach(g => {\n        let o = g.overlay;\n        o.parentNode.removeChild(o);\n      });\n    }\n  }\n\n  bindOverlay() {\n    this.parent.addEventListener('data-select', () => {\n      this.updateOverlay();\n    });\n  }\n\n  bindUnits() {\n    this.dataUnitComponents.map(c => {\n      c.units.map(unit => {\n        unit.addEventListener('click', () => {\n          let index = unit.getAttribute('data-point-index');\n          this.setCurrentDataPoint(index);\n        });\n      });\n    }); // Note: Doesn't work as tooltip is absolutely positioned\n\n    this.tip.container.addEventListener('click', () => {\n      let index = this.tip.container.getAttribute('data-point-index');\n      this.setCurrentDataPoint(index);\n    });\n  }\n\n  updateOverlay() {\n    this.overlayGuides.map(d => {\n      let currentUnit = d.units[this.state.currentIndex];\n      updateOverlay[d.type](currentUnit, d.overlay);\n    });\n  }\n\n  onLeftArrow() {\n    this.setCurrentDataPoint(this.state.currentIndex - 1);\n  }\n\n  onRightArrow() {\n    this.setCurrentDataPoint(this.state.currentIndex + 1);\n  }\n\n  getDataPoint(index = this.state.currentIndex) {\n    let s = this.state;\n    let data_point = {\n      index: index,\n      label: s.xAxis.labels[index],\n      values: s.datasets.map(d => d.values[index])\n    };\n    return data_point;\n  }\n\n  setCurrentDataPoint(index) {\n    let s = this.state;\n    index = parseInt(index);\n    if (index < 0) index = 0;\n    if (index >= s.xAxis.labels.length) index = s.xAxis.labels.length - 1;\n    if (index === s.currentIndex) return;\n    s.currentIndex = index;\n    fire(this.parent, \"data-select\", this.getDataPoint());\n  } // API\n\n\n  addDataPoint(label, datasetValues, index = this.state.datasetLength) {\n    super.addDataPoint(label, datasetValues, index);\n    this.data.labels.splice(index, 0, label);\n    this.data.datasets.map((d, i) => {\n      d.values.splice(index, 0, datasetValues[i]);\n    });\n    this.update(this.data);\n  }\n\n  removeDataPoint(index = this.state.datasetLength - 1) {\n    if (this.data.labels.length <= 1) {\n      return;\n    }\n\n    super.removeDataPoint(index);\n    this.data.labels.splice(index, 1);\n    this.data.datasets.map(d => {\n      d.values.splice(index, 1);\n    });\n    this.update(this.data);\n  }\n\n  updateDataset(datasetValues, index = 0) {\n    this.data.datasets[index].values = datasetValues;\n    this.update(this.data);\n  } // addDataset(dataset, index) {}\n  // removeDataset(index = 0) {}\n\n\n  updateDatasets(datasets) {\n    this.data.datasets.map((d, i) => {\n      if (datasets[i]) {\n        d.values = datasets[i];\n      }\n    });\n    this.update(this.data);\n  } // updateDataPoint(dataPoint, index = 0) {}\n  // addDataPoint(dataPoint, index = 0) {}\n  // removeDataPoint(index = 0) {}\n\n\n}\n\nclass DonutChart extends AggregationChart {\n  constructor(parent, args) {\n    super(parent, args);\n    this.type = 'donut';\n    this.initTimeout = 0;\n    this.init = 1;\n    this.setup();\n  }\n\n  configure(args) {\n    super.configure(args);\n    this.mouseMove = this.mouseMove.bind(this);\n    this.mouseLeave = this.mouseLeave.bind(this);\n    this.hoverRadio = args.hoverRadio || 0.1;\n    this.config.startAngle = args.startAngle || 0;\n    this.clockWise = args.clockWise || false;\n    this.strokeWidth = args.strokeWidth || 30;\n  }\n\n  calc() {\n    super.calc();\n    let s = this.state;\n    this.radius = this.height > this.width ? this.center.x - this.strokeWidth / 2 : this.center.y - this.strokeWidth / 2;\n    const {\n      radius,\n      clockWise\n    } = this;\n    const prevSlicesProperties = s.slicesProperties || [];\n    s.sliceStrings = [];\n    s.slicesProperties = [];\n    let curAngle = 180 - this.config.startAngle;\n    s.sliceTotals.map((total, i) => {\n      const startAngle = curAngle;\n      const originDiffAngle = total / s.grandTotal * FULL_ANGLE;\n      const largeArc = originDiffAngle > 180 ? 1 : 0;\n      const diffAngle = clockWise ? -originDiffAngle : originDiffAngle;\n      const endAngle = curAngle = curAngle + diffAngle;\n      const startPosition = getPositionByAngle(startAngle, radius);\n      const endPosition = getPositionByAngle(endAngle, radius);\n      const prevProperty = this.init && prevSlicesProperties[i];\n      let curStart, curEnd;\n\n      if (this.init) {\n        curStart = prevProperty ? prevProperty.startPosition : startPosition;\n        curEnd = prevProperty ? prevProperty.endPosition : startPosition;\n      } else {\n        curStart = startPosition;\n        curEnd = endPosition;\n      }\n\n      const curPath = originDiffAngle === 360 ? makeStrokeCircleStr(curStart, curEnd, this.center, this.radius, this.clockWise, largeArc) : makeArcStrokePathStr(curStart, curEnd, this.center, this.radius, this.clockWise, largeArc);\n      s.sliceStrings.push(curPath);\n      s.slicesProperties.push({\n        startPosition,\n        endPosition,\n        value: total,\n        total: s.grandTotal,\n        startAngle,\n        endAngle,\n        angle: diffAngle\n      });\n    });\n    this.init = 0;\n  }\n\n  setupComponents() {\n    let s = this.state;\n    let componentConfigs = [['donutSlices', {}, function () {\n      return {\n        sliceStrings: s.sliceStrings,\n        colors: this.colors,\n        strokeWidth: this.strokeWidth\n      };\n    }.bind(this)]];\n    this.components = new Map(componentConfigs.map(args => {\n      let component = getComponent(...args);\n      return [args[0], component];\n    }));\n  }\n\n  calTranslateByAngle(property) {\n    const {\n      radius,\n      hoverRadio\n    } = this;\n    const position = getPositionByAngle(property.startAngle + property.angle / 2, radius);\n    return \"translate3d(\".concat(position.x * hoverRadio, \"px,\").concat(position.y * hoverRadio, \"px,0)\");\n  }\n\n  hoverSlice(path, i, flag, e) {\n    if (!path) return;\n    const color = this.colors[i];\n\n    if (flag) {\n      transform(path, this.calTranslateByAngle(this.state.slicesProperties[i]));\n      path.style.stroke = lightenDarkenColor(color, 50);\n      let g_off = getOffset(this.svg);\n      let x = e.pageX - g_off.left + 10;\n      let y = e.pageY - g_off.top - 10;\n      let title = (this.formatted_labels && this.formatted_labels.length > 0 ? this.formatted_labels[i] : this.state.labels[i]) + ': ';\n      let percent = (this.state.sliceTotals[i] * 100 / this.state.grandTotal).toFixed(1);\n      this.tip.setValues(x, y, {\n        name: title,\n        value: percent + \"%\"\n      });\n      this.tip.showTip();\n    } else {\n      transform(path, 'translate3d(0,0,0)');\n      this.tip.hideTip();\n      path.style.stroke = color;\n    }\n  }\n\n  bindTooltip() {\n    this.container.addEventListener('mousemove', this.mouseMove);\n    this.container.addEventListener('mouseleave', this.mouseLeave);\n  }\n\n  mouseMove(e) {\n    const target = e.target;\n    let slices = this.components.get('donutSlices').store;\n    let prevIndex = this.curActiveSliceIndex;\n    let prevAcitve = this.curActiveSlice;\n\n    if (slices.includes(target)) {\n      let i = slices.indexOf(target);\n      this.hoverSlice(prevAcitve, prevIndex, false);\n      this.curActiveSlice = target;\n      this.curActiveSliceIndex = i;\n      this.hoverSlice(target, i, true, e);\n    } else {\n      this.mouseLeave();\n    }\n  }\n\n  mouseLeave() {\n    this.hoverSlice(this.curActiveSlice, this.curActiveSliceIndex, false);\n  }\n\n} // import MultiAxisChart from './charts/MultiAxisChart';\n\n\nconst chartTypes = {\n  bar: AxisChart,\n  line: AxisChart,\n  // multiaxis: MultiAxisChart,\n  percentage: PercentageChart,\n  heatmap: Heatmap,\n  pie: PieChart,\n  donut: DonutChart\n};\n\nfunction getChartByType(chartType = 'line', parent, options) {\n  if (chartType === 'axis-mixed') {\n    options.type = 'line';\n    return new AxisChart(parent, options);\n  }\n\n  if (!chartTypes[chartType]) {\n    console.error(\"Undefined chart type: \" + chartType);\n    return;\n  }\n\n  return new chartTypes[chartType](parent, options);\n}\n\nclass Chart {\n  constructor(parent, options) {\n    return getChartByType(options.type, parent, options);\n  }\n\n}\n\nexport { Chart, PercentageChart, PieChart, Heatmap, AxisChart };","import React, { useRef, useEffect } from 'react'\nimport { Chart } from 'frappe-charts/dist/frappe-charts.esm'\nimport { useEndpoint } from '../request'\nimport 'frappe-charts/dist/frappe-charts.min.css'\n\nconst VoteStats = ({ currentMeeting, voteId }) => {\n  const chartContainer = useRef(null)\n\n  const [data] = useEndpoint({\n    endpoint: `/voting/votes/${voteId}/`,\n  })\n\n  useEffect(() => {\n    if (!chartContainer.current) return\n\n    const chartData = {\n      labels: data ? data.alternatives.map(alt => alt.text) : [],\n      datasets: [\n        {\n          name: 'Some Data',\n          type: 'bar',\n          values: data ? data.alternatives.map(alt => alt.num_votes) : [],\n        },\n      ],\n    }\n\n    const chart = new Chart(chartContainer.current, {\n      title: data ? data.question : [],\n      data: chartData,\n      type: 'pie', // or 'bar', 'line', 'scatter', 'pie', 'percentage'\n      height: 400,\n      colors: ['#20407C', '#E5398D', '#754022', '#70BD44', '#F7E623'],\n    })\n  })\n\n  return <div ref={chartContainer} />\n}\n\nexport default VoteStats\n","import React, { useState, useEffect } from 'react'\n\nimport { FiTrash2, FiCheck, FiBarChart2, FiEdit2 } from 'react-icons/fi'\n\nimport useRestEndpoint from '../request/useRestEndpoint'\nimport useModal, { useCloseModal } from '../modal/useModal'\nimport AddVote from './addVote'\nimport VoteStats from './voteStats'\n\nconst VotePanel = ({ currentMeeting }) => {\n  const [{ list, update, create }, votes] = useRestEndpoint({\n    endpoint: '/voting/votes/',\n  })\n\n  const [openCreateModal] = useModal(AddVote)\n  const [openChartModal] = useModal(VoteStats)\n  const closeModal = useCloseModal()\n\n  // Close modal when a vote is created\n  useEffect(closeModal, [votes])\n\n  useEffect(\n    () => {\n      if (currentMeeting) list({ event_id: currentMeeting.id })\n      // TODO: handle errors\n    },\n    [currentMeeting]\n  )\n\n  if (votes === null) return <></>\n\n  return (\n    <div>\n      <h2>Omröstningar</h2>\n      <button\n        onClick={() =>\n          openCreateModal('Ny omröstning', { currentMeeting, create })\n        }\n        type=\"button\"\n      >\n        Ny omröstning\n      </button>\n      <ul>\n        {votes\n          .filter(vote => vote.meeting === currentMeeting.id)\n          .map(vote => (\n            <li key={vote.id}>\n              {vote.question}\n              {\n                <FiBarChart2\n                  onClick={() =>\n                    openChartModal(`Resultat av \"${vote.question}\"`, {\n                      voteId: vote.id,\n                    })\n                  }\n                />\n              }\n              {\n                <FiEdit2\n                  onClick={() =>\n                    openCreateModal(`Uppdatera \"${vote.question}\"`, {\n                      currentMeeting,\n                      update,\n                      updateData: vote,\n                    })\n                  }\n                />\n              }\n              {vote.open && <FiCheck />}\n            </li>\n          ))}\n      </ul>\n    </div>\n  )\n}\n\nexport default VotePanel\n","import React, { useState, useEffect } from 'react'\n\nimport { FiTrash2 } from 'react-icons/fi'\nimport useRestEndpoint from '../request/useRestEndpoint'\nimport { List, ListButton, ListItem } from '../ui/list'\n\nconst AttendantPanel = ({ currentMeeting }) => {\n  const [input, setInput] = useState('')\n\n  const [{ list, destroy, create }, attendants] = useRestEndpoint({\n    endpoint: '/voting/attendants/',\n  })\n\n  useEffect(\n    () => {\n      if (currentMeeting) list({ meeting_id: currentMeeting.id })\n      // TODO: handle errors\n    },\n    [currentMeeting]\n  )\n\n  if (attendants === null) return <></>\n\n  return (\n    <div>\n      <h2>Deltagare</h2>\n      <form\n        onSubmit={e => {\n          e.preventDefault()\n          setInput('')\n\n          create({\n            user_username: input,\n            meeting_id: currentMeeting.id,\n          })\n        }}\n      >\n        <input value={input} onChange={e => setInput(e.target.value)} />\n      </form>\n      <p>Röstlängd: {attendants.length}</p>\n      <List>\n        {attendants.map(attendant => (\n          <ListItem\n            title={attendant.user.pretty_name}\n            key={attendant.id}\n            buttons={[\n              <ListButton\n                onClick={() =>\n                  destroy(attendant.id, { meeting_id: currentMeeting.id })\n                }\n                iconComponent={FiTrash2}\n                text=\"Ta bort deltagare\"\n                key=\"remove\"\n              />,\n            ]}\n          />\n        ))}\n      </List>\n    </div>\n  )\n}\n\nexport default AttendantPanel\n","import React, { useState } from 'react'\nimport MeetingPanel from './meetingPanel'\n\nimport style from '../../scss/checkin.module.scss'\nimport { useEndpoint } from '../request'\nimport DoorkeeperPanel from '../checkin/doorkeeperPanel'\nimport VotePanel from './votePanel'\nimport AttendantPanel from './attendantPanel'\nimport { GridContainer, GridItem } from '../ui/grid'\n\nconst VotingAdmin = () => {\n  const [currentMeeting, setCurrentMeeting] = useState(null)\n\n  return (\n    <GridContainer>\n      <GridItem>\n        <MeetingPanel\n          currentMeeting={currentMeeting}\n          setCurrentMeeting={setCurrentMeeting}\n        />\n      </GridItem>\n      <GridItem>\n        <VotePanel currentMeeting={currentMeeting} />\n      </GridItem>\n      <GridItem>\n        <AttendantPanel currentMeeting={currentMeeting} />\n      </GridItem>\n      <GridItem>\n        <DoorkeeperPanel event={currentMeeting} />\n      </GridItem>\n    </GridContainer>\n  )\n}\n\nexport default VotingAdmin\n","import React from 'react'\nimport VotingAdmin from '.'\n\nconst VotingAdminPage = () => <VotingAdmin />\n\nexport default VotingAdminPage\n","import { useContext, useState, useEffect } from 'react'\n\nimport { LoadingContext } from '../layout/layout'\nimport request from '.'\n\nconst objHasProperty = (...args) =>\n  Object.prototype.hasOwnProperty.call(...args)\n\nconst appendPK = (config, pk) => {\n  let rv = { ...config }\n\n  ;['endpoint', 'url'].forEach(key => {\n    if (objHasProperty(rv, key)) rv = { ...rv, [key]: `${rv[key]}${pk}/` }\n  })\n\n  return rv\n}\n\nexport default config => {\n  const setLoading = useContext(LoadingContext)[1]\n  const [data, setData] = useState(null)\n  const [error, setError] = useState(null)\n\n  const list = (params = {}) => {\n    setLoading(true)\n    return request({\n      ...config,\n      params: {\n        ...(objHasProperty(config, 'params') ? config.params : {}),\n        ...params,\n      },\n      method: 'get',\n    })\n      .then(res => {\n        setError(null)\n        setData(res.data)\n        setLoading(false)\n        return Promise.resolve(res)\n      })\n      .catch(err => {\n        setError(err)\n        setLoading(false)\n        return Promise.reject(err)\n      })\n  }\n\n  const create = (body = {}) => {\n    setLoading(true)\n    return request({ ...config, data: body, method: 'post' })\n      .then(res => {\n        setError(null)\n        setData(prevData => [...prevData, res.data])\n        setLoading(false)\n        return Promise.resolve(res)\n      })\n      .catch(err => {\n        setError(err)\n        setLoading(false)\n        return Promise.reject(err)\n      })\n  }\n\n  const update = (pk, body = {}) => {\n    setLoading(true)\n    return request({ ...appendPK(config, pk), data: body, method: 'put' })\n      .then(res => {\n        setError(null)\n        setData(prevData => [\n          ...prevData.filter(obj => obj.id !== pk),\n          res.data,\n        ])\n        setLoading(false)\n        return Promise.resolve(res)\n      })\n      .catch(err => {\n        setError(err)\n        setLoading(false)\n        return Promise.reject(err)\n      })\n  }\n\n  const retrieve = (pk, params = {}) => {\n    setLoading(true)\n    return request({\n      ...appendPK(config, pk),\n      params: {\n        ...(objHasProperty(config, 'params') ? config.params : {}),\n        ...params,\n      },\n      method: 'get',\n    })\n      .then(res => {\n        setError(null)\n        setData(prevData => [\n          ...prevData.filter(obj => obj.id !== pk),\n          res.data,\n        ])\n        setLoading(false)\n        return Promise.resolve(res)\n      })\n      .catch(err => {\n        setError(err)\n        setLoading(false)\n        return Promise.reject(err)\n      })\n  }\n\n  const destroy = (pk, body = {}) => {\n    setLoading(true)\n\n    return request({ ...appendPK(config, pk), data: body, method: 'delete' })\n      .then(res => {\n        setError(null)\n        setData(prevData => prevData.filter(obj => obj.id !== pk))\n        setLoading(false)\n        return Promise.resolve(res)\n      })\n      .catch(err => {\n        setError(err)\n        setLoading(false)\n        return Promise.reject(err)\n      })\n  }\n\n  return [{ list, retrieve, update, create, destroy }, data, error]\n}\n","import React from 'react'\n\nimport style from '../../scss/ui.module.scss'\n\nconst List = ({ children }) => <ul className={style.list}>{children}</ul>\n\nconst ListItem = ({ title, subtitle, buttons }) => (\n  <li>\n    <div className={style.listText}>\n      <h3>{title}</h3>\n      <p>{subtitle}</p>\n    </div>\n    <div className={style.listButtons}>{buttons}</div>\n  </li>\n)\n\nconst ListButton = ({ onClick, iconComponent: Icon, text, shown }) =>\n  shown ? (\n    <button type=\"button\" onClick={onClick} title={text}>\n      <Icon />\n    </button>\n  ) : (\n    <></>\n  )\n\nListButton.defaultProps = {\n  shown: true,\n}\n\nexport { List, ListItem, ListButton }\n","import React, { useState, useEffect } from 'react'\n\nimport { FiTrash2 } from 'react-icons/fi'\nimport useRestEndpoint from '../request/useRestEndpoint'\nimport { List, ListItem, ListButton } from '../ui/list'\n\nconst DoorkeeperPanel = ({ event }) => {\n  const [input, setInput] = useState('')\n\n  const [{ list, destroy, create }, doorkeepers] = useRestEndpoint({\n    endpoint: '/checkin/doorkeepers/',\n  })\n\n  useEffect(\n    () => {\n      if (event) list({ event_id: event.id })\n      // TODO: handle errors\n    },\n    [event]\n  )\n\n  if (doorkeepers === null) return <></>\n\n  return (\n    <div>\n      <h2>Dörrvakter</h2>\n      <form\n        onSubmit={e => {\n          e.preventDefault()\n          setInput('')\n\n          create({\n            user_username: input,\n            event_id: event.id,\n          })\n        }}\n      >\n        <input value={input} onChange={e => setInput(e.target.value)} />\n      </form>\n      <List>\n        {doorkeepers.map(doorkeeper => (\n          <ListItem\n            title={doorkeeper.user.pretty_name}\n            key={doorkeeper.id}\n            buttons={[\n              <ListButton\n                onClick={() => destroy(doorkeeper.id)}\n                iconComponent={FiTrash2}\n                text=\"Ta bort dörrvakt\"\n                key=\"remove\"\n              />,\n            ]}\n          />\n        ))}\n      </List>\n    </div>\n  )\n}\n\nexport default DoorkeeperPanel\n"],"sourceRoot":""}