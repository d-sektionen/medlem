"use strict";(self.webpackChunkmedlem=self.webpackChunkmedlem||[]).push([[543],{8803:function(e,t,n){var l=n(5785),a=n(7294),r=n(2777),c=n(3541),i=n(2132),u=n(8043);t.Z=e=>{let{event:t}=e;const{0:n,1:o}=(0,a.useState)(""),{data:m,mutate:s}=(0,i.ZP)("/checkin/doorkeepers/?event_id="+t.id);return a.createElement("div",null,a.createElement("h2",null,"Dörrvakter"),a.createElement("form",{onSubmit:e=>{e.preventDefault(),o(""),(async e=>{const{data:t}=await(0,u.v_)("/checkin/doorkeepers/",e);s([].concat((0,l.Z)(m),[t]))})({user_username:n,event_id:t.id})}},a.createElement("input",{value:n,placeholder:"LiU-ID",onChange:e=>o(e.target.value)})),a.createElement(c.aV,null,m&&m.map((e=>a.createElement(c.HC,{title:e.user.pretty_name,key:e.id,buttons:[a.createElement(c.zj,{onClick:()=>(async e=>{await(0,u.IV)("/checkin/doorkeepers/"+e+"/"),s(m.filter((t=>t.id!==e)))})(e.id),iconComponent:r.Ybf,text:"Ta bort dörrvakt",key:"remove"})]})))))}},3541:function(e,t,n){n.d(t,{HC:function(){return c},aV:function(){return r},zj:function(){return i}});var l=n(7294),a=n(4608);const r=e=>{let{children:t}=e;return l.createElement("ul",{className:a.pb},t)},c=e=>{let{title:t,subtitle:n,buttons:r,color:c}=e;return l.createElement("li",{className:c?a.K:"",style:{borderColor:c}},l.createElement("div",{className:a.l_},l.createElement("h3",null,t),l.createElement("p",null,n)),l.createElement("div",{className:a.jk},r))};c.defaultProps={color:null};const i=e=>{let{href:t,onClick:n,iconComponent:r,text:c,shown:i}=e;return i?l.createElement(l.Fragment,null,t?l.createElement("a",{className:a.fq,href:t,onClick:n,title:c},l.createElement(r,null)):l.createElement("button",{className:a.fq,type:"button",onClick:n,title:c},l.createElement(r,null))):l.createElement(l.Fragment,null)};i.defaultProps={shown:!0}},7333:function(e,t,n){var l=n(5785),a=n(7294),r=n(4608),c=n(7580);const i=e=>{let{title:t,choices:n,categorizedChoices:i,choice:u,setChoice:o,label:m,action:s,actionLabel:d,noChoicesLabel:E,onChange:v}=e;const h=[].concat((0,l.Z)(n||[]),(0,l.Z)(Object.keys(i).reduce(((e,t)=>[].concat((0,l.Z)(e),(0,l.Z)(i[t]))),[])));return a.createElement("div",{className:r.KW},a.createElement("h1",null,t),a.createElement("div",{className:r.Nw},h.length?a.createElement("div",{className:r.Nu},a.createElement("select",{onChange:e=>{const t=e.target.value,n=""===t?null:h.filter((e=>""+e.id===t))[0];o(n),v(e)},value:u?u.id:""},a.createElement("option",{hidden:!0,value:""}),n.sort().map((e=>a.createElement("option",{value:e.id,key:e.id},e[m]))),Object.keys(i).sort().map((e=>a.createElement("optgroup",{label:e,key:e},i[e].sort().map((e=>a.createElement("option",{value:e.id,key:e.id},e[m]))))))),null===u&&a.createElement("div",{className:r.$f},"Välj ett objekt")):a.createElement("span",null,E),s&&a.createElement(c.zx,{onClick:s},d)))};i.defaultProps={categorizedChoices:{},choices:[],action:null,actionLabel:"",choice:null,noChoicesLabel:"",setChoice:()=>{},label:"",onChange:()=>{}},t.Z=i},2978:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var l=n(5785),a=n(7294),r=n(2132),c=(n(7580),n(8043));var i=e=>{let{currentMeeting:t,updatePatch:n}=e;return a.createElement("div",null,a.createElement("h2",null,"Mötesinfo"),a.createElement("h3",null,t.name),t.description&&a.createElement("p",{style:{whiteSpace:"pre-line"}},t.description),a.createElement("h3",null,"Detaljer"),a.createElement("ul",null,a.createElement("li",null,t.enable_speaker_requests?"Talarlista aktiverad":"Talarlista inaktiverad"),a.createElement("li",null,t.open_attendance?"Öppen incheckning":"Stängd incheckning"),a.createElement("li",null,"Mötesdata rensas: "+t.clear_data)))},u=(n(8803),n(2777)),o=n(8829);var m=e=>{let{currentMeeting:t,voteId:n}=e;const{data:l}=(0,r.ZP)((()=>n&&"/voting/admin-votes/"+n+"/")),c=(l?l.alternatives.map((e=>e.num_votes)):[]).reduce(((e,t)=>e+t),0);return a.createElement("div",null,a.createElement("ul",null,l&&l.alternatives.map((e=>a.createElement("li",{key:e.text},e.text+": "+e.num_votes,c?" ("+(e.num_votes?Math.round(1e3*e.num_votes/c)/10:0)+"%)":"")))),a.createElement("p",null,"Summa: ",c))},s=n(3541);var d=e=>{let{currentMeeting:t}=e;const{data:n,mutate:l}=(0,r.ZP)("/voting/admin-votes/?event_id="+t.id),[c]=(0,o.Z)(m),i=(0,o._)();return(0,a.useEffect)(i,[n]),a.createElement("div",null,a.createElement("h2",null,"Omröstningar"),a.createElement(s.aV,null,n&&n.filter((e=>e.meeting===t.id)).map((e=>a.createElement(s.HC,{title:e.question,subtitle:e.open?"Active":void 0,key:e.id,buttons:[a.createElement(s.zj,{onClick:()=>c('Resultat av "'+e.question+'"',{voteId:e.id}),iconComponent:u.orK,text:"Resultat",key:"results"})]})))))};var E=e=>{let{currentMeeting:t}=e;const{0:n,1:l}=(0,a.useState)(""),{data:c,mutate:i}=(0,r.ZP)((()=>"/voting/attendants/?meeting_id="+t.id),{refreshInterval:4e3});return null===c?a.createElement(a.Fragment,null):a.createElement("div",null,a.createElement("h2",null,"Deltagare"),a.createElement("div",null,a.createElement("p",null,"Röstlängd: "+(c?(e=>e.filter((e=>e.has_voting_rights)))(c).length:0))))},v=n(1288);n(2525);var h=n(7333),p=n(746);var g=e=>{let{pageContext:{title:t}}=e;const{0:n,1:u}=(0,a.useState)(null),{data:m,mutate:s}=(0,r.ZP)("/voting/admin-meetings/"),g=((0,o._)(),m?(0,l.Z)(m).reverse():null);return(0,a.useEffect)((()=>{n&&u(g.find((e=>e.id===n.id)))}),[g]),a.createElement(p.Z,null,a.createElement(v.T,null,a.createElement(v.P,{fullWidth:!0},a.createElement(h.Z,{title:t,choice:n,setChoice:u,choices:g,label:"name",noChoicesLabel:"Det finns inga möten just nu."})),n&&a.createElement(a.Fragment,null,a.createElement(v.P,null,a.createElement(i,{currentMeeting:n,updatePatch:async e=>{const{data:t}=await(0,c.r$)("/voting/admin-meetings/"+n.id+"/",e);s([].concat((0,l.Z)(m.filter((e=>e.id!==n.id))),[t]))}})),a.createElement(v.P,null,a.createElement(d,{currentMeeting:n})),a.createElement(v.P,null,a.createElement(E,{currentMeeting:n})))))}}}]);
//# sourceMappingURL=component---src-components-voting-counter-page-js-ff76524b3c6778611757.js.map