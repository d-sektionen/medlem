(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{198:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(19),l=t(7),i=t.n(l),u=t(2),c=t.n(u),m=t(59),o=t(193),d=t.n(o),h=function(e){function a(a){var t;return t=e.call(this,a)||this,a.user.profile||(a.user.profile={}),t.state={liuCardId:a.user.profile.liu_card_id,firstName:a.user.first_name,lastName:a.user.last_name,errors:{}},t.handleChange=t.handleChange.bind(i()(t)),t.handleSubmit=t.handleSubmit.bind(i()(t)),t}c()(a,e);var t=a.prototype;return t.handleChange=function(e,a){this.setState({[e]:a.target.value})},t.handleSubmit=function(e){var a=this,t=this.props,n=t.setLoading,r=t.setUser;this.setState({error:void 0,success:void 0,errors:{}}),n(!0),Object(m.d)("/account/user/me/",{first_name:this.state.firstName,last_name:this.state.lastName,profile:{liu_card_id:this.state.liuCardId}}).then(function(e){n(!1),e.status<300&&(a.setState({success:"Ändringarna har sparats."}),r(e.data))}).catch(function(e){console.log(e),n(!1),e.response?400===e.response.status?a.setState({errors:e.response.data}):a.setState({error:"Något gick fel."}):a.setState({error:"Nätverksfel."})}),e.preventDefault()},t.render=function(){var e=this,a=this.props.user,t=this.state,n=t.firstName,s=t.lastName,l=t.liuCardId,i=t.errors,u=t.error,c=t.success;return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",null,0!==a.sections.length?"Du är medlem i "+a.sections.map(function(e){return e.name}).join(", ")+".":"Du saknar sektionsmedlemsskap."),r.a.createElement("div",null,r.a.createElement("label",{className:d.a.inputLabel},"Förnamn:",r.a.createElement("input",{value:n,onChange:function(a){return e.handleChange("firstName",a)}})),i.first_name&&r.a.createElement("div",{className:d.a.error},i.first_name)),r.a.createElement("div",null,r.a.createElement("label",{className:d.a.inputLabel},"Efternamn:",r.a.createElement("input",{value:s,onChange:function(a){return e.handleChange("lastName",a)}})),i.last_name&&r.a.createElement("div",{className:d.a.error},i.last_name)),r.a.createElement("div",null,r.a.createElement("label",{className:d.a.inputLabel},"LiU-kortnummer:",r.a.createElement("input",{value:l,onChange:function(a){return e.handleChange("liuCardId",a)}})),i.profile&&i.profile.liu_card_id&&r.a.createElement("div",{className:d.a.error},i.profile.liu_card_id)),r.a.createElement("div",null,r.a.createElement("input",{type:"submit",value:"Spara",className:d.a.submit+" button"})),r.a.createElement("div",null,u&&r.a.createElement("div",{className:d.a.error},u),c&&r.a.createElement("div",{className:d.a.success},c)))},a}(n.Component),f=t(42);a.default=function(){return r.a.createElement(s.a.Consumer,null,function(e){return r.a.createElement(s.b.Consumer,null,function(a){var t=a.user,n=a.set;return r.a.createElement(f.a,null,r.a.createElement(h,{user:t,setUser:n,setLoading:e.set}))})})}}}]);
//# sourceMappingURL=component---src-pages-preferences-js-1a7d54971da4404ab9be.js.map