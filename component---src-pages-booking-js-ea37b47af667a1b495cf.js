(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{201:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(21),r=(n(22),n(205),n(203),n(1)),c=n.n(r),l=n(64),m=n(192),s=n.n(m),u=n(215),d=n(12),g=n(204),b=n.n(g);n(211),n(194);b.a.locale("sv");var E=function(e){return e.toLocaleDateString("sv-SE",{month:"short",day:"numeric",hour:"numeric",minute:"numeric"})},f=function(e){var t,n,i=e.booking,r=e.showItem,c=e.item,m=null==i,g=Object(a.useState)(!1),f=g[0],k=g[1],p=Object(a.useState)(m),v=p[0],h=p[1],y=Object(a.useState)(i?i.description:""),w=y[0],C=y[1],D=Object(a.useState)(i?i.start:new Date),S=D[0],j=D[1],M=Object(a.useState)(i?i.end:new Date),N=M[0],O=M[1];return o.a.createElement("li",null,o.a.createElement("div",{className:s.a.bookingHeader,onClick:function(){return k(!f)}},m?"Ny bokning":o.a.createElement(o.a.Fragment,null,o.a.createElement("strong",null,(t=i.user," "===(n=[t.first_name,t.last_name].join(" "))?t.username:n)),r&&", "+i.item_obj.name,", "+b()(S).fromNow()),o.a.createElement(d.a,{className:f?s.a.flip:void 0})),f&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:s.a.bookingBody},m&&v&&o.a.createElement("p",null,c?"Bokning av "+c.name+".":"VÃ¤lj vad som ska bokas i menyn ovan."),o.a.createElement("div",null,v?o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,{className:s.a.datePicker,selectsStart:!0,selected:S,startDate:S,endDate:N,onChange:function(e){return j(e)},minDate:new Date,maxDate:N,showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,dateFormat:"MMMM d, yyyy h:mm aa",timeCaption:"time"}),o.a.createElement(u.a,{className:s.a.datePicker,selectsEnd:!0,selected:N,startDate:S,endDate:N,onChange:function(e){return O(e)},minDate:S,showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,dateFormat:"MMMM d, yyyy h:mm aa",timeCaption:"time"})):E(S)+" - "+E(N)),o.a.createElement("p",null,v?o.a.createElement("textarea",{value:w,onChange:function(e){return C(e.target.value)}}):w)),o.a.createElement("div",{className:s.a.bookingButtons},!v&&o.a.createElement("button",{onClick:function(){return h(!0)}},"Edit"),!v&&o.a.createElement("button",{onClick:function(){Object(l.b)("/booking/bookings/"+i.id+"/").then(function(e){console.log(e.data)}).catch(function(e){console.log(e.response.data)})}},"Delete"),v&&o.a.createElement("button",{onClick:function(){return m?k(!1):h(!1)}},"Cancel"),v&&o.a.createElement("button",{onClick:function(){(m?Object(l.e)("/booking/bookings/",{item:c.id,description:w,start:S,end:N}):Object(l.f)("/booking/bookings/"+i.id+"/",{item:i.item,description:w,start:S,end:N})).then(function(e){console.log(e.data)}).catch(function(e){console.log(e.response.data)})}},"Save"))))},k=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={item:"",onlyMine:!1},n}return c()(t,e),t.prototype.render=function(){var e=this,t=(this.props.setLoading,this.state),n=t.item,a=t.onlyMine;return o.a.createElement("div",{className:s.a.root},o.a.createElement(l.a,{endpoint:"/booking/items/"},function(t){return o.a.createElement(o.a.Fragment,null,o.a.createElement("select",{className:s.a.items,onChange:function(n){e.setState({item:t.filter(function(e){return e.id==n.target.value})[0]})},value:n?n.id:""},o.a.createElement("option",{value:""},"Alla"),t.map(function(e){return o.a.createElement("option",{key:e.id,value:e.id},e.name)})))}),o.a.createElement("p",null,o.a.createElement("label",null,o.a.createElement("input",{type:"checkbox",onClick:function(t){e.setState({onlyMine:t.target.checked})},value:a})," ","Visa endast mina bokningar.")),o.a.createElement(l.a,{endpoint:"/booking/bookings/?item="+(n?n.id:"")+"&future"+(a?"&user=me":"")},function(e){return o.a.createElement("ul",{className:s.a.bookings},o.a.createElement(f,{item:n}),e.map(function(e){return Object.assign({},e,{start:new Date(e.start),end:new Date(e.end)})}).sort(function(e,t){return e.start-t.start}).map(function(e){return o.a.createElement(f,{booking:e,showItem:void 0===n,key:e.id})}))}))},t}(a.Component);t.default=function(){return o.a.createElement(i.a.Consumer,null,function(e){return o.a.createElement(k,{setLoading:e.set})})}}}]);
//# sourceMappingURL=component---src-pages-booking-js-ea37b47af667a1b495cf.js.map