{"version":3,"sources":["webpack:///./src/components/membershipPanel.js","webpack:///./src/components/homePage.js"],"names":["MembershipPanel","initiallyLoaded","setInitiallyLoaded","useState","sent","setSent","startingYear","setStartingYear","program","setProgram","firstName","setFirstName","lastName","setLastName","message","setMessage","errors","setErrors","useEffect","get","then","catch","err","response","status","data","onSubmit","e","preventDefault","post","first_name","last_name","starting_year","className","style","inputLabel","value","onChange","target","join","type","parseInt","onClick","window","confirm","del","detail","IndexPage","useEndpoint","url","user","useContext","UserContext","greeting","membership","href","map","key","id","link","title","rendered"],"mappings":"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","file":"component---src-components-home-page-js-7cb9f295b5fe0dae40ad.js","sourcesContent":["import React, { useState, useEffect } from 'react'\n\nimport { get, post, del } from './request'\nimport { Button } from './ui/buttons'\n\nimport style from '../scss/membership.module.scss'\n\nconst MembershipPanel = () => {\n  const [initiallyLoaded, setInitiallyLoaded] = useState(true)\n  const [sent, setSent] = useState(false)\n  const [startingYear, setStartingYear] = useState(2019)\n  const [program, setProgram] = useState('Empty')\n  const [firstName, setFirstName] = useState('')\n  const [lastName, setLastName] = useState('')\n  const [message, setMessage] = useState('')\n  const [errors, setErrors] = useState('')\n\n  useEffect(() => {\n    get('/membership/request/')\n      .then(() => {\n        setSent(true)\n        setErrors(null)\n        setInitiallyLoaded(true)\n      })\n      .catch(err => {\n        setInitiallyLoaded(true)\n        if (err.response && err.response.status === 404) {\n          setSent(false)\n          setErrors(null)\n        } else if (err.response && err.response.data) {\n          setErrors(err.response.data)\n        }\n      })\n  }, [])\n\n  const submitRequest = e => {\n    e.preventDefault()\n\n    post('/membership/request/', {\n      first_name: firstName,\n      last_name: lastName,\n      program,\n      starting_year: startingYear,\n      message,\n    })\n      .then(() => {\n        setErrors(null)\n        setSent(true)\n      })\n      .catch(err => {\n        if (err.response && err.response.data) {\n          setErrors(err.response.data)\n        }\n      })\n  }\n\n  const removeRequest = () => {\n    if (\n      window.confirm(\n        'Är du säker på att du vill återkalla din medlemsförfrågan?'\n      )\n    )\n      del('/membership/request/')\n        .then(() => {\n          setSent(false)\n          setErrors(null)\n        })\n        .catch(err => {\n          if (err.response && err.response.data) {\n            setErrors(err.response.data)\n          }\n        })\n  }\n\n  return (\n    <>\n      <h2>Bli medlem</h2>\n      {initiallyLoaded && !sent && (\n        <>\n          <p>\n            Nu drar din tid tillsammans med oss i D-sektionen igång, och ett\n            utmärkt sätt att få ut det mesta av din universitetstid är att bli\n            medlem i sektionen.\n          </p>\n          <p>\n            Att bli medlem i D-sektionen ger med sig en massa fördelar. Först\n            och främst ger det dig möjlighet att delta under alla roliga\n            evenemang vi anordnar under läsåren. Du har också möjlighet att\n            använda de webbtjänster vi erbjuder på vår hemsida, samt om du vill\n            kunna gå på och påverka under våra sektionsmöten där beslut tas\n            kring sektionens framtida verksamhet.\n          </p>\n          <p>\n            Ett medlemskap i D-sektionen är helt gratis. Vi finansieras via\n            sponsoravtal, bidrag från studentkåren LinTek och universitetet,\n            samt betalningar under enskilda event. För att bli medlem i\n            D-sektionen registrerar du dig via följande formulär:\n          </p>\n\n          <form onSubmit={submitRequest}>\n            <label className={style.inputLabel}>\n              Förnamn\n              <input\n                value={firstName}\n                onChange={e => setFirstName(e.target.value)}\n              />\n              {errors && errors.first_name && errors.first_name.join(', ')}\n            </label>\n            <label className={style.inputLabel}>\n              Efternamn\n              <input\n                value={lastName}\n                onChange={e => setLastName(e.target.value)}\n              />\n              {errors && errors.last_name && errors.last_name.join(', ')}\n            </label>\n            <label className={style.inputLabel}>\n              Program\n              <select\n                value={program}\n                onChange={e => setProgram(e.target.value)}\n              >\n                <option value=\"Empty\" />\n                <option value=\"D\">Datateknik (D)</option>\n                <option value=\"U\">Mjukvaruteknik (U)</option>\n                <option value=\"IT\">Informationsteknologi (IT)</option>\n                <option value=\"IP\">Innovativ Programmering (IP)</option>\n                <option value=\"CS\">Masterprogram (CS)</option>\n              </select>\n              {errors && errors.program && errors.program.join(', ')}\n            </label>\n            <label className={style.inputLabel}>\n              Startår\n              <input\n                type=\"number\"\n                value={startingYear}\n                onChange={e => setStartingYear(parseInt(e.target.value, 10))}\n              />\n              {errors &&\n                errors.starting_year &&\n                errors.starting_year.join(', ')}\n            </label>\n            <label className={style.inputLabel}>\n              Övrig information (kan lämnas tom)\n              <textarea\n                value={message}\n                onChange={e => setMessage(e.target.value)}\n              />\n              {errors && errors.message && errors.message.join(', ')}\n            </label>\n            <Button type=\"submit\">Skicka förfrågan</Button>\n          </form>\n        </>\n      )}\n      {initiallyLoaded && sent && (\n        <>\n          <p>\n            Tack för din medlemsförfrågan, den kommer behandlas så snart som\n            möjligt.\n          </p>\n          <Button onClick={removeRequest}>Återkalla medlemsförfrågan</Button>\n        </>\n      )}\n      {errors && errors.detail}\n    </>\n  )\n}\n\nexport default MembershipPanel\n","import React, { useContext } from 'react'\nimport { UserContext } from './layout/layout'\nimport { useEndpoint } from './request'\nimport BigPixels from './layout/bigPixels'\nimport { GridContainer, GridItem } from './ui/grid'\nimport MembershipPanel from './membershipPanel'\n\nconst IndexPage = () => {\n  const [data] = useEndpoint({\n    url: 'https://d-sektionen.se/wp-json/wp/v2/posts',\n  })\n  const [user] = useContext(UserContext)\n\n  const greeting = user.first_name ? `Hej ${user.first_name}!` : 'Hej!'\n\n  return (\n    <BigPixels>\n      <GridContainer>\n        {!user.membership && (\n          <GridItem>\n            <MembershipPanel />\n          </GridItem>\n        )}\n        <GridItem>\n          <h1>{greeting}</h1>\n          <p>\n            Välkommen till D-sektionens medlemssida. I sidomenyn finns våra\n            tjänster för medlemmar.\n          </p>\n          <h2>\n            {'Senaste nytt från '}\n            <a href=\"https://d-sektionen.se\">d-sektionen.se</a>\n          </h2>\n          <ul>\n            {data &&\n              data.map(post => (\n                <li key={post.id}>\n                  <a href={post.link}>{post.title.rendered}</a>\n                </li>\n              ))}\n          </ul>\n        </GridItem>\n      </GridContainer>\n    </BigPixels>\n  )\n}\n\nexport default IndexPage\n"],"sourceRoot":""}