{"version":3,"sources":["webpack:///./src/components/form/dateTimePicker.js","webpack:///./src/components/booking/editBooking.js","webpack:///./src/components/booking/viewBooking.js","webpack:///./src/components/booking/bookingCalendar.js","webpack:///./src/components/booking/itemPanel.js","webpack:///./src/components/booking/bookingPanel.js","webpack:///./src/components/booking/index.js","webpack:///./src/components/booking/page.js","webpack:///./src/components/request/useRestEndpoint.js","webpack:///./src/components/ui/list.js"],"names":["DateTimePicker","_ref","value","onChange","react_default","a","createElement","type","format","e","timeString","target","year","parseInt","slice","month","date","newValue","moment","set","hour","minute","Number","isNaN","newNiceDate","hourOffset","Date","setHours","getHours","Math","round","getMinutes","setMinutes","EditBooking","booking","item","createBooking","updateBooking","newBooking","undefined","user","useContext","UserContext","_useState","useState","description","setDescription","_useState2","start","setStart","_useState3","end","setEnd","_useState4","errors","setErrors","name","pretty_name","Fragment","dateTimePicker","className","style","non_field_errors","buttons","onClick","item_id","id","then","res","console","log","data","catch","err","response","locale","formatDate","toLocaleDateString","day","ViewBooking","to","splitDateRangeByDay","dayCount","startOfStartDay","startOf","startDayOffset","duration","diff","rangeDuration","add","days","getDateRangeDayCount","array","i","endOf","calculateX","weekday","calculateY","startOfDay","asHours","BookingCalendar","itemId","bookings","useEndpoint","endpoint","openViewBooking","useModal","week","setWeek","now","oldWeek","version","viewBox","xmlns","filter","_ref2","startWeek","endWeek","map","dayParts","key","_ref3","s","_ref4","x","y","width","height","stroke","Object","assign","timeIndicators","x1","y1","x2","y2","nowMarker","ItemPanel","setItem","items","openModal","selectedValue","bookingCalendar","BookingPanel","listBookings","destroyBooking","onlyMine","setOnlyMine","openEditBooking","useEffect","future","checked","ui_list","b","sort","title","subtitle","calendar","shown","username","privileges","booking_admin","iconComponent","FiTrash2","text","FiEdit","FiInfo","Booking","_useRestEndpoint","useRestEndpoint","_useRestEndpoint$","list","create","destroy","update","bigPixels","grid","itemPanel","bookingPanel","BookingPage","components_booking","objHasProperty","_Object$prototype$has","prototype","hasOwnProperty","call","apply","arguments","appendPK","config","pk","rv","forEach","[object Object]","__webpack_exports__","setLoading","LoadingContext","setData","error","setError","params","request","method","Promise","resolve","reject","retrieve","prevData","concat","obj","body","__webpack_require__","d","List","ListItem","ListButton","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_scss_ui_module_scss__WEBPACK_IMPORTED_MODULE_1__","_scss_ui_module_scss__WEBPACK_IMPORTED_MODULE_1___default","children","listText","listButtons","Icon","defaultProps"],"mappings":"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","file":"component---src-components-booking-page-js-8a7cb7079ad995c9f552.js","sourcesContent":["import React, { useState } from 'react'\nimport moment from 'moment'\nimport 'moment/locale/sv'\n\nconst DateTimePicker = ({ value, onChange }) => {\n  return (\n    <div>\n      <input\n        type=\"date\"\n        value={value.format('YYYY-MM-DD')}\n        onChange={e => {\n          const timeString = e.target.value\n          const year = parseInt(timeString.slice(0, 4), 10)\n          const month = parseInt(timeString.slice(5, 7), 10) - 1\n          const date = parseInt(timeString.slice(8, 10), 10)\n          if (date && month && year) {\n            const newValue = moment(value).set({ year, month, date })\n            onChange(newValue)\n          }\n        }}\n      />\n      <input\n        type=\"time\"\n        value={value.format('HH:mm')}\n        onChange={e => {\n          const timeString = e.target.value\n          const hour = parseInt(timeString.slice(0, 2), 10)\n          const minute = parseInt(timeString.slice(3, 5), 10)\n          if (!Number.isNaN(hour) && !Number.isNaN(minute)) {\n            const newValue = moment(value).set({ hour, minute })\n            onChange(newValue)\n          }\n        }}\n      />\n    </div>\n  )\n}\n\nexport default DateTimePicker\n","import React, { useState, useContext } from 'react'\n\nimport moment from 'moment'\nimport 'moment/locale/sv'\n\nimport { Button } from '../ui/buttons'\nimport DateTimePicker from '../form/dateTimePicker'\nimport { UserContext } from '../layout/layout'\n\nimport style from '../../scss/booking.module.scss'\n\nfunction newNiceDate(hourOffset = 0) {\n  const date = new Date()\n  date.setHours(\n    date.getHours() + 2 + hourOffset + Math.round(date.getMinutes() / 60)\n  )\n  date.setMinutes(0)\n\n  return date\n}\n\nconst EditBooking = ({ booking, item, createBooking, updateBooking }) => {\n  const newBooking = booking === undefined\n\n  const [user] = useContext(UserContext)\n\n  const [description, setDescription] = useState(\n    booking ? booking.description : ''\n  )\n  const [start, setStart] = useState(booking ? booking.start : newNiceDate())\n  const [end, setEnd] = useState(booking ? booking.end : newNiceDate(2))\n\n  const [errors, setErrors] = useState({})\n\n  const name = booking ? booking.user.pretty_name : user.pretty_name\n\n  const saveBooking = () => {\n    const request = newBooking\n      ? createBooking({\n          item_id: item.id,\n          description,\n          start,\n          end,\n        })\n      : updateBooking(booking.id, {\n          item_id: booking.item.id,\n          description,\n          start,\n          end,\n        })\n\n    request\n      .then(res => {\n        console.log(res.data)\n      })\n      .catch(err => {\n        setErrors(err.response.data)\n        // console.log(err.response.data)\n      })\n  }\n\n  return (\n    <>\n      <p>{`Bokning av ${item.name} för ${name}.`}</p>\n      <div>\n        <div>{errors.start}</div>\n        <DateTimePicker value={moment(start)} onChange={setStart} />\n        <div>{errors.end}</div>\n        <DateTimePicker value={moment(end)} onChange={setEnd} />\n      </div>\n      <div>\n        <div>{errors.description}</div>\n        <textarea\n          className={style.description}\n          value={description}\n          onChange={e => setDescription(e.target.value)}\n        />\n      </div>\n      <div>{errors.non_field_errors}</div>\n      <Button onClick={saveBooking}>Save</Button>\n    </>\n  )\n}\n\nexport default EditBooking\n","import React from 'react'\nimport moment from 'moment'\nimport 'moment/locale/sv'\n\nmoment.locale('sv')\n\nconst formatDate = date =>\n  date.toLocaleDateString('sv-SE', {\n    month: 'short',\n    day: 'numeric',\n    hour: 'numeric',\n    minute: 'numeric',\n  })\n\nconst ViewBooking = ({ booking }) => (\n  <>\n    <p>\n      Bokning av {booking.item.name} för {booking.user.pretty_name}.\n    </p>\n    <p>\n      {moment(booking.start).to(booking.end, true)}\n      {', '}\n      {`${formatDate(booking.start)} - ${formatDate(booking.end)}`}\n    </p>\n    <p>{booking.description}</p>\n  </>\n)\n\nexport default ViewBooking\n","import React, { useState } from 'react'\nimport moment from 'moment'\nimport 'moment/locale/sv'\n\nimport { useEndpoint } from '../request'\nimport ViewBooking from './viewBooking'\nimport useModal from '../modal/useModal'\n\nimport style from '../../scss/bookingCalendar.module.scss'\n\nconst getDateRangeDayCount = (start, end) => {\n  const startOfStartDay = moment(start).startOf('day')\n  const startDayOffset = moment.duration(start.diff(startOfStartDay))\n  const rangeDuration = moment.duration(end.diff(start))\n  return startDayOffset.add(rangeDuration).days()\n}\nconst splitDateRangeByDay = (start, end) => {\n  const dayCount = getDateRangeDayCount(start, end)\n  const array = [[start, end]]\n  for (let i = 1; i <= dayCount; i += 1) {\n    array[i] = [\n      moment(array[i - 1][0])\n        .add(1, 'd')\n        .startOf('day'),\n      array[i - 1][1],\n    ]\n    array[i - 1][1] = moment(array[i - 1][0]).endOf('day')\n  }\n\n  return array\n}\n\nconst calculateX = date => date.weekday() * 50 + 50\nconst calculateY = date => {\n  const startOfDay = moment(date).startOf('day')\n  return moment.duration(date.diff(startOfDay)).asHours() * 10\n}\nconst calculateHeight = (start, end) =>\n  moment.duration(end.diff(start)).asHours() * 10\n\nconst BookingCalendar = ({ itemId }) => {\n  const [bookings] = useEndpoint({\n    endpoint: `/booking/bookings/?item=${itemId}`,\n  })\n  const [openViewBooking] = useModal(ViewBooking)\n  const [week, setWeek] = useState(moment().week()) // TODO: fix new year\n\n  const now = moment()\n\n  return (\n    <div>\n      <div>\n        Vecka {week}\n        <button type=\"button\" onClick={() => setWeek(oldWeek => oldWeek - 1)}>\n          -\n        </button>\n        <button type=\"button\" onClick={() => setWeek(moment().week())}>\n          nu\n        </button>\n        <button type=\"button\" onClick={() => setWeek(oldWeek => oldWeek + 1)}>\n          +\n        </button>\n      </div>\n      <svg\n        version=\"1.1\"\n        viewBox=\"0 0 400 240\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        {bookings &&\n          bookings\n            .filter(({ start, end }) => {\n              const startWeek = moment(start).week()\n              const endWeek = moment(end).week()\n              return startWeek === week || endWeek === week\n            })\n            .map(booking => {\n              const start = moment(booking.start)\n              const end = moment(booking.end)\n\n              const dayParts = splitDateRangeByDay(start, end)\n\n              return (\n                <g className={style.booking} key={booking.id}>\n                  {dayParts\n                    .filter(([s]) => {\n                      const startWeek = moment(s).week()\n                      // TODO: fix bookings that belong to multiple weeks.\n                      return startWeek === week\n                    })\n                    .map(([s, e]) => (\n                      <rect\n                        key={`${booking.id}, ${s.day()}`}\n                        x={calculateX(s)}\n                        y={calculateY(s)}\n                        width=\"50\"\n                        height={calculateHeight(s, e)}\n                        stroke=\"white\"\n                        onClick={() =>\n                          openViewBooking('Bokningsinformation', {\n                            booking: {\n                              ...booking,\n                              start: new Date(booking.start),\n                              end: new Date(booking.end),\n                            },\n                          })\n                        }\n                      />\n                    ))}\n                </g>\n              )\n            })}\n        <g className={style.timeIndicators}>\n          {[6, 12, 18].map(hour => (\n            <g key={hour}>\n              <text x=\"0\" y={hour * 10 - 2}>\n                {`0${hour}`.slice(-2)}\n                :00\n              </text>\n              <line x1=\"0\" y1={hour * 10} x2=\"400\" y2={hour * 10} />\n            </g>\n          ))}\n        </g>\n        {now.week() === week && (\n          <line\n            x1={calculateX(now)}\n            x2={calculateX(now) + 50}\n            y1={calculateY(now)}\n            y2={calculateY(now)}\n            className={style.nowMarker}\n          />\n        )}\n        <line x1=\"50\" y1=\"0\" x2=\"50\" y2=\"240\" stroke=\"lightgray\" />\n      </svg>\n    </div>\n  )\n}\n\nexport default BookingCalendar\n","import React, { useState } from 'react'\nimport { useEndpoint } from '../request'\n\nimport style from '../../scss/booking.module.scss'\nimport { Button } from '../ui/buttons'\nimport useModal from '../modal/useModal'\nimport EditBooking from './editBooking'\nimport BookingCalendar from './bookingCalendar'\n\nconst ItemPanel = ({ item, setItem, createBooking }) => {\n  const [items] = useEndpoint({ endpoint: '/booking/items/' })\n  const [openModal] = useModal(EditBooking)\n\n  return (\n    <>\n      <select\n        className={style.items}\n        onChange={e => {\n          const selectedValue = e.target.value\n          if (selectedValue === '') setItem(null)\n          else setItem(items.filter(i => `${i.id}` === selectedValue)[0])\n        }}\n        value={item ? item.id : ''}\n      >\n        <option value=\"\">Alla</option>\n        {items &&\n          items.map(i => (\n            <option key={i.id} value={i.id}>\n              {i.name}\n            </option>\n          ))}\n      </select>\n\n      {item && (\n        <div>\n          <p>{item.description}</p>\n          <BookingCalendar itemId={item.id} />\n        </div>\n      )}\n\n      {item ? (\n        <Button\n          onClick={() =>\n            openModal(`Boka ${item.name}`, { item, createBooking })\n          }\n        >\n          Boka {item.name}\n        </Button>\n      ) : (\n        <p>Välj ett objekt för att kunna boka.</p>\n      )}\n    </>\n  )\n}\n\nexport default ItemPanel\n","import React, { useState, useEffect, useContext } from 'react'\nimport moment from 'moment'\nimport 'moment/locale/sv'\n\nimport { List, ListItem, ListButton } from '../ui/list'\nimport { FiTrash2, FiInfo, FiEdit } from 'react-icons/fi'\n\nimport EditBooking from './editBooking'\nimport useModal from '../modal/useModal'\nimport ViewBooking from './viewBooking'\nimport { UserContext } from '../layout/layout'\n\nmoment.locale('sv')\n\nconst BookingPanel = ({\n  item,\n  bookings,\n  listBookings,\n  updateBooking,\n  destroyBooking,\n}) => {\n  const [user] = useContext(UserContext)\n\n  const [onlyMine, setOnlyMine] = useState(false)\n\n  const [openEditBooking] = useModal(EditBooking)\n  const [openViewBooking] = useModal(ViewBooking)\n\n  useEffect(\n    () => {\n      listBookings({\n        item: item ? item.id : undefined,\n        future: true,\n        user: onlyMine ? 'me' : undefined,\n      })\n    },\n    [item, onlyMine]\n  )\n\n  return (\n    <>\n      <p>\n        <label>\n          <input\n            type=\"checkbox\"\n            onClick={e => {\n              setOnlyMine(e.target.checked)\n            }}\n            value={onlyMine}\n          />\n          {' Visa endast mina bokningar.'}\n        </label>\n      </p>\n      <List>\n        {bookings &&\n          bookings\n            // convert strings to date objects\n            .map(b => ({\n              ...b,\n              start: new Date(b.start),\n              end: new Date(b.end),\n            }))\n            // sort properly\n            .sort((a, b) => a.start - b.start)\n\n            .map(booking => (\n              <ListItem\n                title={booking.user.pretty_name}\n                subtitle={`${item ? '' : `${booking.item.name}, `}${moment(\n                  booking.start\n                ).calendar()}`}\n                buttons={[\n                  <ListButton\n                    shown={\n                      booking.user.username === user.username ||\n                      user.privileges.booking_admin\n                    }\n                    iconComponent={FiTrash2}\n                    text=\"Ta bort bokning\"\n                    onClick={() => {\n                      destroyBooking(booking.id)\n                    }}\n                    key=\"delete\"\n                  />,\n                  <ListButton\n                    shown={\n                      booking.user.username === user.username ||\n                      user.privileges.booking_admin\n                    }\n                    iconComponent={FiEdit}\n                    text=\"Redigera\"\n                    onClick={() => {\n                      openEditBooking(\n                        `Redigera bokning av ${booking.item.name}`,\n                        { booking, item: booking.item, updateBooking }\n                      )\n                    }}\n                    key=\"edit\"\n                  />,\n                  <ListButton\n                    iconComponent={FiInfo}\n                    text=\"Mer information\"\n                    onClick={() => {\n                      openViewBooking('Bokningsinformation', { booking })\n                    }}\n                    key=\"info\"\n                  />,\n                ]}\n                key={booking.id}\n              />\n            ))}\n      </List>\n    </>\n  )\n}\n\nexport default BookingPanel\n","import React, { useState } from 'react'\n\nimport { GridContainer, GridItem } from '../ui/grid'\nimport BigPixels from '../layout/bigPixels'\nimport ItemPanel from './itemPanel'\nimport BookingPanel from './bookingPanel'\nimport useRestEndpoint from '../request/useRestEndpoint'\n\nconst Booking = () => {\n  const [item, setItem] = useState(null)\n\n  const [{ list, create, destroy, update }, bookings] = useRestEndpoint({\n    endpoint: `/booking/bookings/`,\n  })\n\n  return (\n    <BigPixels>\n      <GridContainer>\n        <GridItem>\n          <ItemPanel setItem={setItem} item={item} createBooking={create} />\n        </GridItem>\n        <GridItem>\n          <BookingPanel\n            item={item}\n            bookings={bookings}\n            listBookings={list}\n            updateBooking={update}\n            destroyBooking={destroy}\n          />\n        </GridItem>\n      </GridContainer>\n    </BigPixels>\n  )\n}\n\nexport default Booking\n","import React from 'react'\nimport Booking from '.'\n\nconst BookingPage = () => <Booking />\n\nexport default BookingPage\n","import { useContext, useState, useEffect } from 'react'\n\nimport { LoadingContext } from '../layout/layout'\nimport request from '.'\n\nconst objHasProperty = (...args) =>\n  Object.prototype.hasOwnProperty.call(...args)\n\nconst appendPK = (config, pk) => {\n  let rv = { ...config }\n\n  ;['endpoint', 'url'].forEach(key => {\n    if (objHasProperty(rv, key)) rv = { ...rv, [key]: `${rv[key]}${pk}/` }\n  })\n\n  return rv\n}\n\nexport default config => {\n  const setLoading = useContext(LoadingContext)[1]\n  const [data, setData] = useState(null)\n  const [error, setError] = useState(null)\n\n  const list = (params = {}) => {\n    setLoading(true)\n    return request({\n      ...config,\n      params: {\n        ...(objHasProperty(config, 'params') ? config.params : {}),\n        ...params,\n      },\n      method: 'get',\n    })\n      .then(res => {\n        setError(null)\n        setData(res.data)\n        setLoading(false)\n        return Promise.resolve(res)\n      })\n      .catch(err => {\n        setError(err)\n        setLoading(false)\n        return Promise.reject(err)\n      })\n  }\n\n  const create = (body = {}) => {\n    setLoading(true)\n    return request({ ...config, data: body, method: 'post' })\n      .then(res => {\n        setError(null)\n        setData(prevData => [...prevData, res.data])\n        setLoading(false)\n        return Promise.resolve(res)\n      })\n      .catch(err => {\n        setError(err)\n        setLoading(false)\n        return Promise.reject(err)\n      })\n  }\n\n  const update = (pk, body = {}) => {\n    setLoading(true)\n    return request({ ...appendPK(config, pk), data: body, method: 'put' })\n      .then(res => {\n        setError(null)\n        setData(prevData => [\n          ...prevData.filter(obj => obj.id !== pk),\n          res.data,\n        ])\n        setLoading(false)\n        return Promise.resolve(res)\n      })\n      .catch(err => {\n        setError(err)\n        setLoading(false)\n        return Promise.reject(err)\n      })\n  }\n\n  const retrieve = (pk, params = {}) => {\n    setLoading(true)\n    return request({\n      ...appendPK(config, pk),\n      params: {\n        ...(objHasProperty(config, 'params') ? config.params : {}),\n        ...params,\n      },\n      method: 'get',\n    })\n      .then(res => {\n        setError(null)\n        setData(prevData => [\n          ...prevData.filter(obj => obj.id !== pk),\n          res.data,\n        ])\n        setLoading(false)\n        return Promise.resolve(res)\n      })\n      .catch(err => {\n        setError(err)\n        setLoading(false)\n        return Promise.reject(err)\n      })\n  }\n\n  const destroy = (pk, body = {}) => {\n    setLoading(true)\n\n    return request({ ...appendPK(config, pk), data: body, method: 'delete' })\n      .then(res => {\n        setError(null)\n        setData(prevData => prevData.filter(obj => obj.id !== pk))\n        setLoading(false)\n        return Promise.resolve(res)\n      })\n      .catch(err => {\n        setError(err)\n        setLoading(false)\n        return Promise.reject(err)\n      })\n  }\n\n  return [{ list, retrieve, update, create, destroy }, data, error]\n}\n","import React from 'react'\n\nimport style from '../../scss/ui.module.scss'\n\nconst List = ({ children }) => <ul className={style.list}>{children}</ul>\n\nconst ListItem = ({ title, subtitle, buttons }) => (\n  <li>\n    <div className={style.listText}>\n      <h3>{title}</h3>\n      <p>{subtitle}</p>\n    </div>\n    <div className={style.listButtons}>{buttons}</div>\n  </li>\n)\n\nconst ListButton = ({ onClick, iconComponent: Icon, text, shown }) =>\n  shown ? (\n    <button type=\"button\" onClick={onClick} title={text}>\n      <Icon />\n    </button>\n  ) : (\n    <></>\n  )\n\nListButton.defaultProps = {\n  shown: true,\n}\n\nexport { List, ListItem, ListButton }\n"],"sourceRoot":""}