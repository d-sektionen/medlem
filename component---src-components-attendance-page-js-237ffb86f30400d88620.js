"use strict";(self.webpackChunkmedlem=self.webpackChunkmedlem||[]).push([[156],{122:function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});var a=n(5785),r=n(7294),l=n(2132);var c=e=>{let{currentOccurrence:t}=e;if(!t)return r.createElement(r.Fragment,null);const{attendants:n,attendant_limit:a,members_only:l}=t;return r.createElement("div",null,r.createElement("h2",null,"Deltagare"),r.createElement("p",null,"Antal deltagare: ",n.length),0!==a&&r.createElement("p",null,"Deltagargräns: ",a),r.createElement("p",null,l?"Endast för medlemmar":"Öppet för alla användare"),r.createElement("ul",null,n.map((e=>r.createElement("li",{key:e.id},e.username)))))},u=n(8803),m=n(1288),o=n(746),i=n(7333),s=n(3819);var d=e=>{let{create:t}=e;return r.createElement(s.Z,{endpoint:"/attendance/occurrences/",customFetcher:t})},p=n(8829),h=n(8043);var E=e=>{let{pageContext:{title:t}}=e;const{0:n,1:s}=(0,r.useState)(null),{data:E,mutate:v}=(0,l.ZP)("/attendance/occurrences/"),[f]=(0,p.Z)(d),y=(0,p._)(),g=E?(0,a.Z)(E).reverse():null;return(0,r.useEffect)((()=>{n&&s(E.find((e=>e.id===n.id)))}),[E]),r.createElement(o.Z,null,r.createElement(m.T,null,r.createElement(m.P,{fullWidth:!0},r.createElement(i.Z,{title:t,choice:n,setChoice:s,choices:g,label:"name",action:()=>{f("Ny händelse",{create:async e=>{await(async e=>{const{data:t}=await(0,h.v_)("/attendance/occurrences/",e);v([].concat((0,a.Z)(E),[t]))})(e),y()}})},actionLabel:"Ny händelse",noChoicesLabel:"Det finns inga händelser just nu."})),n&&r.createElement(r.Fragment,null,r.createElement(m.P,null,r.createElement(c,{currentOccurrence:n})),r.createElement(m.P,null,r.createElement(u.Z,{event:n})))))}},8803:function(e,t,n){var a=n(5785),r=n(7294),l=n(2777),c=n(3541),u=n(2132),m=n(8043);t.Z=e=>{let{event:t}=e;const{0:n,1:o}=(0,r.useState)(""),{data:i,mutate:s}=(0,u.ZP)("/checkin/doorkeepers/?event_id="+t.id);return r.createElement("div",null,r.createElement("h2",null,"Dörrvakter"),r.createElement("form",{onSubmit:e=>{e.preventDefault(),o(""),(async e=>{const{data:t}=await(0,m.v_)("/checkin/doorkeepers/",e);s([].concat((0,a.Z)(i),[t]))})({user_username:n,event_id:t.id})}},r.createElement("input",{value:n,placeholder:"LiU-ID",onChange:e=>o(e.target.value)})),r.createElement(c.aV,null,i&&i.map((e=>r.createElement(c.HC,{title:e.user.pretty_name,key:e.id,buttons:[r.createElement(c.zj,{onClick:()=>(async e=>{await(0,m.IV)("/checkin/doorkeepers/"+e+"/"),s(i.filter((t=>t.id!==e)))})(e.id),iconComponent:l.Ybf,text:"Ta bort dörrvakt",key:"remove"})]})))))}},3819:function(e,t,n){n.d(t,{Z:function(){return d}});var a={};n.r(a),n.d(a,{__:function(){return u},cW:function(){return m}});var r=n(7294),l=n(8043),c=n(780),u="form-module--Label--ab587",m="form-module--inputWrapper--1111e";var o=e=>{let{value:t,onChange:n,type:l,label:o,required:i,min_value:s,max_value:d,min_length:p,max_length:h}=e;const{0:E,1:v}=(0,r.useState)([]);(0,r.useEffect)((()=>{t&&v(t)}),[]);const f=e=>{n(e.target.value)},y=null==E?void 0:E.map((e=>r.createElement("option",{key:e.id,value:e.id},e.name))),g={datetime:r.createElement(c.Z,{required:i,value:t,onChange:n}),date:r.createElement("input",{type:"date",required:i,value:t,onChange:f}),boolean:r.createElement("input",{type:"checkbox",required:i,checked:t,onChange:e=>{n(e.target.checked)}}),integer:r.createElement("input",{type:"number",required:i,value:t,onChange:f,max:d,min:s}),field:r.createElement("select",{multiple:!0,required:i,value:t,onChange:e=>n(Array.from(e.target.selectedOptions,(e=>e.value)))},y)},k=Object.prototype.hasOwnProperty.call(g,l)?g[l]:r.createElement("input",{value:t,onChange:f,maxLength:h,minLength:p});return r.createElement("label",{className:u},""+o,i&&r.createElement("span",{className:a.Required},"*"),r.createElement("div",{className:m},k))},i=n(7580);const s=e=>{let{endpoint:t,method:n,customFetcher:a,onSubmit:c,defaults:u}=e;const{0:m,1:s}=(0,r.useState)(),{0:d,1:p}=(0,r.useState)(u),{0:h,1:E}=(0,r.useState)({});return(0,r.useEffect)((()=>{(0,l.jz)(t).then((e=>{const t=e.data.actions.POST,n=Object.keys(t).map((e=>({key:e,...t[e]}))).filter((e=>!e.read_only));s(n)})).catch((e=>{}))}),t),r.createElement("form",{onSubmit:e=>{e.preventDefault(),c(),a?a(d).catch((e=>{e.response&&E(e.response.data)})):(0,l.ZP)({endpoint:t,method:n,data:d})}},m&&m.map((e=>r.createElement(r.Fragment,{key:e.key},r.createElement(o,Object.assign({},e,{onChange:t=>{((e,t)=>{p((n=>({...n,[e]:t})))})(e.key,t)},value:d[e.key]})),Object.prototype.hasOwnProperty.call(h,e.key)&&r.createElement("div",null,h[e.key].join(", "))))),r.createElement(i.zx,{type:"submit",onClick:()=>{}},"Submit"))};s.defaultProps={method:"POST",customFetcher:null,onSubmit:()=>{},defaults:{}};var d=s}}]);
//# sourceMappingURL=component---src-components-attendance-page-js-237ffb86f30400d88620.js.map