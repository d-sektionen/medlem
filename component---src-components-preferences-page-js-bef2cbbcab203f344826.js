(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{236:function(e,a,t){"use strict";t.r(a);var r=t(1),n=t.n(r),s=t(17),l=t(29),i=t.n(l),u=t(6),c=t.n(u),m=t(42),o=t(223),d=t.n(o),h=function(e){function a(a){var t;return t=e.call(this,a)||this,a.user.profile||(a.user.profile={}),t.state={liuCardId:a.user.profile.liu_card_id,firstName:a.user.first_name,lastName:a.user.last_name,errors:{}},t.handleChange=t.handleChange.bind(i()(t)),t.handleSubmit=t.handleSubmit.bind(i()(t)),t}c()(a,e);var t=a.prototype;return t.handleChange=function(e,a){this.setState({[e]:a.target.value})},t.handleSubmit=function(e){var a=this,t=this.props,r=t.setLoading,n=t.setUser;this.setState({error:void 0,success:void 0,errors:{}}),r(!0),Object(m.d)("/account/user/me/",{first_name:this.state.firstName,last_name:this.state.lastName,profile:{liu_card_id:this.state.liuCardId}}).then(function(e){r(!1),e.status<300&&(a.setState({success:"Ändringarna har sparats."}),n(e.data))}).catch(function(e){console.log(e),r(!1),e.response?400===e.response.status?a.setState({errors:e.response.data}):a.setState({error:"Något gick fel."}):a.setState({error:"Nätverksfel."})}),e.preventDefault()},t.render=function(){var e=this,a=this.props.user,t=this.state,r=t.firstName,s=t.lastName,l=t.liuCardId,i=t.errors,u=t.error,c=t.success;return n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement("div",null,a.membership?"Du är sektionsmedlem.":"Du saknar sektionsmedlemsskap."),n.a.createElement("div",null,n.a.createElement("label",{className:d.a.inputLabel},"Förnamn:",n.a.createElement("input",{value:r,onChange:function(a){return e.handleChange("firstName",a)}})),i.first_name&&n.a.createElement("div",{className:d.a.error},i.first_name)),n.a.createElement("div",null,n.a.createElement("label",{className:d.a.inputLabel},"Efternamn:",n.a.createElement("input",{value:s,onChange:function(a){return e.handleChange("lastName",a)}})),i.last_name&&n.a.createElement("div",{className:d.a.error},i.last_name)),n.a.createElement("div",null,n.a.createElement("label",{className:d.a.inputLabel},"LiU-kortnummer:",n.a.createElement("input",{value:l,onChange:function(a){return e.handleChange("liuCardId",a)}})),i.profile&&i.profile.liu_card_id&&n.a.createElement("div",{className:d.a.error},i.profile.liu_card_id)),n.a.createElement("div",null,n.a.createElement("input",{type:"submit",value:"Spara",className:d.a.submit+" button"})),n.a.createElement("div",null,u&&n.a.createElement("div",{className:d.a.error},u),c&&n.a.createElement("div",{className:d.a.success},c)))},a}(r.Component),p=t(43),f=t(30);a.default=function(){var e=Object(r.useContext)(s.a)[1],a=Object(r.useContext)(s.b),t=a[0],l=a[1];return n.a.createElement(p.a,null,n.a.createElement(f.a,null,n.a.createElement(f.b,null,n.a.createElement(h,{user:t,setUser:l,setLoading:e}))))}}}]);
//# sourceMappingURL=component---src-components-preferences-page-js-bef2cbbcab203f344826.js.map