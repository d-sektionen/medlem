{"version":3,"sources":["webpack:///./src/components/attendance/occurrencePanel.js","webpack:///./src/components/attendance/attendantPanel.js","webpack:///./src/components/attendance/index.js","webpack:///./src/components/attendance/page.js","webpack:///./src/components/request/useRestEndpoint.js","webpack:///./src/components/ui/list.js","webpack:///./src/components/form/dateTimePicker.js","webpack:///./src/components/checkin/doorkeeperPanel.js"],"names":["OccurrencePanel","setCurrentOccurrence","currentOccurrence","newOccurrenceName","setNewOccurrenceName","useState","list","create","unorderedOccurrences","useRestEndpoint","endpoint","occurrences","reverse","useEffect","length","Object","assign","react_default","a","createElement","Fragment","value","id","undefined","onChange","e","find","occurrence","target","map","key","name","onSubmit","preventDefault","then","res","data","AttendantPanel","_ref","attendants","attendantLimit","attendant_limit","attendant","username","Attendance","_useState","bigPixels","grid","occurrencePanel","attendantPanel","doorkeeperPanel","event","AttendancePage","attendance","objHasProperty","_Object$prototype$has","prototype","hasOwnProperty","call","apply","arguments","appendPK","config","pk","rv","forEach","[object Object]","__webpack_exports__","setLoading","useContext","LoadingContext","setData","_useState2","error","setError","params","request","method","Promise","resolve","catch","err","reject","retrieve","prevData","concat","filter","obj","update","body","destroy","__webpack_require__","d","List","ListItem","ListButton","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_scss_ui_module_scss__WEBPACK_IMPORTED_MODULE_1__","_scss_ui_module_scss__WEBPACK_IMPORTED_MODULE_1___default","children","className","style","_ref2","title","subtitle","buttons","listText","listButtons","_ref3","onClick","Icon","iconComponent","text","shown","type","defaultProps","moment__WEBPACK_IMPORTED_MODULE_1__","moment__WEBPACK_IMPORTED_MODULE_1___default","DateTimePicker","format","timeString","year","parseInt","slice","month","date","newValue","moment","set","hour","minute","Number","isNaN","react_icons_fi__WEBPACK_IMPORTED_MODULE_1__","_request_useRestEndpoint__WEBPACK_IMPORTED_MODULE_2__","_ui_list__WEBPACK_IMPORTED_MODULE_3__","DoorkeeperPanel","input","setInput","_useRestEndpoint","_useRestEndpoint$","doorkeepers","event_id","user_username","doorkeeper","user","pretty_name","FiTrash2"],"mappings":"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","file":"component---src-components-attendance-page-js-881df5b14985a6843c04.js","sourcesContent":["import React, { useState, useEffect } from 'react'\n\nimport style from '../../scss/checkin.module.scss'\nimport { useEndpoint, del, get } from '../request'\nimport { FiTrash2 } from 'react-icons/fi'\nimport useRestEndpoint from '../request/useRestEndpoint'\nimport AutoForm from '../form/form'\n\nconst OccurrencePanel = ({ setCurrentOccurrence, currentOccurrence }) => {\n  const [newOccurrenceName, setNewOccurrenceName] = useState('')\n\n  const [{ list, create }, unorderedOccurrences] = useRestEndpoint({\n    endpoint: '/attendance/occurrences/',\n  })\n\n  const occurrences = unorderedOccurrences\n    ? [...unorderedOccurrences].reverse()\n    : null\n\n  useEffect(() => {\n    list()\n    // TODO: handle errors\n  }, [])\n\n  useEffect(\n    () => {\n      if (!occurrences || !occurrences.length) setCurrentOccurrence(null)\n      else if (currentOccurrence === null)\n        setCurrentOccurrence({ ...occurrences[0] })\n    },\n    [occurrences]\n  )\n\n  if (occurrences === null) return <></>\n\n  return (\n    <div>\n      <h2>Händelser</h2>\n      {occurrences && occurrences.length && (\n        <select\n          value={currentOccurrence ? currentOccurrence.id : undefined}\n          onChange={e =>\n            setCurrentOccurrence(\n              occurrences.find(\n                occurrence => `${occurrence.id}` === e.target.value\n              )\n            )\n          }\n        >\n          {occurrences.map(occurrence => (\n            <option value={occurrence.id} key={occurrence.id}>\n              {occurrence.name}\n            </option>\n          ))}\n        </select>\n      )}\n      {/* <AutoForm endpoint=\"/attendance/occurrences/\" /> */}\n      <form\n        onSubmit={e => {\n          e.preventDefault()\n          setNewOccurrenceName('')\n          // setCurrentOccurrence(null)\n\n          create({ name: newOccurrenceName }).then(res => {\n            setCurrentOccurrence(res.data)\n          })\n        }}\n      >\n        <input\n          value={newOccurrenceName}\n          onChange={e => {\n            setNewOccurrenceName(e.target.value)\n          }}\n        />\n      </form>\n    </div>\n  )\n}\n\nexport default OccurrencePanel\n","import React, { useState, useEffect } from 'react'\n\nimport { FiTrash2 } from 'react-icons/fi'\nimport useRestEndpoint from '../request/useRestEndpoint'\n\nconst AttendantPanel = ({ currentOccurrence }) => {\n  if (!currentOccurrence) return <></>\n\n  const { attendants, attendant_limit: attendantLimit } = currentOccurrence\n\n  return (\n    <div>\n      <h2>Deltagare</h2>\n      <p>Antal deltagare: {attendants.length}</p>\n      {attendantLimit !== 0 && <p>Deltagargräns: {attendantLimit}</p>}\n      <ul>\n        {attendants.map(attendant => (\n          <li key={attendant.id}>{attendant.username}</li>\n        ))}\n      </ul>\n    </div>\n  )\n}\n\nexport default AttendantPanel\n","import React, { useState } from 'react'\nimport OccurrencePanel from './occurrencePanel'\nimport AttendantPanel from './attendantPanel'\n\nimport DoorkeeperPanel from '../checkin/doorkeeperPanel'\nimport { GridContainer, GridItem } from '../ui/grid'\nimport BigPixels from '../layout/bigPixels'\n\nconst Attendance = () => {\n  const [currentOccurrence, setCurrentOccurrence] = useState(null)\n\n  return (\n    <BigPixels>\n      <GridContainer>\n        <GridItem>\n          <OccurrencePanel\n            currentOccurrence={currentOccurrence}\n            setCurrentOccurrence={setCurrentOccurrence}\n          />\n        </GridItem>\n        <GridItem>\n          <AttendantPanel currentOccurrence={currentOccurrence} />\n        </GridItem>\n        <GridItem>\n          <DoorkeeperPanel event={currentOccurrence} />\n        </GridItem>\n      </GridContainer>\n    </BigPixels>\n  )\n}\n\nexport default Attendance\n","import React from 'react'\nimport Attendance from '.'\n\nconst AttendancePage = () => <Attendance />\n\nexport default AttendancePage\n","import { useContext, useState, useEffect } from 'react'\n\nimport { LoadingContext } from '../layout/layout'\nimport request from '.'\n\nconst objHasProperty = (...args) =>\n  Object.prototype.hasOwnProperty.call(...args)\n\nconst appendPK = (config, pk) => {\n  let rv = { ...config }\n\n  ;['endpoint', 'url'].forEach(key => {\n    if (objHasProperty(rv, key)) rv = { ...rv, [key]: `${rv[key]}${pk}/` }\n  })\n\n  return rv\n}\n\nexport default config => {\n  const setLoading = useContext(LoadingContext)[1]\n  const [data, setData] = useState(null)\n  const [error, setError] = useState(null)\n\n  const list = (params = {}) => {\n    setLoading(true)\n    return request({\n      ...config,\n      params: {\n        ...(objHasProperty(config, 'params') ? config.params : {}),\n        ...params,\n      },\n      method: 'get',\n    })\n      .then(res => {\n        setError(null)\n        setData(res.data)\n        setLoading(false)\n        return Promise.resolve(res)\n      })\n      .catch(err => {\n        setError(err)\n        setLoading(false)\n        return Promise.reject(err)\n      })\n  }\n\n  const create = (body = {}) => {\n    setLoading(true)\n    return request({ ...config, data: body, method: 'post' })\n      .then(res => {\n        setError(null)\n        setData(prevData => [...prevData, res.data])\n        setLoading(false)\n        return Promise.resolve(res)\n      })\n      .catch(err => {\n        setError(err)\n        setLoading(false)\n        return Promise.reject(err)\n      })\n  }\n\n  const update = (pk, body = {}) => {\n    setLoading(true)\n    return request({ ...appendPK(config, pk), data: body, method: 'put' })\n      .then(res => {\n        setError(null)\n        setData(prevData => [\n          ...prevData.filter(obj => obj.id !== pk),\n          res.data,\n        ])\n        setLoading(false)\n        return Promise.resolve(res)\n      })\n      .catch(err => {\n        setError(err)\n        setLoading(false)\n        return Promise.reject(err)\n      })\n  }\n\n  const retrieve = (pk, params = {}) => {\n    setLoading(true)\n    return request({\n      ...appendPK(config, pk),\n      params: {\n        ...(objHasProperty(config, 'params') ? config.params : {}),\n        ...params,\n      },\n      method: 'get',\n    })\n      .then(res => {\n        setError(null)\n        setData(prevData => [\n          ...prevData.filter(obj => obj.id !== pk),\n          res.data,\n        ])\n        setLoading(false)\n        return Promise.resolve(res)\n      })\n      .catch(err => {\n        setError(err)\n        setLoading(false)\n        return Promise.reject(err)\n      })\n  }\n\n  const destroy = (pk, body = {}) => {\n    setLoading(true)\n\n    return request({ ...appendPK(config, pk), data: body, method: 'delete' })\n      .then(res => {\n        setError(null)\n        setData(prevData => prevData.filter(obj => obj.id !== pk))\n        setLoading(false)\n        return Promise.resolve(res)\n      })\n      .catch(err => {\n        setError(err)\n        setLoading(false)\n        return Promise.reject(err)\n      })\n  }\n\n  return [{ list, retrieve, update, create, destroy }, data, error]\n}\n","import React from 'react'\n\nimport style from '../../scss/ui.module.scss'\n\nconst List = ({ children }) => <ul className={style.list}>{children}</ul>\n\nconst ListItem = ({ title, subtitle, buttons }) => (\n  <li>\n    <div className={style.listText}>\n      <h3>{title}</h3>\n      <p>{subtitle}</p>\n    </div>\n    <div className={style.listButtons}>{buttons}</div>\n  </li>\n)\n\nconst ListButton = ({ onClick, iconComponent: Icon, text, shown }) =>\n  shown ? (\n    <button type=\"button\" onClick={onClick} title={text}>\n      <Icon />\n    </button>\n  ) : (\n    <></>\n  )\n\nListButton.defaultProps = {\n  shown: true,\n}\n\nexport { List, ListItem, ListButton }\n","import React, { useState } from 'react'\nimport moment from 'moment'\nimport 'moment/locale/sv'\n\nconst DateTimePicker = ({ value, onChange }) => {\n  return (\n    <div>\n      <input\n        type=\"date\"\n        value={value ? value.format('YYYY-MM-DD') : ''}\n        onChange={e => {\n          const timeString = e.target.value\n          const year = parseInt(timeString.slice(0, 4), 10)\n          const month = parseInt(timeString.slice(5, 7), 10)\n          const date = parseInt(timeString.slice(8, 10), 10)\n          if (date && month && year) {\n            const newValue = moment(value).set({ year, month: month - 1, date })\n            onChange(newValue)\n          }\n        }}\n      />\n      <input\n        type=\"time\"\n        value={value ? value.format('HH:mm') : ''}\n        onChange={e => {\n          const timeString = e.target.value\n          const hour = parseInt(timeString.slice(0, 2), 10)\n          const minute = parseInt(timeString.slice(3, 5), 10)\n          if (!Number.isNaN(hour) && !Number.isNaN(minute)) {\n            const newValue = moment(value).set({ hour, minute })\n            onChange(newValue)\n          }\n        }}\n      />\n    </div>\n  )\n}\n\nexport default DateTimePicker\n","import React, { useState, useEffect } from 'react'\n\nimport { FiTrash2 } from 'react-icons/fi'\nimport useRestEndpoint from '../request/useRestEndpoint'\nimport { List, ListItem, ListButton } from '../ui/list'\n\nconst DoorkeeperPanel = ({ event }) => {\n  const [input, setInput] = useState('')\n\n  const [{ list, destroy, create }, doorkeepers] = useRestEndpoint({\n    endpoint: '/checkin/doorkeepers/',\n  })\n\n  useEffect(\n    () => {\n      if (event) list({ event_id: event.id })\n      // TODO: handle errors\n    },\n    [event]\n  )\n\n  if (doorkeepers === null) return <></>\n\n  return (\n    <div>\n      <h2>Dörrvakter</h2>\n      <form\n        onSubmit={e => {\n          e.preventDefault()\n          setInput('')\n\n          create({\n            user_username: input,\n            event_id: event.id,\n          })\n        }}\n      >\n        <input value={input} onChange={e => setInput(e.target.value)} />\n      </form>\n      <List>\n        {doorkeepers.map(doorkeeper => (\n          <ListItem\n            title={doorkeeper.user.pretty_name}\n            key={doorkeeper.id}\n            buttons={[\n              <ListButton\n                onClick={() => destroy(doorkeeper.id)}\n                iconComponent={FiTrash2}\n                text=\"Ta bort dörrvakt\"\n                key=\"remove\"\n              />,\n            ]}\n          />\n        ))}\n      </List>\n    </div>\n  )\n}\n\nexport default DoorkeeperPanel\n"],"sourceRoot":""}