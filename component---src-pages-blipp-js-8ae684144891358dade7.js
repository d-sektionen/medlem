(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{195:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=(n(21),n(199),n(96)),i=n.n(a),c=n(59);var u=n(186),s=n.n(u),f=function(e){var t=e.shiftDown,n=function(e){var t=Object(r.useState)(""),n=t[0],o=t[1],a=RegExp("^[A-Za-z0-9]+$"),i=function(t){var n=String.fromCharCode(t.keyCode);"Enter"===t.key?o(function(n){return""!==n&&e({text:n,shift:t.shiftKey}),""}):"Backspace"===t.key?o(function(e){return e.slice(0,-1)}):a.test(n)&&o(function(e){return e.length>16?e:""+e+n})};return Object(r.useEffect)(function(){return window.addEventListener("keydown",i),function(){window.removeEventListener("keydown",i)}},[]),n}(e.onSubmit);return o.a.createElement("p",{className:s.a.textField+" "+(t?s.a.shiftDown:"")},n)};var l=n(12),p=RegExp("^[0-9]+$"),d=function(e){var t=e.scanners,n=e.shiftDown,a=Object(r.useState)(t[0]),u=a[0],d=a[1],v=function(){var e=Object(r.useState)({}),t=e[0],n=e[1],o=null;return Object(r.useEffect)(function(){return function(){clearTimeout(o)}},[]),[t,function(e){clearTimeout(o),o=setTimeout(function(){n({})},1500),n(e)}]}(),m=v[0],g=v[1];return o.a.createElement("div",{className:s.a.container+" "+(m&&m.class)},o.a.createElement("h1",null,"Bleep Bloop"),o.a.createElement("div",{className:s.a.controlContainer},o.a.createElement("select",{onChange:function(e){d(t.filter(function(t){return t.meeting.id==e.target.value})[0])},value:u.meeting.id},t.map(function(e){return o.a.createElement("option",{key:e.meeting.id,value:e.meeting.id},e.meeting.name)})),o.a.createElement(f,{onSubmit:function(e){!function(e,t){void 0===t&&(t=!1);var n=p.test(e)?"card_id":"username";(t?Object(c.b)("/voting/attendants/?"+i.a.stringify({meeting:u.meeting.id,[n]:e})):Object(c.e)("/voting/attendants/",{meeting:u.meeting.id,[n]:e})).then(function(e){var t={};200===e.status&&(t={icon:o.a.createElement(l.k,null),text:"Användare borttagen."}),201===e.status&&(t={icon:o.a.createElement(l.j,null),text:"Användare "+e.data.user.username+" tillagd."}),t=Object.assign({icon:o.a.createElement(l.a,null),class:s.a.success},t),g(t)}).catch(function(e){var t={};t=e.response&&e.response.data&&e.response.data.error?{text:e.response.data.error}:{text:"Okänt fel."},t=Object.assign({icon:o.a.createElement(l.l,null),class:s.a.fail},t),g(t)})}(e.text,e.shift)},shiftDown:n})),o.a.createElement("p",null,"Håll ner shift för att ta bort en medlem"),o.a.createElement("div",{className:s.a.feedback},m.icon,o.a.createElement("p",null,m.text)))};t.default=function(){var e=Object(c.g)({endpoint:"/voting/scanners/"})[0],t=function(e){var t=Object(r.useState)(!1),n=t[0],o=t[1];function a(t){t.key===e&&o(!0)}var i=function(t){t.key===e&&o(!1)};return Object(r.useEffect)(function(){return window.addEventListener("keydown",a),window.addEventListener("keyup",i),function(){window.removeEventListener("keydown",a),window.removeEventListener("keyup",i)}},[]),n}("Shift");return e?o.a.createElement(d,{scanners:e.reverse(),shiftDown:t}):null}},199:function(e,t,n){var r=n(6),o=n(201),a=n(33).f,i=n(204).f,c=n(63),u=n(205),s=r.RegExp,f=s,l=s.prototype,p=/a/g,d=/a/g,v=new s(p)!==p;if(n(27)&&(!v||n(26)(function(){return d[n(5)("match")]=!1,s(p)!=p||s(d)==d||"/a/i"!=s(p,"i")}))){s=function(e,t){var n=this instanceof s,r=c(e),a=void 0===t;return!n&&r&&e.constructor===s&&a?e:o(v?new f(r&&!a?e.source:e,t):f((r=e instanceof s)?e.source:e,r&&a?u.call(e):t),n?this:l,s)};for(var m=function(e){e in s||a(s,e,{configurable:!0,get:function(){return f[e]},set:function(t){f[e]=t}})},g=i(f),w=0;g.length>w;)m(g[w++]);l.constructor=s,s.prototype=l,n(28)(r,"RegExp",s)}n(101)("RegExp")},201:function(e,t,n){var r=n(20),o=n(202).set;e.exports=function(e,t,n){var a,i=t.constructor;return i!==n&&"function"==typeof i&&(a=i.prototype)!==n.prototype&&r(a)&&o&&o(e,a),e}},202:function(e,t,n){var r=n(20),o=n(17),a=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(35)(Function.call,n(203).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(o){t=!0}return function(e,n){return a(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:a}},203:function(e,t,n){var r=n(100),o=n(60),a=n(43),i=n(98),c=n(34),u=n(97),s=Object.getOwnPropertyDescriptor;t.f=n(27)?s:function(e,t){if(e=a(e),t=i(t,!0),u)try{return s(e,t)}catch(n){}if(c(e,t))return o(!r.f.call(e,t),e[t])}},204:function(e,t,n){var r=n(99),o=n(61).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},205:function(e,t,n){"use strict";var r=n(17);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}}}]);
//# sourceMappingURL=component---src-pages-blipp-js-8ae684144891358dade7.js.map