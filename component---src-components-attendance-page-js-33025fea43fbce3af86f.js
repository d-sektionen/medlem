(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{ReHE:function(e,t,a){"use strict";var n=a("KQm4"),r=a("q1tI"),c=a.n(r),l=a("Tgqd"),u=a("QaCa"),m=a("VtrM"),o=a("ZACD");t.a=({event:e})=>{const{0:t,1:a}=Object(r.useState)(""),{data:i,mutate:s}=Object(m.b)("/checkin/doorkeepers/?event_id="+e.id);return c.a.createElement("div",null,c.a.createElement("h2",null,"Dörrvakter"),c.a.createElement("form",{onSubmit:r=>{r.preventDefault(),a(""),(async e=>{const{data:t}=await Object(o.f)("/checkin/doorkeepers/",e);s([].concat(Object(n.a)(i),[t]))})({user_username:t,event_id:e.id})}},c.a.createElement("input",{value:t,onChange:e=>a(e.target.value)})),c.a.createElement(u.a,null,i&&i.map(e=>c.a.createElement(u.c,{title:e.user.pretty_name,key:e.id,buttons:[c.a.createElement(u.b,{onClick:()=>(async e=>{await Object(o.b)(`/checkin/doorkeepers/${e}/`),s(i.filter(t=>t.id!==e))})(e.id),iconComponent:l.m,text:"Ta bort dörrvakt",key:"remove"})]}))))}},d7Br:function(e,t,a){"use strict";a.r(t);var n=a("KQm4"),r=a("q1tI"),c=a.n(r),l=a("VtrM");var u=({currentOccurrence:e})=>{if(!e)return c.a.createElement(c.a.Fragment,null);const{attendants:t,attendant_limit:a,members_only:n}=e;return c.a.createElement("div",null,c.a.createElement("h2",null,"Deltagare"),c.a.createElement("p",null,"Antal deltagare: ",t.length),0!==a&&c.a.createElement("p",null,"Deltagargräns: ",a),c.a.createElement("p",null,n?"Endast för medlemmar":"Öppet för alla användare"),c.a.createElement("ul",null,t.map(e=>c.a.createElement("li",{key:e.id},e.username))))},m=a("ReHE"),o=a("zw+i"),i=a("r90U"),s=a("INns"),d=a("noUn");var p=({create:e})=>c.a.createElement(d.a,{endpoint:"/attendance/occurrences/",customFetcher:e}),b=a("zGz4"),E=a("ZACD");t.default=({pageContext:{title:e}})=>{const{0:t,1:a}=Object(r.useState)(null),{data:d,mutate:h}=Object(l.b)("/attendance/occurrences/"),[v]=Object(b.a)(p),y=Object(b.b)(),O=d?Object(n.a)(d).reverse():null;return Object(r.useEffect)(()=>{t&&a(d.find(e=>e.id===t.id))},[d]),c.a.createElement(i.a,null,c.a.createElement(o.a,null,c.a.createElement(o.b,{fullWidth:!0},c.a.createElement(s.a,{title:e,choice:t,setChoice:a,choices:O,label:"name",action:()=>{v("Ny händelse",{create:async e=>{await(async e=>{const{data:t}=await Object(E.f)("/attendance/occurrences/",e);h([].concat(Object(n.a)(d),[t]))})(e),y()}})},actionLabel:"Ny händelse",noChoicesLabel:"Det finns inga händelser just nu."})),t&&c.a.createElement(c.a.Fragment,null,c.a.createElement(o.b,null,c.a.createElement(u,{currentOccurrence:t})),c.a.createElement(o.b,null,c.a.createElement(m.a,{event:t})))))}},kRcL:function(e,t,a){e.exports={label:"form-module--label--1j4rO",inputWrapper:"form-module--inputWrapper--tEZjQ",required:"form-module--required--1ei65"}},noUn:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),c=a("ZACD"),l=a("X0yR"),u=a("kRcL"),m=a.n(u);var o=({value:e,onChange:t,type:a,label:n,required:c,min_value:u,max_value:o,min_length:i,max_length:s})=>{const d=e=>{t(e.target.value)},p={datetime:r.a.createElement(l.a,{value:e,onChange:t}),date:r.a.createElement("input",{type:"date",value:e,onChange:d}),boolean:r.a.createElement("input",{type:"checkbox",checked:e,onChange:e=>{t(e.target.checked)}}),integer:r.a.createElement("input",{type:"number",value:e,onChange:d,max:o,min:u})},b=Object.prototype.hasOwnProperty.call(p,a)?p[a]:r.a.createElement("input",{value:e,onChange:d,maxLength:s,minLength:i});return r.a.createElement("label",{className:m.a.label},""+n,c&&r.a.createElement("span",{className:m.a.required},"*"),r.a.createElement("div",{className:m.a.inputWrapper},b))},i=a("Rq/j");const s=({endpoint:e,method:t,customFetcher:a,onSubmit:l,defaults:u})=>{const{0:m,1:s}=Object(n.useState)(),{0:d,1:p}=Object(n.useState)(u),{0:b,1:E}=Object(n.useState)({});return Object(n.useEffect)(()=>{Object(c.d)(e).then(e=>{const t=e.data.actions.POST,a=Object.keys(t).map(e=>({key:e,...t[e]})).filter(e=>!e.read_only);s(a)}).catch(e=>{})},e),r.a.createElement("form",{onSubmit:n=>{n.preventDefault(),l(),a?a(d).catch(e=>{e.response&&E(e.response.data)}):Object(c.a)({endpoint:e,method:t,data:d})}},m&&m.map(e=>r.a.createElement(r.a.Fragment,{key:e.key},r.a.createElement(o,Object.assign({},e,{onChange:t=>{((e,t)=>{p(a=>({...a,[e]:t}))})(e.key,t)},value:d[e.key]})),Object.prototype.hasOwnProperty.call(b,e.key)&&r.a.createElement("div",null,b[e.key].join(", ")))),r.a.createElement(i.a,{type:"submit",onClick:()=>{}},"Submit"))};s.defaultProps={method:"POST",customFetcher:null,onSubmit:()=>{},defaults:{}};t.a=s}}]);
//# sourceMappingURL=component---src-components-attendance-page-js-33025fea43fbce3af86f.js.map