"use strict";(self.webpackChunkmedlem=self.webpackChunkmedlem||[]).push([[543],{8803:function(e,t,n){var l=n(5785),a=n(7294),r=n(2777),c=n(3541),i=n(2132),o=n(8043);t.Z=e=>{let{event:t}=e;const{0:n,1:u}=(0,a.useState)(""),{data:s,mutate:m}=(0,i.ZP)("/checkin/doorkeepers/?event_id="+t.id);return a.createElement("div",null,a.createElement("h2",null,"Dörrvakter"),a.createElement("form",{onSubmit:e=>{e.preventDefault(),u(""),(async e=>{const{data:t}=await(0,o.v_)("/checkin/doorkeepers/",e);m([].concat((0,l.Z)(s),[t]))})({user_username:n,event_id:t.id})}},a.createElement("input",{value:n,placeholder:"LiU-ID",onChange:e=>u(e.target.value)})),a.createElement(c.aV,null,s&&s.map((e=>a.createElement(c.HC,{title:e.user.pretty_name,key:e.id,buttons:[a.createElement(c.zj,{onClick:()=>(async e=>{await(0,o.IV)("/checkin/doorkeepers/"+e+"/"),m(s.filter((t=>t.id!==e)))})(e.id),iconComponent:r.Ybf,text:"Ta bort dörrvakt",key:"remove"})]})))))}},3541:function(e,t,n){n.d(t,{HC:function(){return c},aV:function(){return r},zj:function(){return i}});var l=n(7294),a=n(4608);const r=e=>{let{children:t}=e;return l.createElement("ul",{className:a.pb},t)},c=e=>{let{title:t,subtitle:n,buttons:r,color:c}=e;return l.createElement("li",{className:c?a.K:"",style:{borderColor:c}},l.createElement("div",{className:a.l_},l.createElement("h3",null,t),l.createElement("p",null,n)),l.createElement("div",{className:a.jk},r))};c.defaultProps={color:null};const i=e=>{let{href:t,onClick:n,iconComponent:r,text:c,shown:i}=e;return i?l.createElement(l.Fragment,null,t?l.createElement("a",{className:a.fq,href:t,onClick:n,title:c},l.createElement(r,null)):l.createElement("button",{className:a.fq,type:"button",onClick:n,title:c},l.createElement(r,null))):l.createElement(l.Fragment,null)};i.defaultProps={shown:!0}},7333:function(e,t,n){var l=n(5785),a=n(7294),r=n(4608),c=n(7580);const i=e=>{let{title:t,choices:n,categorizedChoices:i,choice:o,setChoice:u,label:s,action:m,actionLabel:d,noChoicesLabel:E,onChange:v}=e;const h=[].concat((0,l.Z)(n||[]),(0,l.Z)(Object.keys(i).reduce(((e,t)=>[].concat((0,l.Z)(e),(0,l.Z)(i[t]))),[])));return(0,a.useEffect)((()=>{const e=sessionStorage.getItem(t+"-selectedItem");if(!e)return;const n=h.find((t=>""+t.id===e));n&&u(n)}),[n,i]),a.createElement("div",{className:r.KW},a.createElement("h1",null,t),a.createElement("div",{className:r.Nw},h.length?a.createElement("div",{className:r.Nu},a.createElement("select",{onChange:e=>{const n=e.target.value,l=""===n?null:h.filter((e=>""+e.id===n))[0];u(l),v(e),l?sessionStorage.setItem(t+"-selectedItem",l.id):sessionStorage.removeItem(t+"-selectedItem")},value:o?o.id:""},a.createElement("option",{hidden:!0,value:""}),n.sort().map((e=>a.createElement("option",{value:e.id,key:e.id},e[s]))),Object.keys(i).sort().map((e=>a.createElement("optgroup",{label:e,key:e},i[e].sort().map((e=>a.createElement("option",{value:e.id,key:e.id},e[s]))))))),null===o&&a.createElement("div",{className:r.$f},"Välj ett objekt")):a.createElement("span",null,E),m&&a.createElement(c.zx,{onClick:m},d)))};i.defaultProps={categorizedChoices:{},choices:[],action:null,actionLabel:"",choice:null,noChoicesLabel:"",setChoice:()=>{},label:"",onChange:()=>{}},t.Z=i},2978:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var l=n(5785),a=n(7294),r=n(2132),c=(n(7580),n(8043));var i=e=>{let{currentMeeting:t,updatePatch:n}=e;return a.createElement("div",null,a.createElement("h2",null,"Mötesinfo"),a.createElement("h3",null,t.name),t.description&&a.createElement("p",{style:{whiteSpace:"pre-line"}},t.description),a.createElement("h3",null,"Detaljer"),a.createElement("ul",null,a.createElement("li",null,t.enable_speaker_requests?"Talarlista aktiverad":"Talarlista inaktiverad"),a.createElement("li",null,t.open_attendance?"Öppen incheckning":"Stängd incheckning"),a.createElement("li",null,"Mötesdata rensas: "+t.clear_data)))},o=(n(8803),n(2777)),u=n(8829);var s=e=>{let{currentMeeting:t,voteId:n}=e;const{data:l}=(0,r.ZP)((()=>n&&"/voting/admin-votes/"+n+"/")),c=(l?l.alternatives.map((e=>e.num_votes)):[]).reduce(((e,t)=>e+t),0);return a.createElement("div",null,a.createElement("ul",null,l&&l.alternatives.map((e=>a.createElement("li",{key:e.text},e.text+": "+e.num_votes,c?" ("+(e.num_votes?Math.round(1e3*e.num_votes/c)/10:0)+"%)":"")))),a.createElement("p",null,"Summa: ",c))},m=n(3541);var d=e=>{let{currentMeeting:t}=e;const{data:n,mutate:l}=(0,r.ZP)("/voting/admin-votes/?event_id="+t.id),[c]=(0,u.Z)(s),i=(0,u._)();return(0,a.useEffect)(i,[n]),a.createElement("div",null,a.createElement("h2",null,"Omröstningar"),a.createElement(m.aV,null,n&&n.filter((e=>e.meeting===t.id)).map((e=>a.createElement(m.HC,{title:e.question,subtitle:e.open?"Active":void 0,key:e.id,buttons:[a.createElement(m.zj,{onClick:()=>c('Resultat av "'+e.question+'"',{voteId:e.id}),iconComponent:o.orK,text:"Resultat",key:"results"})]})))))};var E=e=>{let{currentMeeting:t}=e;const{0:n,1:l}=(0,a.useState)(""),{data:c,mutate:i}=(0,r.ZP)((()=>"/voting/attendants/?meeting_id="+t.id),{refreshInterval:4e3});return null===c?a.createElement(a.Fragment,null):a.createElement("div",null,a.createElement("h2",null,"Deltagare"),a.createElement("div",null,a.createElement("p",null,"Röstlängd: "+(c?(e=>e.filter((e=>e.has_voting_rights)))(c).length:0))))},v=n(1288);n(2525);var h=n(7333),p=n(746);var g=e=>{let{pageContext:{title:t}}=e;const{0:n,1:o}=(0,a.useState)(null),{data:s,mutate:m}=(0,r.ZP)("/voting/admin-meetings/"),g=((0,u._)(),s?(0,l.Z)(s).reverse():null);return(0,a.useEffect)((()=>{n&&o(g.find((e=>e.id===n.id)))}),[g]),a.createElement(p.Z,null,a.createElement(v.T,null,a.createElement(v.P,{fullWidth:!0},a.createElement(h.Z,{title:t,choice:n,setChoice:o,choices:g,label:"name",noChoicesLabel:"Det finns inga möten just nu."})),n&&a.createElement(a.Fragment,null,a.createElement(v.P,null,a.createElement(i,{currentMeeting:n,updatePatch:async e=>{const{data:t}=await(0,c.r$)("/voting/admin-meetings/"+n.id+"/",e);m([].concat((0,l.Z)(s.filter((e=>e.id!==n.id))),[t]))}})),a.createElement(v.P,null,a.createElement(d,{currentMeeting:n})),a.createElement(v.P,null,a.createElement(E,{currentMeeting:n})))))}}}]);
//# sourceMappingURL=component---src-components-voting-counter-page-js-78c09da93059486ea1a2.js.map