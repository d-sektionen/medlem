{"version":3,"sources":["webpack:///./src/components/booking/editBooking.js","webpack:///./src/components/booking/viewBooking.js","webpack:///./src/components/booking/bookingCalendar.js","webpack:///./src/components/booking/itemPanel.js","webpack:///./src/components/modal/useConfirmModal.js","webpack:///./src/components/ui/checkbox.js","webpack:///./src/components/booking/bookingPanel.js","webpack:///./src/components/booking/index.js","webpack:///./src/components/booking/page.js","webpack:///./src/components/request/useRestEndpoint.js","webpack:///./src/components/ui/list.js","webpack:///./src/components/form/dateTimePicker.js","webpack:///./node_modules/core-js/modules/es6.array.sort.js","webpack:///./node_modules/core-js/modules/_strict-method.js"],"names":["newNiceDate","hourOffset","date","Date","setHours","getHours","Math","round","getMinutes","setMinutes","EditBooking","_ref","booking","item","createBooking","updateBooking","newBooking","undefined","user","useContext","UserContext","close","useCloseModal","_useState","useState","description","setDescription","_useState2","start","setStart","_useState3","end","setEnd","_useState4","errors","setErrors","name","pretty_name","react_default","a","createElement","Fragment","className","style","editForm","dateTimePicker","value","moment","onChange","e","target","non_field_errors","buttons","onClick","item_id","id","then","catch","err","response","data","locale","formatDate","toLocaleDateString","month","day","hour","minute","ViewBooking","to","splitDateRangeByDay","dayCount","startOfStartDay","startOf","startDayOffset","duration","diff","rangeDuration","add","days","getDateRangeDayCount","array","i","endOf","calculateX","weekday","calculateY","startOfDay","asHours","BookingCalendar","itemId","bookings","useEndpoint","endpoint","openViewBooking","useModal","page","setPage","now","yearString","year","controls","week","type","oldPage","subtract","version","viewBox","xmlns","filter","_ref2","startWeek","endWeek","map","dayParts","key","_ref3","s","_ref4","x","y","width","height","stroke","Object","assign","timeIndicators","slice","x1","y1","x2","y2","nowMarker","ItemPanel","setItem","items","openModal","selectedValue","itemDescription","bookingCalendar","terms","href","rel","Confirmation","text","onAccept","onDecline","confirmation","propTypes","PropTypes","string","func","defaultProps","Checkbox","click","defaultChecked","checkbox","isRequired","bool","Switch","off","on","defaultToggled","toggled","setToggled","Slider","posed","div","background","transition","Blob","switch","join","slider","pose","blob","BookingPanel","listBookings","destroyBooking","onlyMine","setOnlyMine","openEditBooking","openConfirmation","_useModal","useConfirmModal","useEffect","future","checkbox_Checkbox","checked","ui_list","b","sort","title","subtitle","calendar","shown","username","privileges","booking_admin","iconComponent","FiTrash2","FiEdit","FiInfo","Booking","_useRestEndpoint","useRestEndpoint","_useRestEndpoint$","list","create","destroy","update","bigPixels","grid","itemPanel","bookingPanel","BookingPage","components_booking","objHasProperty","_Object$prototype$has","prototype","hasOwnProperty","call","apply","arguments","appendPK","config","pk","rv","forEach","[object Object]","__webpack_exports__","setLoading","LoadingContext","setData","error","setError","params","request","method","res","Promise","resolve","reject","retrieve","prevData","concat","obj","body","__webpack_require__","d","List","ListItem","ListButton","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_scss_ui_module_scss__WEBPACK_IMPORTED_MODULE_1__","_scss_ui_module_scss__WEBPACK_IMPORTED_MODULE_1___default","children","listText","listButtons","Icon","DateTimePicker","react__WEBPACK_IMPORTED_MODULE_2___default","format","timeString","parseInt","newValue","set","Number","isNaN","$export","aFunction","toObject","fails","$sort","test","P","F","comparefn","this","module","exports","arg"],"mappings":"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","file":"component---src-components-booking-page-js-48d2a92d0d4f75b26ba6.js","sourcesContent":["import React, { useState, useContext } from 'react'\n\nimport moment from 'moment'\nimport 'moment/locale/sv'\n\nimport { Button } from '../ui/buttons'\nimport DateTimePicker from '../form/dateTimePicker'\nimport { UserContext } from '../layout/layout'\n\nimport style from '../../scss/booking.module.scss'\nimport { useCloseModal } from '../modal/useModal'\n\nfunction newNiceDate(hourOffset = 0) {\n  const date = new Date()\n  date.setHours(\n    date.getHours() + 2 + hourOffset + Math.round(date.getMinutes() / 60)\n  )\n  date.setMinutes(0)\n\n  return date\n}\n\nconst EditBooking = ({ booking, item, createBooking, updateBooking }) => {\n  const newBooking = booking === undefined\n\n  const [user] = useContext(UserContext)\n  const close = useCloseModal()\n\n  const [description, setDescription] = useState(\n    booking ? booking.description : ''\n  )\n  const [start, setStart] = useState(booking ? booking.start : newNiceDate())\n  const [end, setEnd] = useState(booking ? booking.end : newNiceDate(2))\n\n  const [errors, setErrors] = useState({})\n\n  const name = booking ? booking.user.pretty_name : user.pretty_name\n\n  const saveBooking = () => {\n    const request = newBooking\n      ? createBooking({\n          item_id: item.id,\n          description,\n          start,\n          end,\n        })\n      : updateBooking(booking.id, {\n          item_id: booking.item.id,\n          description,\n          start,\n          end,\n        })\n\n    request\n      .then(() => {\n        close()\n      })\n      .catch(err => {\n        setErrors(err.response.data)\n        // console.log(err.response.data)\n      })\n  }\n\n  return (\n    <>\n      <p>{`Bokning av ${item.name} för ${name}.`}</p>\n      <div className={style.editForm}>\n        <h3>Startdatum</h3>\n        <div>{errors.start}</div>\n        <DateTimePicker value={moment(start)} onChange={setStart} />\n\n        <h3>Slutdatum</h3>\n        <div>{errors.end}</div>\n        <DateTimePicker value={moment(end)} onChange={setEnd} />\n\n        <h3>Ändamål</h3>\n        <div>{errors.description}</div>\n        <textarea\n          className={style.description}\n          value={description}\n          onChange={e => setDescription(e.target.value)}\n        />\n      </div>\n      <div>{errors.non_field_errors}</div>\n      <Button onClick={saveBooking}>Save</Button>\n    </>\n  )\n}\n\nexport default EditBooking\n","import React from 'react'\nimport moment from 'moment'\nimport 'moment/locale/sv'\n\nmoment.locale('sv')\n\nconst formatDate = date =>\n  date.toLocaleDateString('sv-SE', {\n    month: 'short',\n    day: 'numeric',\n    hour: 'numeric',\n    minute: 'numeric',\n  })\n\nconst ViewBooking = ({ booking }) => (\n  <>\n    <p>\n      Bokning av {booking.item.name} för {booking.user.pretty_name}.\n    </p>\n    <p>\n      {moment(booking.start).to(booking.end, true)}\n      {', '}\n      {`${formatDate(booking.start)} - ${formatDate(booking.end)}`}\n    </p>\n    <p>{booking.description}</p>\n  </>\n)\n\nexport default ViewBooking\n","import React, { useState } from 'react'\nimport moment from 'moment'\nimport 'moment/locale/sv'\n\nimport { useEndpoint } from '../request'\nimport ViewBooking from './viewBooking'\nimport useModal from '../modal/useModal'\n\nimport style from '../../scss/bookingCalendar.module.scss'\n\nconst getDateRangeDayCount = (start, end) => {\n  const startOfStartDay = moment(start).startOf('day')\n  const startDayOffset = moment.duration(start.diff(startOfStartDay))\n  const rangeDuration = moment.duration(end.diff(start))\n  return startDayOffset.add(rangeDuration).days()\n}\nconst splitDateRangeByDay = (start, end) => {\n  const dayCount = getDateRangeDayCount(start, end)\n  const array = [[start, end]]\n  for (let i = 1; i <= dayCount; i += 1) {\n    array[i] = [\n      moment(array[i - 1][0])\n        .add(1, 'd')\n        .startOf('day'),\n      array[i - 1][1],\n    ]\n    array[i - 1][1] = moment(array[i - 1][0]).endOf('day')\n  }\n\n  return array\n}\n\nconst calculateX = date => date.weekday() * 50 + 50\nconst calculateY = date => {\n  const startOfDay = moment(date).startOf('day')\n  return moment.duration(date.diff(startOfDay)).asHours() * 10\n}\nconst calculateHeight = (start, end) =>\n  moment.duration(end.diff(start)).asHours() * 10\n\nconst BookingCalendar = ({ itemId }) => {\n  const [bookings] = useEndpoint({\n    endpoint: `/booking/bookings/?item=${itemId}`,\n  })\n  const [openViewBooking] = useModal(ViewBooking)\n  const [page, setPage] = useState(moment()) // TODO: fix new year\n\n  const now = moment()\n\n  const yearString = page.year() === now.year() ? '' : `, ${page.year()}`\n\n  return (\n    <div>\n      <div className={style.controls}>\n        <div>{`Vecka ${page.week()}${yearString}`}</div>\n\n        <div>\n          <button\n            type=\"button\"\n            onClick={() => setPage(oldPage => moment(oldPage.subtract(1, 'w')))}\n          >\n            -\n          </button>\n          <button type=\"button\" onClick={() => setPage(moment())}>\n            nu\n          </button>\n          <button\n            type=\"button\"\n            onClick={() => setPage(oldPage => moment(oldPage.add(1, 'w')))}\n          >\n            +\n          </button>\n        </div>\n      </div>\n      <svg\n        version=\"1.1\"\n        viewBox=\"0 0 400 240\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        {bookings &&\n          bookings\n            .filter(({ start, end }) => {\n              const startWeek = moment(start).week()\n              const endWeek = moment(end).week()\n              return startWeek === page.week() || endWeek === page.week()\n            })\n            .map(booking => {\n              const start = moment(booking.start)\n              const end = moment(booking.end)\n\n              const dayParts = splitDateRangeByDay(start, end)\n\n              return (\n                <g className={style.booking} key={booking.id}>\n                  {dayParts\n                    .filter(\n                      ([s]) =>\n                        moment(s).week() === page.week() &&\n                        moment(s).year() === page.year()\n                    )\n                    .map(([s, e]) => (\n                      <rect\n                        key={`${booking.id}, ${s.day()}`}\n                        x={calculateX(s)}\n                        y={calculateY(s)}\n                        width=\"50\"\n                        height={calculateHeight(s, e)}\n                        stroke=\"white\"\n                        onClick={() =>\n                          openViewBooking('Bokningsinformation', {\n                            booking: {\n                              ...booking,\n                              start: new Date(booking.start),\n                              end: new Date(booking.end),\n                            },\n                          })\n                        }\n                      />\n                    ))}\n                </g>\n              )\n            })}\n        <g className={style.timeIndicators}>\n          {[6, 12, 18].map(hour => (\n            <g key={hour}>\n              <text x=\"0\" y={hour * 10 - 2}>\n                {`0${hour}`.slice(-2)}\n                :00\n              </text>\n              <line x1=\"0\" y1={hour * 10} x2=\"400\" y2={hour * 10} />\n            </g>\n          ))}\n        </g>\n        {now.week() === page.week() && now.year() === page.year() && (\n          <line\n            x1={calculateX(now)}\n            x2={calculateX(now) + 50}\n            y1={calculateY(now)}\n            y2={calculateY(now)}\n            className={style.nowMarker}\n          />\n        )}\n        <line x1=\"50\" y1=\"0\" x2=\"50\" y2=\"240\" stroke=\"lightgray\" />\n      </svg>\n    </div>\n  )\n}\n\nexport default BookingCalendar\n","import React, { useState } from 'react'\nimport { useEndpoint } from '../request'\n\nimport style from '../../scss/booking.module.scss'\nimport { Button } from '../ui/buttons'\nimport useModal from '../modal/useModal'\nimport EditBooking from './editBooking'\nimport BookingCalendar from './bookingCalendar'\n\nconst ItemPanel = ({ item, setItem, createBooking }) => {\n  const [items] = useEndpoint({ endpoint: '/booking/items/' })\n  const [openModal] = useModal(EditBooking)\n\n  return (\n    <>\n      <select\n        className={style.items}\n        onChange={e => {\n          const selectedValue = e.target.value\n          if (selectedValue === '') setItem(null)\n          else setItem(items.filter(i => `${i.id}` === selectedValue)[0])\n        }}\n        value={item ? item.id : ''}\n      >\n        <option value=\"\">Alla</option>\n        {items &&\n          items.map(i => (\n            <option key={i.id} value={i.id}>\n              {i.name}\n            </option>\n          ))}\n      </select>\n\n      {item ? (\n        <div>\n          <h2>Beskrivning</h2>\n          <p className={style.itemDescription}>{item.description}</p>\n          <h2>Tillgänglighet</h2>\n          <BookingCalendar itemId={item.id} />\n          <h2>Boka</h2>\n          {item.terms && (\n            <p>\n              {`Genom att boka ${item.name} godkänner du `}\n              <a href={item.terms} target=\"_blank\" rel=\"noopener noreferrer\">\n                bokningsavtalet\n              </a>\n              {'.'}\n            </p>\n          )}\n          <Button\n            onClick={() =>\n              openModal(`Boka ${item.name}`, { item, createBooking })\n            }\n          >\n            {`Boka ${item.name}`}\n          </Button>\n        </div>\n      ) : (\n        <p>Välj ett objekt för att kunna boka.</p>\n      )}\n    </>\n  )\n}\n\nexport default ItemPanel\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport useModal, { useCloseModal } from './useModal'\nimport { Button } from '../ui/buttons'\n\nimport style from '../../scss/modal.module.scss'\n\nconst Confirmation = ({ text, onAccept, onDecline }) => {\n  const close = useCloseModal()\n  return (\n    <div className={style.confirmation}>\n      <p>{text}</p>\n      <Button\n        onClick={() => {\n          onDecline()\n          close()\n        }}\n      >\n        Nej\n      </Button>\n      <Button\n        onClick={() => {\n          onAccept()\n          close()\n        }}\n      >\n        Ja\n      </Button>\n    </div>\n  )\n}\n\nConfirmation.propTypes = {\n  text: PropTypes.string,\n  onAccept: PropTypes.func,\n  onDecline: PropTypes.func,\n}\n\nConfirmation.defaultProps = {\n  text: 'Är du säker?',\n  onAccept: () => {},\n  onDecline: () => {},\n}\n\nexport default function useConfirmModal() {\n  const [openModal, isOpen] = useModal(Confirmation)\n\n  const open = (text, onAccept, onDecline) => {\n    openModal('', { text, onAccept, onDecline })\n  }\n\n  return [open, isOpen]\n}\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport posed from 'react-pose'\n\nimport style from '../../scss/ui.module.scss'\n\nconst Checkbox = ({ text, value, click, defaultChecked }) => (\n  <div className={style.checkbox}>\n    <label>\n      <input\n        type=\"checkbox\"\n        onClick={e => click(e)}\n        value={value}\n        defaultChecked={defaultChecked}\n      />\n      {text}\n    </label>\n  </div>\n)\n\nCheckbox.propTypes = {\n  text: PropTypes.string,\n  value: PropTypes.string.isRequired,\n  defaultChecked: PropTypes.bool,\n  click: PropTypes.func,\n}\n\nCheckbox.defaultProps = {\n  text: '',\n  defaultChecked: false,\n  click: () => null,\n}\n\nconst Switch = ({ off, on, click, defaultToggled }) => {\n  const [toggled, setToggled] = useState(defaultToggled)\n\n  const Slider = posed.div({\n    on: { background: 'blue' },\n    off: { background: 'lightgray' },\n    transition: { duration: 4000 },\n  })\n\n  const Blob = posed.div({\n    on: { x: '90%' },\n    off: { x: '0%' },\n    transition: { duration: 1000 },\n  })\n\n  return (\n    <div className={[style.switch, toggled ? style.on : style.off].join(' ')}>\n      <Slider\n        className={style.slider}\n        pose={toggled ? 'on' : 'off'}\n        onClick={() => {\n          setToggled(!toggled)\n          click(!toggled)\n        }}\n      >\n        <Blob className={style.blob} pose={toggled ? 'on' : 'off'} />\n      </Slider>\n      <p>{toggled ? on : off}</p>\n    </div>\n  )\n}\n\nSwitch.propTypes = {\n  off: PropTypes.string.isRequired,\n  on: PropTypes.string.isRequired,\n  click: PropTypes.func,\n  defaultToggled: PropTypes.bool,\n}\n\nSwitch.defaultProps = {\n  click: () => null,\n  defaultToggled: false,\n}\n\nexport { Checkbox, Switch }\n","import React, { useState, useEffect, useContext } from 'react'\nimport moment from 'moment'\nimport 'moment/locale/sv'\n\nimport { List, ListItem, ListButton } from '../ui/list'\nimport { FiTrash2, FiInfo, FiEdit } from 'react-icons/fi'\n\nimport EditBooking from './editBooking'\nimport useModal from '../modal/useModal'\nimport ViewBooking from './viewBooking'\nimport { UserContext } from '../layout/layout'\nimport useConfirmModal from '../modal/useConfirmModal'\n\nimport { Checkbox, Switch } from '../ui/checkbox'\n\nmoment.locale('sv')\n\nconst BookingPanel = ({\n  item,\n  bookings,\n  listBookings,\n  updateBooking,\n  destroyBooking,\n}) => {\n  const [user] = useContext(UserContext)\n\n  const [onlyMine, setOnlyMine] = useState(false)\n\n  const [openEditBooking] = useModal(EditBooking)\n  const [openViewBooking] = useModal(ViewBooking)\n\n  const [openConfirmation] = useConfirmModal()\n\n  useEffect(\n    () => {\n      listBookings({\n        item: item ? item.id : undefined,\n        future: true,\n        user: onlyMine ? 'me' : undefined,\n      })\n    },\n    [item, onlyMine]\n  )\n\n  return (\n    <>\n      <Checkbox\n        text=\" Visa endast mina bokningar.\"\n        value=\"Only Mine\"\n        click={e => setOnlyMine(e.target.checked)}\n      />\n\n      <List>\n        {bookings &&\n          bookings\n            // convert strings to date objects\n            .map(b => ({\n              ...b,\n              start: new Date(b.start),\n              end: new Date(b.end),\n            }))\n            // sort properly\n            .sort((a, b) => a.start - b.start)\n\n            .map(booking => (\n              <ListItem\n                title={booking.user.pretty_name}\n                subtitle={`${item ? '' : `${booking.item.name}, `}${moment(\n                  booking.start\n                ).calendar()}`}\n                buttons={[\n                  <ListButton\n                    shown={\n                      booking.user.username === user.username ||\n                      user.privileges.booking_admin\n                    }\n                    iconComponent={FiTrash2}\n                    text=\"Ta bort bokning\"\n                    onClick={() => {\n                      openConfirmation(\n                        'Är du säker på att du vill ta bort bokningen?',\n                        () => destroyBooking(booking.id)\n                      )\n                    }}\n                    key=\"delete\"\n                  />,\n                  <ListButton\n                    shown={\n                      booking.user.username === user.username ||\n                      user.privileges.booking_admin\n                    }\n                    iconComponent={FiEdit}\n                    text=\"Redigera\"\n                    onClick={() => {\n                      openEditBooking(\n                        `Redigera bokning av ${booking.item.name}`,\n                        { booking, item: booking.item, updateBooking }\n                      )\n                    }}\n                    key=\"edit\"\n                  />,\n                  <ListButton\n                    iconComponent={FiInfo}\n                    text=\"Mer information\"\n                    onClick={() => {\n                      openViewBooking('Bokningsinformation', { booking })\n                    }}\n                    key=\"info\"\n                  />,\n                ]}\n                key={booking.id}\n              />\n            ))}\n      </List>\n    </>\n  )\n}\n\nexport default BookingPanel\n","import React, { useState } from 'react'\n\nimport { GridContainer, GridItem } from '../ui/grid'\nimport BigPixels from '../layout/bigPixels'\nimport ItemPanel from './itemPanel'\nimport BookingPanel from './bookingPanel'\nimport useRestEndpoint from '../request/useRestEndpoint'\n\nconst Booking = () => {\n  const [item, setItem] = useState(null)\n\n  const [{ list, create, destroy, update }, bookings] = useRestEndpoint({\n    endpoint: `/booking/bookings/`,\n  })\n\n  return (\n    <BigPixels>\n      <GridContainer>\n        <GridItem>\n          <ItemPanel setItem={setItem} item={item} createBooking={create} />\n        </GridItem>\n        <GridItem>\n          <BookingPanel\n            item={item}\n            bookings={bookings}\n            listBookings={list}\n            updateBooking={update}\n            destroyBooking={destroy}\n          />\n        </GridItem>\n      </GridContainer>\n    </BigPixels>\n  )\n}\n\nexport default Booking\n","import React from 'react'\nimport Booking from '.'\n\nconst BookingPage = () => <Booking />\n\nexport default BookingPage\n","import { useContext, useState, useEffect } from 'react'\n\nimport { LoadingContext } from '../layout/layout'\nimport request from '.'\n\nconst objHasProperty = (...args) =>\n  Object.prototype.hasOwnProperty.call(...args)\n\nconst appendPK = (config, pk) => {\n  let rv = { ...config }\n\n  ;['endpoint', 'url'].forEach(key => {\n    if (objHasProperty(rv, key)) rv = { ...rv, [key]: `${rv[key]}${pk}/` }\n  })\n\n  return rv\n}\n\nexport default config => {\n  const setLoading = useContext(LoadingContext)[1]\n  const [data, setData] = useState(null)\n  const [error, setError] = useState(null)\n\n  const list = (params = {}) => {\n    setLoading(true)\n    return request({\n      ...config,\n      params: {\n        ...(objHasProperty(config, 'params') ? config.params : {}),\n        ...params,\n      },\n      method: 'get',\n    })\n      .then(res => {\n        setError(null)\n        setData(res.data)\n        setLoading(false)\n        return Promise.resolve(res)\n      })\n      .catch(err => {\n        setError(err)\n        setLoading(false)\n        return Promise.reject(err)\n      })\n  }\n\n  const create = (body = {}) => {\n    setLoading(true)\n    return request({ ...config, data: body, method: 'post' })\n      .then(res => {\n        setError(null)\n        setData(prevData => [...prevData, res.data])\n        setLoading(false)\n        return Promise.resolve(res)\n      })\n      .catch(err => {\n        setError(err)\n        setLoading(false)\n        return Promise.reject(err)\n      })\n  }\n\n  const update = (pk, body = {}) => {\n    setLoading(true)\n    return request({ ...appendPK(config, pk), data: body, method: 'put' })\n      .then(res => {\n        setError(null)\n        setData(prevData => [\n          ...prevData.filter(obj => obj.id !== pk),\n          res.data,\n        ])\n        setLoading(false)\n        return Promise.resolve(res)\n      })\n      .catch(err => {\n        setError(err)\n        setLoading(false)\n        return Promise.reject(err)\n      })\n  }\n\n  const retrieve = (pk, params = {}) => {\n    setLoading(true)\n    return request({\n      ...appendPK(config, pk),\n      params: {\n        ...(objHasProperty(config, 'params') ? config.params : {}),\n        ...params,\n      },\n      method: 'get',\n    })\n      .then(res => {\n        setError(null)\n        setData(prevData => [\n          ...prevData.filter(obj => obj.id !== pk),\n          res.data,\n        ])\n        setLoading(false)\n        return Promise.resolve(res)\n      })\n      .catch(err => {\n        setError(err)\n        setLoading(false)\n        return Promise.reject(err)\n      })\n  }\n\n  const destroy = (pk, body = {}) => {\n    setLoading(true)\n\n    return request({ ...appendPK(config, pk), data: body, method: 'delete' })\n      .then(res => {\n        setError(null)\n        setData(prevData => prevData.filter(obj => obj.id !== pk))\n        setLoading(false)\n        return Promise.resolve(res)\n      })\n      .catch(err => {\n        setError(err)\n        setLoading(false)\n        return Promise.reject(err)\n      })\n  }\n\n  return [{ list, retrieve, update, create, destroy }, data, error]\n}\n","import React from 'react'\n\nimport style from '../../scss/ui.module.scss'\n\nconst List = ({ children }) => <ul className={style.list}>{children}</ul>\n\nconst ListItem = ({ title, subtitle, buttons }) => (\n  <li>\n    <div className={style.listText}>\n      <h3>{title}</h3>\n      <p>{subtitle}</p>\n    </div>\n    <div className={style.listButtons}>{buttons}</div>\n  </li>\n)\n\nconst ListButton = ({ onClick, iconComponent: Icon, text, shown }) =>\n  shown ? (\n    <button type=\"button\" onClick={onClick} title={text}>\n      <Icon />\n    </button>\n  ) : (\n    <></>\n  )\n\nListButton.defaultProps = {\n  shown: true,\n}\n\nexport { List, ListItem, ListButton }\n","import React, { useState } from 'react'\nimport moment from 'moment'\nimport 'moment/locale/sv'\n\nconst DateTimePicker = ({ value, onChange }) => {\n  return (\n    <div>\n      <input\n        type=\"date\"\n        value={value ? value.format('YYYY-MM-DD') : ''}\n        onChange={e => {\n          const timeString = e.target.value\n          const year = parseInt(timeString.slice(0, 4), 10)\n          const month = parseInt(timeString.slice(5, 7), 10)\n          const date = parseInt(timeString.slice(8, 10), 10)\n          if (date && month && year) {\n            const newValue = moment(value).set({ year, month: month - 1, date })\n            onChange(newValue)\n          }\n        }}\n      />\n      <input\n        type=\"time\"\n        value={value ? value.format('HH:mm') : ''}\n        onChange={e => {\n          const timeString = e.target.value\n          const hour = parseInt(timeString.slice(0, 2), 10)\n          const minute = parseInt(timeString.slice(3, 5), 10)\n          if (!Number.isNaN(hour) && !Number.isNaN(minute)) {\n            const newValue = moment(value).set({ hour, minute })\n            onChange(newValue)\n          }\n        }}\n      />\n    </div>\n  )\n}\n\nexport default DateTimePicker\n","'use strict';\nvar $export = require('./_export');\nvar aFunction = require('./_a-function');\nvar toObject = require('./_to-object');\nvar fails = require('./_fails');\nvar $sort = [].sort;\nvar test = [1, 2, 3];\n\n$export($export.P + $export.F * (fails(function () {\n  // IE8-\n  test.sort(undefined);\n}) || !fails(function () {\n  // V8 bug\n  test.sort(null);\n  // Old WebKit\n}) || !require('./_strict-method')($sort)), 'Array', {\n  // 22.1.3.25 Array.prototype.sort(comparefn)\n  sort: function sort(comparefn) {\n    return comparefn === undefined\n      ? $sort.call(toObject(this))\n      : $sort.call(toObject(this), aFunction(comparefn));\n  }\n});\n","'use strict';\nvar fails = require('./_fails');\n\nmodule.exports = function (method, arg) {\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call\n    arg ? method.call(null, function () { /* empty */ }, 1) : method.call(null);\n  });\n};\n"],"sourceRoot":""}