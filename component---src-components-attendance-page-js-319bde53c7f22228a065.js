(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{239:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),l=(n(4),n(27),n(14),n(2),n(226),n(50),n(249));function c(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var u=({setCurrentOccurrence:e,currentOccurrence:t})=>{const[n,u]=Object(a.useState)(""),[{list:o,create:i},s]=Object(l.a)({endpoint:"/attendance/occurrences/"}),m=s?c(s).reverse():null;return Object(a.useEffect)(()=>{o()},[]),Object(a.useEffect)(()=>{m&&m.length?null===t&&e(Object.assign({},m[0])):e(null)},[m]),null===m?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",null,r.a.createElement("h2",null,"Händelser"),m&&m.length&&r.a.createElement("select",{value:t?t.id:void 0,onChange:t=>e(m.find(e=>""+e.id===t.target.value))},m.map(e=>r.a.createElement("option",{value:e.id,key:e.id},e.name))),r.a.createElement("form",{onSubmit:t=>{t.preventDefault(),u(""),i({name:n}).then(t=>{e(t.data)})}},r.a.createElement("input",{value:n,onChange:e=>{u(e.target.value)}})))};var o=({currentOccurrence:e})=>{if(!e)return r.a.createElement(r.a.Fragment,null);const{attendants:t,attendant_limit:n}=e;return r.a.createElement("div",null,r.a.createElement("h2",null,"Deltagare"),r.a.createElement("p",null,"Antal deltagare: ",t.length),0!==n&&r.a.createElement("p",null,"Deltagargräns: ",n),r.a.createElement("ul",null,t.map(e=>r.a.createElement("li",{key:e.id},e.username))))},i=n(273),s=n(44),m=n(52);var d=()=>{const[e,t]=Object(a.useState)(null);return r.a.createElement(m.a,null,r.a.createElement(s.a,null,r.a.createElement(s.b,null,r.a.createElement(u,{currentOccurrence:e,setCurrentOccurrence:t})),r.a.createElement(s.b,null,r.a.createElement(o,{currentOccurrence:e})),r.a.createElement(s.b,null,r.a.createElement(i.a,{event:e}))))};t.default=()=>r.a.createElement(d,null)},249:function(e,t,n){"use strict";n(4),n(27),n(14),n(2);var a=n(1),r=n(28),l=n(50);function c(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}const u=(...e)=>{var t;return(t=Object.prototype.hasOwnProperty).call.apply(t,e)},o=(e,t)=>{let n=Object.assign({},e);return["endpoint","url"].forEach(e=>{u(n,e)&&(n=Object.assign({},n,{[e]:""+n[e]+t+"/"}))}),n};t.a=e=>{const t=Object(a.useContext)(r.a)[1],[n,i]=Object(a.useState)(null),[s,m]=Object(a.useState)(null);return[{list:(n={})=>(t(!0),Object(l.a)(Object.assign({},e,{params:Object.assign({},u(e,"params")?e.params:{},{},n),method:"get"})).then(e=>(m(null),i(e.data),t(!1),Promise.resolve(e))).catch(e=>(m(e),t(!1),Promise.reject(e)))),retrieve:(n,a={})=>(t(!0),Object(l.a)(Object.assign({},o(e,n),{params:Object.assign({},u(e,"params")?e.params:{},{},a),method:"get"})).then(e=>(m(null),i(t=>[].concat(c(t.filter(e=>e.id!==n)),[e.data])),t(!1),Promise.resolve(e))).catch(e=>(m(e),t(!1),Promise.reject(e)))),update:(n,a={})=>(t(!0),Object(l.a)(Object.assign({},o(e,n),{data:a,method:"put"})).then(e=>(m(null),i(t=>[].concat(c(t.filter(e=>e.id!==n)),[e.data])),t(!1),Promise.resolve(e))).catch(e=>(m(e),t(!1),Promise.reject(e)))),create:(n={})=>(t(!0),Object(l.a)(Object.assign({},e,{data:n,method:"post"})).then(e=>(m(null),i(t=>[].concat(c(t),[e.data])),t(!1),Promise.resolve(e))).catch(e=>(m(e),t(!1),Promise.reject(e)))),destroy:(n,a={})=>(t(!0),Object(l.a)(Object.assign({},o(e,n),{data:a,method:"delete"})).then(e=>(m(null),i(e=>e.filter(e=>e.id!==n)),t(!1),Promise.resolve(e))).catch(e=>(m(e),t(!1),Promise.reject(e))))},n,s]}},259:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i}));var a=n(1),r=n.n(a),l=n(35),c=n.n(l);const u=({children:e})=>r.a.createElement("ul",{className:c.a.list},e),o=({title:e,subtitle:t,buttons:n})=>r.a.createElement("li",null,r.a.createElement("div",{className:c.a.listText},r.a.createElement("h3",null,e),r.a.createElement("p",null,t)),r.a.createElement("div",{className:c.a.listButtons},n)),i=({onClick:e,iconComponent:t,text:n,shown:a})=>a?r.a.createElement("button",{type:"button",onClick:e,title:n},r.a.createElement(t,null)):r.a.createElement(r.a.Fragment,null);i.defaultProps={shown:!0}},273:function(e,t,n){"use strict";var a=n(1),r=n.n(a),l=n(15),c=n(249),u=n(259);t.a=({event:e})=>{const[t,n]=Object(a.useState)(""),[{list:o,destroy:i,create:s},m]=Object(c.a)({endpoint:"/checkin/doorkeepers/"});return Object(a.useEffect)(()=>{e&&o({event_id:e.id})},[e]),null===m?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",null,r.a.createElement("h2",null,"Dörrvakter"),r.a.createElement("form",{onSubmit:a=>{a.preventDefault(),n(""),s({user_username:t,event_id:e.id})}},r.a.createElement("input",{value:t,onChange:e=>n(e.target.value)})),r.a.createElement(u.a,null,m.map(e=>r.a.createElement(u.c,{title:e.user.pretty_name,key:e.id,buttons:[r.a.createElement(u.b,{onClick:()=>i(e.id),iconComponent:l.k,text:"Ta bort dörrvakt",key:"remove"})]}))))}}}]);
//# sourceMappingURL=component---src-components-attendance-page-js-319bde53c7f22228a065.js.map