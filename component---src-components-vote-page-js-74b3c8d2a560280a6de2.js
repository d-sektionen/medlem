(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{INns:function(e,t,a){"use strict";var n=a("q1tI"),l=a.n(n),r=a("ubHu"),i=a.n(r),c=a("Rq/j");t.a=({title:e,choices:t,choice:a,setChoice:n,label:r,action:o,actionLabel:s})=>l.a.createElement("div",{className:i.a.titleChooser},l.a.createElement("h1",null,e),l.a.createElement("div",{className:i.a.actions},t&&l.a.createElement("div",{className:i.a.selectContainer},l.a.createElement("select",{onChange:e=>{const a=e.target.value,l=""===a?null:t.filter(e=>""+e.id===a)[0];n(l)},value:a?a.id:""},l.a.createElement("option",{value:""}),t.map(e=>l.a.createElement("option",{value:e.id,key:e.id},e[r]))),null===a&&l.a.createElement("div",{className:i.a.hint},"Välj ett objekt")),o&&l.a.createElement(c.a,{onClick:o},s)))},QaCa:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return s}));var n=a("q1tI"),l=a.n(n),r=a("ubHu"),i=a.n(r);const c=({children:e})=>l.a.createElement("ul",{className:i.a.list},e),o=({title:e,subtitle:t,buttons:a})=>l.a.createElement("li",null,l.a.createElement("div",{className:i.a.listText},l.a.createElement("h3",null,e),l.a.createElement("p",null,t)),l.a.createElement("div",{className:i.a.listButtons},a)),s=({href:e,onClick:t,iconComponent:a,text:n,shown:r})=>r?l.a.createElement(l.a.Fragment,null,e?l.a.createElement("a",{className:i.a.listButton,href:e,onClick:t,title:n},l.a.createElement(a,null)):l.a.createElement("button",{className:i.a.listButton,type:"button",onClick:t,title:n},l.a.createElement(a,null))):l.a.createElement(l.a.Fragment,null);s.defaultProps={shown:!0}},"Z/Vw":function(e,t,a){"use strict";a.r(t);var n=a("q1tI"),l=a.n(n),r=a("VtrM"),i=a("r90U"),c=a("zw+i"),o=a("INns"),s=(a("a1Th"),a("rGqo"),a("rE2o"),a("ioFf"),a("Tgqd")),m=a("QaCa"),u=a("Rq/j"),d=a("8k0H"),E=a("ZACD");function p(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return b(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var g=({meeting:e})=>{const{data:t,mutate:a}=Object(r.b)(()=>e&&"/voting/speakers/?meeting_id="+e.id),{0:i}=Object(n.useContext)(d.b),c=e.attending?"Talarlista är inaktiverad för mötet.":"Du måste vara registrerad på mötet för att kunna skriva upp dig på talarlistan.";return l.a.createElement("div",null,l.a.createElement("h2",null,"Talarlista"),e.attending&&e.enable_speaker_requests?l.a.createElement(u.b,null,l.a.createElement(u.a,{onClick:async()=>{const{data:n}=await Object(E.f)("/voting/speakers/",{meeting_id:e.id});a([].concat(p(t),[n]))}},"Jag vill tala!"),l.a.createElement(u.a,{onClick:async()=>{const{data:n}=await Object(E.f)("/voting/speakers/",{meeting_id:e.id,prioritized:!0});a([].concat(p(t),[n]))}},"Replik!")):l.a.createElement("p",null,c),l.a.createElement(m.a,null,t&&t.map(n=>l.a.createElement(m.c,{title:n.user.pretty_name,subtitle:n.prioritized?"Replik":null,key:n.id,buttons:[l.a.createElement(m.b,{shown:i.id===n.user.id,onClick:async()=>{const l=n.prioritized?"&prioritized":"";await Object(E.b)("/voting/speakers/?meeting_id="+e.id+l),a(t.filter(e=>e.id!==n.id))},iconComponent:s.l,text:"Lämna talarlista",key:"remove"})]}))))};var v=({currentMeeting:e,revalidate:t})=>l.a.createElement("div",null,l.a.createElement("h2",null,"Mötesinfo"),l.a.createElement("h3",null,e.name),l.a.createElement("p",null,l.a.createElement("strong",null,e.attending?"Du deltar på mötet.":"Du är inte registrerad på mötet.")),e.description&&l.a.createElement("p",{style:{whiteSpace:"pre-line"}},e.description),e.open_attendance&&l.a.createElement("p",null,e.attending?l.a.createElement(u.a,{onClick:async()=>{await Object(E.b)("/voting/attend/?meeting_id="+e.id),t()}},"Lämna röstlängden"):l.a.createElement(u.a,{onClick:async()=>{await Object(E.f)("/voting/attend/",{meeting_id:e.id}),t()}},"Gå med i röstlängden")));var f=({vote:e})=>{const{0:t,1:a}=Object(n.useState)(-1),{0:r,1:i}=Object(n.useState)(!1),c=-1===t,o=c?"Välj ett alternativ":"Rösta",s=r?"Tack för din röst!":"Du har röstat i omröstningen.";return l.a.createElement("div",null,l.a.createElement("strong",null,e.question),e.has_voted||r?l.a.createElement("p",null,s):l.a.createElement(l.a.Fragment,null,l.a.createElement("ul",null,e.alternatives.map(({text:e,id:n})=>l.a.createElement("li",{key:n},l.a.createElement("label",null,l.a.createElement("input",{type:"radio",checked:t===n,onChange:()=>a(n)})," "+e)))),l.a.createElement("button",{type:"button",disabled:c,onClick:async()=>{const a={vote_id:e.id,alternative_id:t};await Object(E.f)("/voting/made_votes/",a),i(!0)}},o)))};var h=({meeting:e})=>{const{data:t,error:a,revalidate:i}=Object(r.b)(()=>"/voting/votes/?meeting_id="+e.id);return Object(n.useEffect)(()=>{i()},[e]),l.a.createElement("div",null,l.a.createElement("h2",null,"Rösta"),t&&l.a.createElement(l.a.Fragment,null,0===t.length&&l.a.createElement("p",null,"Det finns ingen aktiv omröstning"),t.map(e=>l.a.createElement(f,{key:e.id,vote:e}))))};t.default=({pageContext:{title:e}})=>{const{0:t,1:a}=Object(n.useState)(null),{data:s,revalidate:m}=Object(r.b)("/voting/meetings/");return Object(n.useEffect)(()=>{t&&a(s.find(e=>e.id===t.id))},[s]),l.a.createElement(i.a,null,l.a.createElement(c.a,null,l.a.createElement(c.b,{fullWidth:!0},l.a.createElement(o.a,{title:e,choice:t,setChoice:a,choices:s,label:"name"})),t&&l.a.createElement(l.a.Fragment,null,l.a.createElement(c.b,null,l.a.createElement(v,{currentMeeting:t,revalidate:m})),l.a.createElement(c.b,null,l.a.createElement(h,{meeting:t})),l.a.createElement(c.b,null,l.a.createElement(g,{meeting:t})))))}}}]);
//# sourceMappingURL=component---src-components-vote-page-js-74b3c8d2a560280a6de2.js.map