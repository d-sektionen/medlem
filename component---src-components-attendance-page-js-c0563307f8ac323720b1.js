(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{236:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=(n(24),n(222),n(43),n(247)),u=(n(72),n(121),n(272),n(230),function(e){var t=e.setCurrentOccurrence,n=e.currentOccurrence,u=Object(r.useState)(""),l=u[0],i=u[1],o=Object(c.a)({endpoint:"/attendance/occurrences/"}),s=o[0],m=s.list,f=s.create,d=o[1],v=d?[].concat(d).reverse():null;return Object(r.useEffect)(function(){m()},[]),Object(r.useEffect)(function(){v&&v.length?null===n&&t(Object.assign({},v[0])):t(null)},[v]),null===v?a.a.createElement(a.a.Fragment,null):a.a.createElement("div",null,a.a.createElement("h2",null,"Händelser"),v&&v.length&&a.a.createElement("select",{value:n?n.id:void 0,onChange:function(e){return t(v.find(function(t){return""+t.id===e.target.value}))}},v.map(function(e){return a.a.createElement("option",{value:e.id,key:e.id},e.name)})),a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i(""),f({name:l}).then(function(e){t(e.data)})}},a.a.createElement("input",{value:l,onChange:function(e){i(e.target.value)}})))}),l=function(e){var t=e.currentOccurrence;if(!t)return a.a.createElement(a.a.Fragment,null);var n=t.attendants,r=t.attendant_limit;return a.a.createElement("div",null,a.a.createElement("h2",null,"Deltagare"),a.a.createElement("p",null,"Antal deltagare: ",n.length),0!==r&&a.a.createElement("p",null,"Deltagargräns: ",r),a.a.createElement("ul",null,n.map(function(e){return a.a.createElement("li",{key:e.id},e.username)})))},i=n(276),o=n(34),s=n(45),m=function(){var e=Object(r.useState)(null),t=e[0],n=e[1];return a.a.createElement(s.a,null,a.a.createElement(o.a,null,a.a.createElement(o.b,null,a.a.createElement(u,{currentOccurrence:t,setCurrentOccurrence:n})),a.a.createElement(o.b,null,a.a.createElement(l,{currentOccurrence:t})),a.a.createElement(o.b,null,a.a.createElement(i.a,{event:t}))))};t.default=function(){return a.a.createElement(m,null)}},247:function(e,t,n){"use strict";n(55),n(72),n(24);var r=n(1),a=n(18),c=n(43),u=function(){var e;return(e=Object.prototype.hasOwnProperty).call.apply(e,arguments)},l=function(e,t){var n=Object.assign({},e);return["endpoint","url"].forEach(function(e){u(n,e)&&(n=Object.assign({},n,{[e]:""+n[e]+t+"/"}))}),n};t.a=function(e){var t=Object(r.useContext)(a.a)[1],n=Object(r.useState)(null),i=n[0],o=n[1],s=Object(r.useState)(null),m=s[0],f=s[1];return[{list:function(n){return void 0===n&&(n={}),t(!0),Object(c.a)(Object.assign({},e,{params:Object.assign({},u(e,"params")?e.params:{},n),method:"get"})).then(function(e){return f(null),o(e.data),t(!1),Promise.resolve(e)}).catch(function(e){return f(e),t(!1),Promise.reject(e)})},retrieve:function(n,r){return void 0===r&&(r={}),t(!0),Object(c.a)(Object.assign({},l(e,n),{params:Object.assign({},u(e,"params")?e.params:{},r),method:"get"})).then(function(e){return f(null),o(function(t){return[].concat(t.filter(function(e){return e.id!==n}),[e.data])}),t(!1),Promise.resolve(e)}).catch(function(e){return f(e),t(!1),Promise.reject(e)})},update:function(n,r){return void 0===r&&(r={}),t(!0),Object(c.a)(Object.assign({},l(e,n),{data:r,method:"put"})).then(function(e){return f(null),o(function(t){return[].concat(t.filter(function(e){return e.id!==n}),[e.data])}),t(!1),Promise.resolve(e)}).catch(function(e){return f(e),t(!1),Promise.reject(e)})},create:function(n){return void 0===n&&(n={}),t(!0),Object(c.a)(Object.assign({},e,{data:n,method:"post"})).then(function(e){return f(null),o(function(t){return[].concat(t,[e.data])}),t(!1),Promise.resolve(e)}).catch(function(e){return f(e),t(!1),Promise.reject(e)})},destroy:function(n,r){return void 0===r&&(r={}),t(!0),Object(c.a)(Object.assign({},l(e,n),{data:r,method:"delete"})).then(function(e){return f(null),o(function(e){return e.filter(function(e){return e.id!==n})}),t(!1),Promise.resolve(e)}).catch(function(e){return f(e),t(!1),Promise.reject(e)})}},i,m]}},258:function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"c",function(){return i}),n.d(t,"b",function(){return o});var r=n(1),a=n.n(r),c=n(23),u=n.n(c),l=function(e){var t=e.children;return a.a.createElement("ul",{className:u.a.list},t)},i=function(e){var t=e.title,n=e.subtitle,r=e.buttons;return a.a.createElement("li",null,a.a.createElement("div",{className:u.a.listText},a.a.createElement("h3",null,t),a.a.createElement("p",null,n)),a.a.createElement("div",{className:u.a.listButtons},r))},o=function(e){var t=e.onClick,n=e.iconComponent,r=e.text;return e.shown?a.a.createElement("button",{type:"button",onClick:t,title:r},a.a.createElement(n,null)):a.a.createElement(a.a.Fragment,null)};o.defaultProps={shown:!0}},272:function(e,t,n){"use strict";n(294),n(295);var r=n(1),a=n.n(r),c=n(253),u=n.n(c);n(257);t.a=function(e){var t=e.value,n=e.onChange;return a.a.createElement("div",null,a.a.createElement("input",{type:"date",value:t?t.format("YYYY-MM-DD"):"",onChange:function(e){var r=e.target.value,a=parseInt(r.slice(0,4),10),c=parseInt(r.slice(5,7),10),l=parseInt(r.slice(8,10),10);if(l&&c&&a){var i=u()(t).set({year:a,month:c-1,date:l});n(i)}}}),a.a.createElement("input",{type:"time",value:t?t.format("HH:mm"):"",onChange:function(e){var r=e.target.value,a=parseInt(r.slice(0,2),10),c=parseInt(r.slice(3,5),10);if(!Number.isNaN(a)&&!Number.isNaN(c)){var l=u()(t).set({hour:a,minute:c});n(l)}}}))}},276:function(e,t,n){"use strict";var r=n(1),a=n.n(r),c=n(10),u=n(247),l=n(258);t.a=function(e){var t=e.event,n=Object(r.useState)(""),i=n[0],o=n[1],s=Object(u.a)({endpoint:"/checkin/doorkeepers/"}),m=s[0],f=m.list,d=m.destroy,v=m.create,p=s[1];return Object(r.useEffect)(function(){t&&f({event_id:t.id})},[t]),null===p?a.a.createElement(a.a.Fragment,null):a.a.createElement("div",null,a.a.createElement("h2",null,"Dörrvakter"),a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),o(""),v({user_username:i,event_id:t.id})}},a.a.createElement("input",{value:i,onChange:function(e){return o(e.target.value)}})),a.a.createElement(l.a,null,p.map(function(e){return a.a.createElement(l.c,{title:e.user.pretty_name,key:e.id,buttons:[a.a.createElement(l.b,{onClick:function(){return d(e.id)},iconComponent:c.k,text:"Ta bort dörrvakt",key:"remove"})]})})))}}}]);
//# sourceMappingURL=component---src-components-attendance-page-js-c0563307f8ac323720b1.js.map