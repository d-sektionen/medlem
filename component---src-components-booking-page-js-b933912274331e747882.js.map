{"version":3,"sources":["webpack:///./src/components/booking/editBooking.js","webpack:///./src/components/booking/itemPanel.js","webpack:///./src/components/booking/viewBooking.js","webpack:///./src/components/booking/bookingPanel.js","webpack:///./src/components/booking/index.js","webpack:///./src/components/booking/page.js","webpack:///./src/components/request/useRestEndpoint.js","webpack:///./src/components/ui/list.js"],"names":["newNiceDate","hourOffset","date","Date","setHours","getHours","Math","round","getMinutes","setMinutes","EditBooking","_ref","booking","item","createBooking","updateBooking","newBooking","undefined","_useState","useState","description","setDescription","_useState2","start","setStart","_useState3","end","setEnd","react_default","a","createElement","Fragment","name","es","selectsStart","selected","startDate","endDate","onChange","minDate","maxDate","showTimeSelect","timeFormat","timeIntervals","dateFormat","timeCaption","selectsEnd","value","e","target","buttons","onClick","item_id","id","then","res","console","log","data","catch","err","response","ItemPanel","setItem","items","useEndpoint","endpoint","openModal","useModal","className","style","selectedValue","filter","i","map","key","moment","locale","formatDate","toLocaleDateString","month","day","hour","minute","ViewBooking","to","BookingPanel","bookings","listBookings","destroyBooking","user","useContext","UserContext","onlyMine","setOnlyMine","openEditBooking","openViewBooking","useEffect","future","type","checked","ui_list","b","Object","assign","sort","title","pretty_name","subtitle","calendar","shown","username","privileges","booking_admin","iconComponent","FiTrash2","text","FiEdit","FiInfo","Booking","_useRestEndpoint","useRestEndpoint","_useRestEndpoint$","list","create","destroy","update","bigPixels","grid","itemPanel","bookingPanel","BookingPage","components_booking","objHasProperty","_Object$prototype$has","prototype","hasOwnProperty","call","apply","arguments","appendPK","config","pk","rv","forEach","[object Object]","__webpack_exports__","setLoading","LoadingContext","setData","error","setError","params","request","method","Promise","resolve","reject","retrieve","prevData","concat","obj","body","__webpack_require__","d","List","ListItem","ListButton","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_scss_ui_module_scss__WEBPACK_IMPORTED_MODULE_1__","_scss_ui_module_scss__WEBPACK_IMPORTED_MODULE_1___default","children","_ref2","listText","listButtons","_ref3","Icon","defaultProps"],"mappings":"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","file":"component---src-components-booking-page-js-b933912274331e747882.js","sourcesContent":["import React, { useState } from 'react'\nimport DatePicker from 'react-datepicker'\n\nimport 'react-datepicker/dist/react-datepicker.css'\nimport { Button } from '../ui/buttons'\n\nfunction newNiceDate(hourOffset = 0) {\n  const date = new Date()\n  date.setHours(\n    date.getHours() + 2 + hourOffset + Math.round(date.getMinutes() / 60)\n  )\n  date.setMinutes(0)\n\n  return date\n}\n\nconst EditBooking = ({ booking, item, createBooking, updateBooking }) => {\n  const newBooking = booking === undefined\n\n  const [description, setDescription] = useState(\n    booking ? booking.description : ''\n  )\n  const [start, setStart] = useState(booking ? booking.start : newNiceDate())\n  const [end, setEnd] = useState(booking ? booking.end : newNiceDate(2))\n\n  const saveBooking = () => {\n    const request = newBooking\n      ? createBooking({\n          item_id: item.id,\n          description,\n          start,\n          end,\n        })\n      : updateBooking(booking.id, {\n          item_id: booking.item.id,\n          description,\n          start,\n          end,\n        })\n\n    request\n      .then(res => {\n        console.log(res.data)\n      })\n      .catch(err => {\n        console.log(err.response.data)\n      })\n  }\n\n  return (\n    <>\n      <p>Bokning av {item.name}.</p>\n      <div>\n        <DatePicker\n          selectsStart\n          selected={start}\n          startDate={start}\n          endDate={end}\n          onChange={date => setStart(date)}\n          minDate={new Date()}\n          maxDate={end}\n          showTimeSelect\n          timeFormat=\"HH:mm\"\n          timeIntervals={15}\n          dateFormat=\"MMMM d, yyyy h:mm aa\"\n          timeCaption=\"time\"\n        />\n        <DatePicker\n          selectsEnd\n          selected={end}\n          startDate={start}\n          endDate={end}\n          onChange={date => setEnd(date)}\n          minDate={start}\n          showTimeSelect\n          timeFormat=\"HH:mm\"\n          timeIntervals={15}\n          dateFormat=\"MMMM d, yyyy h:mm aa\"\n          timeCaption=\"time\"\n        />\n      </div>\n      <textarea\n        value={description}\n        onChange={e => setDescription(e.target.value)}\n      />\n      <Button onClick={saveBooking}>Save</Button>\n    </>\n  )\n}\n\nexport default EditBooking\n","import React, { useState } from 'react'\nimport { useEndpoint } from '../request'\n\nimport style from '../../scss/booking.module.scss'\nimport { Button } from '../ui/buttons'\nimport useModal from '../modal/useModal'\nimport EditBooking from './editBooking'\n\nconst ItemPanel = ({ item, setItem, createBooking }) => {\n  const [items] = useEndpoint({ endpoint: '/booking/items/' })\n  const [openModal] = useModal(EditBooking)\n\n  return (\n    <>\n      <select\n        className={style.items}\n        onChange={e => {\n          const selectedValue = e.target.value\n          if (selectedValue === '') setItem(null)\n          else setItem(items.filter(i => `${i.id}` === selectedValue)[0])\n        }}\n        value={item ? item.id : ''}\n      >\n        <option value=\"\">Alla</option>\n        {items &&\n          items.map(i => (\n            <option key={i.id} value={i.id}>\n              {i.name}\n            </option>\n          ))}\n      </select>\n\n      {item && <p>{item.description}</p>}\n\n      {item ? (\n        <Button\n          onClick={() =>\n            openModal(`Boka ${item.name}`, { item, createBooking })\n          }\n        >\n          Boka {item.name}\n        </Button>\n      ) : (\n        <p>Välj ett objekt för att kunna boka.</p>\n      )}\n    </>\n  )\n}\n\nexport default ItemPanel\n","import React from 'react'\nimport moment from 'moment'\nimport 'moment/locale/sv'\n\nmoment.locale('sv')\n\nconst formatDate = date =>\n  date.toLocaleDateString('sv-SE', {\n    month: 'short',\n    day: 'numeric',\n    hour: 'numeric',\n    minute: 'numeric',\n  })\n\nconst ViewBooking = ({ booking }) => (\n  <>\n    <p>Bokning av {booking.item.name}.</p>\n    <p>\n      {moment(booking.start).to(booking.end, true)}\n      {', '}\n      {`${formatDate(booking.start)} - ${formatDate(booking.end)}`}\n    </p>\n    <p>{booking.description}</p>\n  </>\n)\n\nexport default ViewBooking\n","import React, { useState, useEffect, useContext } from 'react'\nimport moment from 'moment'\nimport 'moment/locale/sv'\n\nimport { List, ListItem, ListButton } from '../ui/list'\nimport { FiTrash2, FiInfo, FiEdit } from 'react-icons/fi'\n\nimport EditBooking from './editBooking'\nimport useModal from '../modal/useModal'\nimport ViewBooking from './viewBooking'\nimport { UserContext } from '../layout/layout'\n\nmoment.locale('sv')\n\nconst BookingPanel = ({\n  item,\n  bookings,\n  listBookings,\n  updateBooking,\n  destroyBooking,\n}) => {\n  const [user] = useContext(UserContext)\n\n  const [onlyMine, setOnlyMine] = useState(false)\n\n  const [openEditBooking] = useModal(EditBooking)\n  const [openViewBooking] = useModal(ViewBooking)\n\n  useEffect(\n    () => {\n      listBookings({\n        item: item ? item.id : undefined,\n        future: true,\n        user: onlyMine ? 'me' : undefined,\n      })\n    },\n    [item, onlyMine]\n  )\n\n  return (\n    <>\n      <p>\n        <label>\n          <input\n            type=\"checkbox\"\n            onClick={e => {\n              setOnlyMine(e.target.checked)\n            }}\n            value={onlyMine}\n          />\n          {' Visa endast mina bokningar.'}\n        </label>\n      </p>\n      <List>\n        {bookings &&\n          bookings\n            // convert strings to date objects\n            .map(b => ({\n              ...b,\n              start: new Date(b.start),\n              end: new Date(b.end),\n            }))\n            // sort properly\n            .sort((a, b) => a.start - b.start)\n\n            .map(booking => (\n              <ListItem\n                title={booking.user.pretty_name}\n                subtitle={`${item ? '' : `${booking.item.name}, `}${moment(\n                  booking.start\n                ).calendar()}`}\n                buttons={[\n                  <ListButton\n                    shown={\n                      booking.user.username === user.username ||\n                      user.privileges.booking_admin\n                    }\n                    iconComponent={FiTrash2}\n                    text=\"Ta bort bokning\"\n                    onClick={() => {\n                      destroyBooking(booking.id)\n                    }}\n                    key=\"delete\"\n                  />,\n                  <ListButton\n                    shown={\n                      booking.user.username === user.username ||\n                      user.privileges.booking_admin\n                    }\n                    iconComponent={FiEdit}\n                    text=\"Redigera\"\n                    onClick={() => {\n                      openEditBooking(\n                        `Redigera bokning av ${booking.item.name}`,\n                        { booking, item: booking.item, updateBooking }\n                      )\n                    }}\n                    key=\"edit\"\n                  />,\n                  <ListButton\n                    iconComponent={FiInfo}\n                    text=\"Mer information\"\n                    onClick={() => {\n                      openViewBooking('Bokningsinformation', { booking })\n                    }}\n                    key=\"info\"\n                  />,\n                ]}\n                key={booking.id}\n              />\n            ))}\n      </List>\n    </>\n  )\n}\n\nexport default BookingPanel\n","import React, { useState } from 'react'\n\nimport { GridContainer, GridItem } from '../ui/grid'\nimport BigPixels from '../layout/bigPixels'\nimport ItemPanel from './itemPanel'\nimport BookingPanel from './bookingPanel'\nimport useRestEndpoint from '../request/useRestEndpoint'\n\nconst Booking = () => {\n  const [item, setItem] = useState(null)\n\n  const [{ list, create, destroy, update }, bookings] = useRestEndpoint({\n    endpoint: `/booking/bookings/`,\n  })\n\n  return (\n    <BigPixels>\n      <GridContainer>\n        <GridItem>\n          <ItemPanel setItem={setItem} item={item} createBooking={create} />\n        </GridItem>\n        <GridItem>\n          <BookingPanel\n            item={item}\n            bookings={bookings}\n            listBookings={list}\n            updateBooking={update}\n            destroyBooking={destroy}\n          />\n        </GridItem>\n      </GridContainer>\n    </BigPixels>\n  )\n}\n\nexport default Booking\n","import React from 'react'\nimport Booking from '.'\n\nconst BookingPage = () => <Booking />\n\nexport default BookingPage\n","import { useContext, useState, useEffect } from 'react'\n\nimport { LoadingContext } from '../layout/layout'\nimport request from '.'\n\nconst objHasProperty = (...args) =>\n  Object.prototype.hasOwnProperty.call(...args)\n\nconst appendPK = (config, pk) => {\n  let rv = { ...config }\n\n  ;['endpoint', 'url'].forEach(key => {\n    if (objHasProperty(rv, key)) rv = { ...rv, [key]: `${rv[key]}${pk}/` }\n  })\n\n  return rv\n}\n\nexport default config => {\n  const setLoading = useContext(LoadingContext)[1]\n  const [data, setData] = useState(null)\n  const [error, setError] = useState(null)\n\n  const list = (params = {}) => {\n    setLoading(true)\n    return request({\n      ...config,\n      params: {\n        ...(objHasProperty(config, 'params') ? config.params : {}),\n        ...params,\n      },\n      method: 'get',\n    })\n      .then(res => {\n        setError(null)\n        setData(res.data)\n        setLoading(false)\n        return Promise.resolve(res)\n      })\n      .catch(err => {\n        setError(err)\n        setLoading(false)\n        return Promise.reject(err)\n      })\n  }\n\n  const create = (body = {}) => {\n    setLoading(true)\n    return request({ ...config, data: body, method: 'post' })\n      .then(res => {\n        setError(null)\n        setData(prevData => [...prevData, res.data])\n        setLoading(false)\n        return Promise.resolve(res)\n      })\n      .catch(err => {\n        setError(err)\n        setLoading(false)\n        return Promise.reject(err)\n      })\n  }\n\n  const update = (pk, body = {}) => {\n    setLoading(true)\n    return request({ ...appendPK(config, pk), data: body, method: 'put' })\n      .then(res => {\n        setError(null)\n        setData(prevData => [\n          ...prevData.filter(obj => obj.id !== pk),\n          res.data,\n        ])\n        setLoading(false)\n        return Promise.resolve(res)\n      })\n      .catch(err => {\n        setError(err)\n        setLoading(false)\n        return Promise.reject(err)\n      })\n  }\n\n  const retrieve = (pk, params = {}) => {\n    setLoading(true)\n    return request({\n      ...appendPK(config, pk),\n      params: {\n        ...(objHasProperty(config, 'params') ? config.params : {}),\n        ...params,\n      },\n      method: 'get',\n    })\n      .then(res => {\n        setError(null)\n        setData(prevData => [\n          ...prevData.filter(obj => obj.id !== pk),\n          res.data,\n        ])\n        setLoading(false)\n        return Promise.resolve(res)\n      })\n      .catch(err => {\n        setError(err)\n        setLoading(false)\n        return Promise.reject(err)\n      })\n  }\n\n  const destroy = (pk, body = {}) => {\n    setLoading(true)\n\n    return request({ ...appendPK(config, pk), data: body, method: 'delete' })\n      .then(res => {\n        setError(null)\n        setData(prevData => prevData.filter(obj => obj.id !== pk))\n        setLoading(false)\n        return Promise.resolve(res)\n      })\n      .catch(err => {\n        setError(err)\n        setLoading(false)\n        return Promise.reject(err)\n      })\n  }\n\n  return [{ list, retrieve, update, create, destroy }, data, error]\n}\n","import React from 'react'\n\nimport style from '../../scss/ui.module.scss'\n\nconst List = ({ children }) => <ul className={style.list}>{children}</ul>\n\nconst ListItem = ({ title, subtitle, buttons }) => (\n  <li>\n    <div className={style.listText}>\n      <h3>{title}</h3>\n      <p>{subtitle}</p>\n    </div>\n    <div className={style.listButtons}>{buttons}</div>\n  </li>\n)\n\nconst ListButton = ({ onClick, iconComponent: Icon, text, shown }) =>\n  shown ? (\n    <button type=\"button\" onClick={onClick} title={text}>\n      <Icon />\n    </button>\n  ) : (\n    <></>\n  )\n\nListButton.defaultProps = {\n  shown: true,\n}\n\nexport { List, ListItem, ListButton }\n"],"sourceRoot":""}