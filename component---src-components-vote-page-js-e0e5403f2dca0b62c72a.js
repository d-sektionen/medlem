(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{INns:function(e,t,n){"use strict";n("AqHK"),n("OeI1");var a=n("q1tI"),r=n.n(a),i=n("ubHu"),l=n.n(i),c=n("Rq/j");t.a=function(e){var t=e.title,n=e.choices,a=e.choice,i=e.setChoice,u=e.label,o=e.action,s=e.actionLabel;return r.a.createElement("div",{className:l.a.titleChooser},r.a.createElement("h1",null,t),n&&r.a.createElement("select",{onChange:function(e){var t=e.target.value,a=""===t?null:n.filter((function(e){return""+e.id===t}))[0];i(a)},value:a?a.id:""},r.a.createElement("option",{value:""}),n.map((function(e){return r.a.createElement("option",{value:e.id,key:e.id},e[u])}))),o&&r.a.createElement(c.a,{onClick:o},s))}},QaCa:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return o}));var a=n("q1tI"),r=n.n(a),i=n("ubHu"),l=n.n(i),c=function(e){var t=e.children;return r.a.createElement("ul",{className:l.a.list},t)},u=function(e){var t=e.title,n=e.subtitle,a=e.buttons;return r.a.createElement("li",null,r.a.createElement("div",{className:l.a.listText},r.a.createElement("h3",null,t),r.a.createElement("p",null,n)),r.a.createElement("div",{className:l.a.listButtons},a))},o=function(e){var t=e.href,n=e.onClick,a=e.iconComponent,i=e.text;return e.shown?r.a.createElement(r.a.Fragment,null,t?r.a.createElement("a",{className:l.a.listButton,href:t,onClick:n,title:i},r.a.createElement(a,null)):r.a.createElement("button",{className:l.a.listButton,type:"button",onClick:n,title:i},r.a.createElement(a,null))):r.a.createElement(r.a.Fragment,null)};o.defaultProps={shown:!0}},"Z/Vw":function(e,t,n){"use strict";n.r(t);n("v9g0");var a=n("q1tI"),r=n.n(a),i=n("VtrM"),l=n("r90U"),c=n("zw+i"),u=n("INns"),o=(n("YbXK"),n("cFtU"),n("q8oJ"),n("C9fy"),n("m210"),n("4DPX"),n("rzGZ"),n("MIFh"),n("6kNP"),n("8npG"),n("OeI1"),n("AqHK"),n("kD0k")),s=n.n(o),m=(n("ls82"),n("rT79")),d=n("QaCa"),f=n("Rq/j"),v=n("8k0H"),p=n("ZACD");function E(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function g(e,t,n,a,r,i,l){try{var c=e[i](l),u=c.value}catch(o){return void n(o)}c.done?t(u):Promise.resolve(u).then(a,r)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function l(e){g(i,a,r,l,c,"next",e)}function c(e){g(i,a,r,l,c,"throw",e)}l(void 0)}))}}var h=function(e){var t=e.meeting,n=Object(i.b)((function(){return t&&"/voting/speakers/?meeting_id="+t.id})),l=n.data,c=n.mutate,u=Object(a.useContext)(v.b)[0],o=t.attending?"Talarlista är inaktiverad för mötet.":"Du måste vara registrerad på mötet för att kunna skriva upp dig på talarlistan.";return r.a.createElement("div",null,r.a.createElement("h2",null,"Talarlista"),t.attending&&t.enable_speaker_requests?r.a.createElement(f.b,null,r.a.createElement(f.a,{onClick:b(s.a.mark((function e(){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.f)("/voting/speakers/",{meeting_id:t.id});case 2:n=e.sent,a=n.data,c([].concat(E(l),[a]));case 5:case"end":return e.stop()}}),e)})))},"Jag vill tala!"),r.a.createElement(f.a,{onClick:b(s.a.mark((function e(){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.f)("/voting/speakers/",{meeting_id:t.id,prioritized:!0});case 2:n=e.sent,a=n.data,c([].concat(E(l),[a]));case 5:case"end":return e.stop()}}),e)})))},"Replik!")):r.a.createElement("p",null,o),r.a.createElement(d.a,null,l&&l.map((function(e){return r.a.createElement(d.c,{title:e.user.pretty_name,subtitle:e.prioritized?"Replik":null,key:e.id,buttons:[r.a.createElement(d.b,{shown:u.id===e.user.id,onClick:b(s.a.mark((function n(){var a;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.prioritized?"&prioritized":"",n.next=3,Object(p.b)("/voting/speakers/?meeting_id="+t.id+a);case 3:c(l.filter((function(t){return t.id!==e.id})));case 4:case"end":return n.stop()}}),n)}))),iconComponent:m.l,text:"Lämna talarlista",key:"remove"})]})}))))};n("pJf4");function k(e,t,n,a,r,i,l){try{var c=e[i](l),u=c.value}catch(o){return void n(o)}c.done?t(u):Promise.resolve(u).then(a,r)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function l(e){k(i,a,r,l,c,"next",e)}function c(e){k(i,a,r,l,c,"throw",e)}l(void 0)}))}}var y=function(e){var t=e.currentMeeting,n=e.revalidate;return r.a.createElement("div",null,r.a.createElement("h2",null,"Mötesinfo"),r.a.createElement("h3",null,t.name),r.a.createElement("p",null,r.a.createElement("strong",null,t.attending?"Du deltar på mötet.":"Du är inte registrerad på mötet.")),t.description&&r.a.createElement("p",{style:{whiteSpace:"pre-line"}},t.description),t.open_attendance&&r.a.createElement("p",null,t.attending?r.a.createElement(f.a,{onClick:w(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.b)("/voting/attend/?meeting_id="+t.id);case 2:n();case 3:case"end":return e.stop()}}),e)})))},"Lämna röstlängden"):r.a.createElement(f.a,{onClick:w(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.f)("/voting/attend/",{meeting_id:t.id});case 2:n();case 3:case"end":return e.stop()}}),e)})))},"Gå med i röstlängden")))};function C(e,t,n,a,r,i,l){try{var c=e[i](l),u=c.value}catch(o){return void n(o)}c.done?t(u):Promise.resolve(u).then(a,r)}var j=function(e){var t=e.vote,n=Object(a.useState)(-1),i=n[0],l=n[1],c=Object(a.useState)(!1),u=c[0],o=c[1],m=function(){var e,n=(e=s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={vote_id:t.id,alternative_id:i},e.next=3,Object(p.f)("/voting/made_votes/",n);case 3:o(!0);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function l(e){C(i,a,r,l,c,"next",e)}function c(e){C(i,a,r,l,c,"throw",e)}l(void 0)}))});return function(){return n.apply(this,arguments)}}(),d=-1===i,f=d?"Välj ett alternativ":"Rösta",v=u?"Tack för din röst!":"Du har röstat i omröstningen.";return r.a.createElement("div",null,r.a.createElement("strong",null,t.question),t.has_voted||u?r.a.createElement("p",null,v):r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",null,t.alternatives.map((function(e){var t=e.text,n=e.id;return r.a.createElement("li",{key:n},r.a.createElement("label",null,r.a.createElement("input",{type:"radio",checked:i===n,onChange:function(){return l(n)}})," "+t))}))),r.a.createElement("button",{type:"button",disabled:d,onClick:m},f)))},x=function(e){var t=e.meeting,n=Object(i.b)((function(){return"/voting/votes/?meeting_id="+t.id})),l=n.data,c=(n.error,n.revalidate);return Object(a.useEffect)((function(){c()}),[t]),r.a.createElement("div",null,r.a.createElement("h2",null,"Rösta"),l&&r.a.createElement(r.a.Fragment,null,0===l.length&&r.a.createElement("p",null,"Det finns ingen aktiv omröstning"),l.map((function(e){return r.a.createElement(j,{key:e.id,vote:e})}))))};t.default=function(e){var t=e.pageContext.title,n=Object(a.useState)(null),o=n[0],s=n[1],m=Object(i.b)("/voting/meetings/"),d=m.data,f=m.revalidate;return Object(a.useEffect)((function(){o&&s(d.find((function(e){return e.id===o.id})))}),[d]),r.a.createElement(l.a,null,r.a.createElement(c.a,null,r.a.createElement(c.b,{fullWidth:!0},r.a.createElement(u.a,{title:t,choice:o,setChoice:s,choices:d,label:"name"})),o&&r.a.createElement(r.a.Fragment,null,r.a.createElement(c.b,null,r.a.createElement(y,{currentMeeting:o,revalidate:f})),r.a.createElement(c.b,null,r.a.createElement(x,{meeting:o})),r.a.createElement(c.b,null,r.a.createElement(h,{meeting:o})))))}}}]);
//# sourceMappingURL=component---src-components-vote-page-js-e0e5403f2dca0b62c72a.js.map