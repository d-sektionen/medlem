(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{194:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(21),r=(n(22),n(199),n(196),n(1)),l=n.n(r),s=n(65),c=n(197),m=n.n(c),u=n(209),d=n(13),g=n(198),k=n.n(g);n(204),n(205);k.a.locale("sv");var p=function(e){return e.toLocaleDateString("sv-SE",{month:"short",day:"numeric",hour:"numeric",minute:"numeric"})},b=function(e){function t(t){var n;return(n=e.call(this,t)||this).saveBooking=function(){var e=n.props.booking,t=n.state,a=t.description,o=t.start,i=t.end;Object(s.e)("/booking/bookings/"+e.id+"/",{item_id:e.item_id,description:a,start:o,end:i}).then(function(e){console.log(e.data)}).catch(function(e){console.log(e.response.data)})},n.state={open:!1,editing:!1,description:t.booking.description,start:t.booking.start,end:t.booking.end},n}return l()(t,e),t.prototype.render=function(){var e,t,n=this,a=this.props,i=a.booking,r=a.showItem,l=this.state,s=l.open,c=l.editing,g=l.description,b=l.start,f=l.end;return o.a.createElement("li",null,o.a.createElement("div",{className:m.a.bookingHeader,onClick:function(){n.setState(function(e){return{open:!e.open}})}},o.a.createElement("strong",null,(e=i.user," "===(t=[e.first_name,e.last_name].join(" "))?e.username:t)),r&&", "+i.item.name,", "+k()(b).fromNow(),o.a.createElement(d.a,{className:s?m.a.flip:void 0})),s&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:m.a.bookingBody},o.a.createElement("div",null,c?o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,{className:m.a.datePicker,selectsStart:!0,selected:b,startDate:b,endDate:f,onChange:function(e){n.setState({start:e})},minDate:new Date,maxDate:f,showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,dateFormat:"MMMM d, yyyy h:mm aa",timeCaption:"time"}),o.a.createElement(u.a,{className:m.a.datePicker,selectsEnd:!0,selected:f,startDate:b,endDate:f,onChange:function(e){n.setState({end:e})},minDate:b,showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,dateFormat:"MMMM d, yyyy h:mm aa",timeCaption:"time"})):p(b)+" - "+p(f)),o.a.createElement("p",null,c?o.a.createElement("textarea",{value:g,onChange:function(e){n.setState({description:e.target.value})}}):g)),o.a.createElement("div",{className:m.a.bookingButtons},!c&&o.a.createElement("button",{onClick:function(){return n.setState({editing:!0})}},"Edit"),!c&&o.a.createElement("button",null,"Delete"),c&&o.a.createElement("button",{onClick:function(){return n.setState({editing:!1})}},"Cancel"),c&&o.a.createElement("button",{onClick:this.saveBooking},"Save"))))},t}(a.Component),f=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={item:"",onlyMine:!1},n}return l()(t,e),t.prototype.render=function(){var e=this,t=(this.props.setLoading,this.state),n=t.item,a=t.onlyMine;return o.a.createElement("div",{className:m.a.root},o.a.createElement(s.a,{endpoint:"/booking/items/"},function(t){return o.a.createElement(o.a.Fragment,null,o.a.createElement("select",{className:m.a.items,onChange:function(t){e.setState({item:t.target.value})},value:n},o.a.createElement("option",{value:""},"Alla"),t.map(function(e){return o.a.createElement("option",{key:e.id,value:e.id},e.name)})))}),o.a.createElement("p",null,o.a.createElement("label",null,o.a.createElement("input",{type:"checkbox",onClick:function(t){e.setState({onlyMine:t.target.checked})},value:a})," ","Visa endast mina bokningar.")),o.a.createElement(s.a,{endpoint:"/booking/bookings/?item="+n+"&future"+(a?"&user=me":"")},function(e){return o.a.createElement("ul",{className:m.a.bookings},e.map(function(e){return Object.assign({},e,{start:new Date(e.start),end:new Date(e.end)})}).sort(function(e,t){return e.start-t.start}).map(function(e){return o.a.createElement(b,{booking:e,showItem:""===n,key:e.id})}))}))},t}(a.Component);t.default=function(){return o.a.createElement(i.a.Consumer,null,function(e){return o.a.createElement(f,{setLoading:e.set})})}},197:function(e,t,n){e.exports={root:"booking-module--root--bCHNE",items:"booking-module--items--2uisw",bookings:"booking-module--bookings--3tgRr",bookingHeader:"booking-module--bookingHeader--2LkuV",flip:"booking-module--flip--2eakz",bookingBody:"booking-module--bookingBody--3_ixT",datePicker:"booking-module--datePicker--l8p8O",bookingButtons:"booking-module--bookingButtons--3jWVv"}}}]);
//# sourceMappingURL=component---src-pages-booking-js-5186e49c63444693f1bf.js.map