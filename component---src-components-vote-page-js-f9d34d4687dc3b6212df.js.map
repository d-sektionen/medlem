{"version":3,"file":"component---src-components-vote-page-js-f9d34d4687dc3b6212df.js","mappings":"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","sources":["webpack://medlem/./src/components/ui/list.js","webpack://medlem/./src/components/ui/titleChooser.js","webpack://medlem/./src/components/vote/speakerPanel.js","webpack://medlem/./src/components/vote/meetingInfoPanel.js","webpack://medlem/./src/components/vote/voteForm.js","webpack://medlem/./src/components/vote/votePanel.js","webpack://medlem/./src/scss/vote.module.scss","webpack://medlem/./src/components/vote/page.js"],"sourcesContent":["import React from 'react'\n\nimport {listItemColor, listText, listButtons, list, listButton} from '../../scss/ui.module.scss'\n\nconst List = ({ children }) => <ul className={list}>{children}</ul>\n\nconst ListItem = ({ title, subtitle, buttons, color }) => (\n  <li\n    className={color ? listItemColor : ''}\n    style={{ borderColor: color }}\n  >\n    <div className={listText}>\n      <h3>{title}</h3>\n      <p>{subtitle}</p>\n    </div>\n    <div className={listButtons}>{buttons}</div>\n  </li>\n)\n\nListItem.defaultProps = {\n  color: null,\n}\n\nconst ListButton = ({ href, onClick, iconComponent: Icon, text, shown }) =>\n  shown ? (\n    <>\n      {href ? (\n        <a\n          className={listButton}\n          href={href}\n          onClick={onClick}\n          title={text}\n        >\n          <Icon />\n        </a>\n      ) : (\n        <button\n          className={listButton}\n          type=\"button\"\n          onClick={onClick}\n          title={text}\n        >\n          <Icon />\n        </button>\n      )}\n    </>\n  ) : (\n    <></>\n  )\n\nListButton.defaultProps = {\n  shown: true,\n}\n\nexport { List, ListItem, ListButton }\n","import React, { useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport {actions, titleChooser, selectContainer, hint} from '../../scss/ui.module.scss'\nimport { Button } from './buttons'\n\nconst TitleChooser = ({\n  title,\n  choices,\n  categorizedChoices,\n  choice,\n  setChoice,\n  label,\n  action,\n  actionLabel,\n  noChoicesLabel,\n  onChange,\n}) => {\n  const allChoices = [\n    ...(choices || []),\n    // merge all categorized choices to single array.\n    ...Object.keys(categorizedChoices).reduce(\n      (accumulator, category) => [\n        ...accumulator,\n        ...categorizedChoices[category],\n      ],\n      []\n    ),\n  ]\n\n  // Re-select the previously selected choice if there is one\n  useEffect(() => {\n    const savedChoice = sessionStorage.getItem(`${title}-selectedItem`)\n    if (!savedChoice) {\n      return;\n    }\n\n    const selectedItem = allChoices.find((item) => `${item.id}` === savedChoice)\n    if (selectedItem) {\n      setChoice(selectedItem)\n    }\n\n  }, [choices, categorizedChoices])\n\n  return (\n    <div className={titleChooser}>\n      <h1>{title}</h1>\n      <div className={actions}>\n        {allChoices.length ? (\n          <div className={selectContainer}>\n            <select\n              onChange={e => {\n                const selectedValue = e.target.value\n                const selectedItem =\n                  selectedValue === ''\n                    ? null\n                    : allChoices.filter(i => `${i.id}` === selectedValue)[0]\n                setChoice(selectedItem)\n                onChange(e)\n\n                // Save the selected item for refresh re-select\n                if (selectedItem) {\n                  sessionStorage.setItem(`${title}-selectedItem`, selectedItem.id)\n                } else {\n                  sessionStorage.removeItem(`${title}-selectedItem`)\n                }\n              }}\n              value={choice ? choice.id : ''}\n            >\n              <option hidden value=\"\" />\n              {choices.sort().map(c => (\n                <option value={c.id} key={c.id}>\n                  {c[label]}\n                </option>\n              ))}\n              {Object.keys(categorizedChoices)\n                .sort()\n                .map(key => (\n                  <optgroup label={key} key={key}>\n                    {categorizedChoices[key].sort().map(c => (\n                      <option value={c.id} key={c.id}>\n                        {c[label]}\n                      </option>\n                    ))}\n                  </optgroup>\n                ))}\n            </select>\n            {choice === null && (\n              <div className={hint}>Välj ett objekt</div>\n            )}\n          </div>\n        ) : (\n          <span>{noChoicesLabel}</span>\n        )}\n\n        {action && <Button onClick={action}>{actionLabel}</Button>}\n      </div>\n    </div>\n  )\n}\nTitleChooser.defaultProps = {\n  categorizedChoices: {},\n  choices: [],\n  action: null,\n  actionLabel: '',\n  choice: null,\n  noChoicesLabel: '',\n  setChoice: () => {},\n  label: '',\n  onChange: () => {},\n}\n\nTitleChooser.propTypes = {\n  title: PropTypes.string.isRequired,\n  choices: PropTypes.array,\n  categorizedChoices: PropTypes.object,\n  choice: PropTypes.object,\n  setChoice: PropTypes.func,\n  label: PropTypes.string,\n  action: PropTypes.func,\n  actionLabel: PropTypes.string,\n  noChoicesLabel: PropTypes.string,\n  onChange: PropTypes.func,\n}\n\nexport default TitleChooser\n","import React, { useState, useEffect, useContext } from 'react'\nimport useSWR from 'swr'\n\nimport { FiTrash2 } from 'react-icons/fi'\nimport { List, ListButton, ListItem } from '../ui/list'\nimport { Button, ButtonGroup } from '../ui/buttons'\nimport { UserContext } from '../layout/layout'\nimport { post, del } from '../request'\n\nconst SpeakerPanel = ({ meeting }) => {\n  const { data: speakers, mutate } = useSWR(\n    () => meeting && `/voting/speakers/?meeting_id=${meeting.id}`\n  )\n\n  const [user] = useContext(UserContext)\n\n  const errorMessage = meeting.attending\n    ? 'Talarlista är inaktiverad för mötet.'\n    : 'Du måste vara registrerad på mötet för att kunna skriva upp dig på talarlistan.'\n\n  return (\n    <div>\n      <h2>Talarlista</h2>\n      {meeting.attending && meeting.enable_speaker_requests ? (\n        <ButtonGroup>\n          <Button\n            onClick={async () => {\n              const { data: newSpeaker } = await post('/voting/speakers/', {\n                meeting_id: meeting.id,\n              })\n              mutate([...speakers, newSpeaker])\n            }}\n          >\n            Jag vill tala!\n          </Button>\n          <Button\n            onClick={async () => {\n              const { data: newSpeaker } = await post('/voting/speakers/', {\n                meeting_id: meeting.id,\n                prioritized: true,\n              })\n              mutate([...speakers, newSpeaker])\n            }}\n          >\n            Replik!\n          </Button>\n        </ButtonGroup>\n      ) : (\n        <p>{errorMessage}</p>\n      )}\n      <List>\n        {speakers &&\n          speakers.map(s => (\n            <ListItem\n              title={s.user.pretty_name}\n              subtitle={s.prioritized ? 'Replik' : null}\n              key={s.id}\n              buttons={[\n                <ListButton\n                  shown={user.id === s.user.id}\n                  onClick={async () => {\n                    const prioQS = s.prioritized ? '&prioritized' : ''\n                    await del(\n                      `/voting/speakers/?meeting_id=${meeting.id}${prioQS}`\n                    )\n                    mutate(speakers.filter(x => x.id !== s.id))\n                  }}\n                  iconComponent={FiTrash2}\n                  text=\"Lämna talarlista\"\n                  key=\"remove\"\n                />,\n              ]}\n            />\n          ))}\n      </List>\n    </div>\n  )\n}\n\nexport default SpeakerPanel\n","import React from 'react'\nimport { Button } from '../ui/buttons'\nimport { post, del } from '../request'\n\nconst MeetingInfoPanel = ({ currentMeeting, revalidate }) => (\n  <div>\n    <h2>Mötesinfo</h2>\n    <h3>{currentMeeting.name}</h3>\n    <p>\n      <strong>\n        {currentMeeting.attending\n          ? 'Du deltar på mötet.'\n          : 'Du är inte registrerad på mötet.'}\n      </strong>\n    </p>\n    {currentMeeting.description && (\n      <p style={{ whiteSpace: 'pre-line' }}>{currentMeeting.description}</p>\n    )}\n    {currentMeeting.open_attendance && (\n      <p>\n        {currentMeeting.attending ? (\n          <Button\n            onClick={async () => {\n              await del(`/voting/attend/?meeting_id=${currentMeeting.id}`)\n              revalidate()\n            }}\n          >\n            Lämna röstlängden\n          </Button>\n        ) : (\n          <Button\n            onClick={async () => {\n              await post('/voting/attend/', { meeting_id: currentMeeting.id })\n              revalidate()\n            }}\n          >\n            Gå med i röstlängden\n          </Button>\n        )}\n      </p>\n    )}\n  </div>\n)\n\nexport default MeetingInfoPanel\n","import React, { Component, useState } from 'react'\nimport { post } from '../request'\n\nconst VoteForm = ({ vote, setErrors }) => {\n  const [checkedId, setCheckedId] = useState(-1)\n  const [successfullyVoted, setSuccessfullyVoted] = useState(false)\n  const [sentVote, setSentVote] = useState(false)\n\n  const placeVote = async () => {\n    if (sentVote || successfullyVoted) return\n    setErrors({})\n\n    setSentVote(true)\n    const voteData = {\n      vote_id: vote.id,\n      alternative_id: checkedId,\n    }\n\n    await post('/voting/made_votes/', voteData)\n    .then(() => setSuccessfullyVoted(true))\n    .catch(err => {\n      setSentVote(false)\n      setErrors({ voteError: err.response.data.error })\n    })\n  }\n  const votingDisabled = checkedId === -1\n  const buttonText = votingDisabled ? 'Välj ett alternativ' : 'Rösta'\n  const alreadyVotedText = successfullyVoted\n    ? 'Tack för din röst!'\n    : 'Du har röstat i omröstningen.'\n\n  return (\n    <div>\n      <strong>{vote.question}</strong>\n      {vote.has_voted || successfullyVoted ? (\n        <p>{alreadyVotedText}</p>\n      ) : (\n        <>\n          <ul>\n            {vote.alternatives.map(({ text, id }) => (\n              <li key={id}>\n                <label>\n                  <input\n                    type=\"radio\"\n                    checked={checkedId === id}\n                    onChange={() => setCheckedId(id)}\n                  />\n                  {` ${text}`}\n                </label>\n              </li>\n            ))}\n          </ul>\n          <button type=\"button\" disabled={votingDisabled || successfullyVoted || sentVote} onClick={placeVote}>\n            {buttonText}\n          </button>\n        </>\n      )}\n    </div>\n  )\n}\n\nexport default VoteForm\n","import React, { useState } from 'react'\nimport useSWR from 'swr'\nimport VoteForm from './voteForm'\nimport { formError } from '../../scss/vote.module.scss'\n\nconst VotePanel = ({ meeting }) => {\n  const { data: votes } = useSWR(\n    () => `/voting/votes/?meeting_id=${meeting.id}`\n  )\n  const [errors, setErrors] = useState({})\n  const setFormErrors = errors => {\n    setErrors(errors)\n    setTimeout(() => setErrors({}), 3000)\n  }\n\n  return (\n    <div>\n      <h2>Rösta</h2>\n      {errors && <div className={formError}>{errors.voteError}</div>}\n      {votes && (\n        <>\n          {votes.length === 0 && <p>Det finns ingen aktiv omröstning</p>}\n          {votes.map(vote => (\n            <VoteForm key={vote.id} vote={vote} setErrors={setFormErrors} />\n          ))}\n        </>\n      )}\n    </div>\n  )\n}\n\nexport default VotePanel\n","// extracted by mini-css-extract-plugin\nexport var formError = \"vote-module--formError--40ff7\";","import React, { useContext, useState, useEffect } from 'react'\nimport useSWR from 'swr'\n\nimport BigPixels from '../layout/bigPixels'\nimport { GridContainer, GridItem } from '../ui/grid'\nimport TitleChooser from '../ui/titleChooser'\nimport SpeakerPanel from './speakerPanel'\nimport MeetingInfoPanel from './meetingInfoPanel'\nimport VotePanel from './votePanel'\n\nconst VotePage = ({ pageContext: { title } }) => {\n  const [currentMeeting, setCurrentMeeting] = useState(null)\n  const { data: meetings, revalidate } = useSWR('/voting/meetings/')\n\n  // sync currentMeeting with updated meetings\n  useEffect(\n    () => {\n      if (currentMeeting)\n        setCurrentMeeting(meetings.find(m => m.id === currentMeeting.id))\n    },\n    [meetings]\n  )\n\n  return (\n    <BigPixels>\n      <GridContainer>\n        <GridItem fullWidth>\n          <TitleChooser\n            title={title}\n            choice={currentMeeting}\n            setChoice={setCurrentMeeting}\n            choices={meetings}\n            label=\"name\"\n            noChoicesLabel=\"Det finns inga möten just nu.\"\n          />\n        </GridItem>\n        {currentMeeting && (\n          <>\n            <GridItem>\n              <MeetingInfoPanel\n                currentMeeting={currentMeeting}\n                revalidate={revalidate}\n              />\n            </GridItem>\n            {/* {currentMeeting.enable_speaker_requests && ( */}\n            <GridItem>\n              <SpeakerPanel meeting={currentMeeting} />\n            </GridItem>\n            {/* )} */}\n            <GridItem>\n              <VotePanel meeting={currentMeeting} />\n            </GridItem>\n          </>\n        )}\n      </GridContainer>\n    </BigPixels>\n  )\n}\nexport default VotePage\n"],"names":["List","_ref","children","React","className","list","ListItem","_ref2","title","subtitle","buttons","color","listItemColor","style","borderColor","listText","listButtons","defaultProps","ListButton","_ref3","href","onClick","iconComponent","Icon","text","shown","listButton","type","TitleChooser","choices","categorizedChoices","choice","setChoice","label","action","actionLabel","noChoicesLabel","onChange","allChoices","concat","_toConsumableArray","Object","keys","reduce","accumulator","category","useEffect","savedChoice","sessionStorage","getItem","selectedItem","find","item","id","titleChooser","actions","length","selectContainer","e","selectedValue","target","value","filter","i","setItem","removeItem","hidden","sort","map","c","key","hint","Button","meeting","data","speakers","mutate","useSWR","user","useContext","UserContext","errorMessage","attending","enable_speaker_requests","ButtonGroup","async","newSpeaker","post","meeting_id","prioritized","s","pretty_name","prioQS","del","x","FiTrash2","currentMeeting","revalidate","name","description","whiteSpace","open_attendance","vote","setErrors","checkedId","setCheckedId","useState","successfullyVoted","setSuccessfullyVoted","sentVote","setSentVote","votingDisabled","buttonText","alreadyVotedText","question","has_voted","alternatives","checked","disabled","voteData","vote_id","alternative_id","then","catch","err","voteError","response","error","votes","errors","setFormErrors","setTimeout","VoteForm","pageContext","setCurrentMeeting","meetings","m","BigPixels","GridContainer","GridItem","fullWidth","MeetingInfoPanel","SpeakerPanel","VotePanel"],"sourceRoot":""}