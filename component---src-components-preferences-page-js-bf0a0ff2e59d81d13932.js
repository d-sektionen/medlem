(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{240:function(e,a,t){"use strict";t.r(a);var s=t(1),r=t.n(s),n=t(27),l=t(50),i=t(229),c=t.n(i);class m extends s.Component{constructor(e){super(e),e.user.profile||(e.user.profile={}),this.state={infomailSubscriber:e.user.profile.infomail_subscriber,liuCardId:e.user.profile.liu_card_id,firstName:e.user.first_name,lastName:e.user.last_name,errors:{}},this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this)}handleChange(e,a,t=!1){t?this.setState({[e]:a.target.checked}):this.setState({[e]:a.target.value})}handleSubmit(e){const{setLoading:a,setUser:t}=this.props;this.setState({error:void 0,success:void 0,errors:{}}),a(!0),Object(l.d)("/account/user/me/",{first_name:this.state.firstName,last_name:this.state.lastName,profile:{liu_card_id:this.state.liuCardId,infomail_subscriber:this.state.infomailSubscriber}}).then(e=>{a(!1),e.status<300&&(this.setState({success:"Ändringarna har sparats."}),t(e.data))}).catch(e=>{console.log(e),a(!1),e.response?400===e.response.status?this.setState({errors:e.response.data}):this.setState({error:"Något gick fel."}):this.setState({error:"Nätverksfel."})}),e.preventDefault()}render(){const{user:e}=this.props,{firstName:a,lastName:t,liuCardId:s,infomailSubscriber:n,errors:l,error:i,success:m}=this.state;return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",null,e.membership?"Du är sektionsmedlem.":"Du saknar sektionsmedlemsskap."),r.a.createElement("div",null,r.a.createElement("label",{className:c.a.inputLabel},"Förnamn:",r.a.createElement("input",{value:a,onChange:e=>this.handleChange("firstName",e)})),l.first_name&&r.a.createElement("div",{className:c.a.error},l.first_name)),r.a.createElement("div",null,r.a.createElement("label",{className:c.a.inputLabel},"Efternamn:",r.a.createElement("input",{value:t,onChange:e=>this.handleChange("lastName",e)})),l.last_name&&r.a.createElement("div",{className:c.a.error},l.last_name)),r.a.createElement("div",null,r.a.createElement("label",{className:c.a.inputLabel},"LiU-kortnummer:",r.a.createElement("input",{value:s,onChange:e=>this.handleChange("liuCardId",e)})),l.profile&&l.profile.liu_card_id&&r.a.createElement("div",{className:c.a.error},l.profile.liu_card_id)),r.a.createElement("div",null,r.a.createElement("label",{className:c.a.inputLabel},"Prenumerera på veckomailet:",r.a.createElement("input",{type:"checkbox",checked:n,onChange:e=>this.handleChange("infomailSubscriber",e,!0)})),l.profile&&l.profile.infomail_subscriber&&r.a.createElement("div",{className:c.a.error},l.profile.infomail_subscriber)),r.a.createElement("div",null,r.a.createElement("input",{type:"submit",value:"Spara",className:c.a.submit+" button"})),r.a.createElement("div",null,i&&r.a.createElement("div",{className:c.a.error},i),m&&r.a.createElement("div",{className:c.a.success},m)))}}var u=m,o=t(51),d=t(43);a.default=()=>{const e=Object(s.useContext)(n.a)[1],[a,t]=Object(s.useContext)(n.b);return r.a.createElement(o.a,null,r.a.createElement(d.a,null,r.a.createElement(d.b,null,r.a.createElement(u,{user:a,setUser:t,setLoading:e}))))}}}]);
//# sourceMappingURL=component---src-components-preferences-page-js-bf0a0ff2e59d81d13932.js.map