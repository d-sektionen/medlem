(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{232:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(9),i=(n(327),n(84),n(43));var o=n(221),u=n.n(o),l=function(e){var t=function(e){var t=Object(a.useState)(""),n=t[0],r=t[1],c=RegExp("^[A-Za-z0-9]+$"),i=function(t){var n=String.fromCharCode(t.keyCode);"Enter"===t.key?r(function(n){return""!==n&&e({text:n,shift:t.shiftKey}),""}):"Backspace"===t.key?r(function(e){return e.slice(0,-1)}):c.test(n)&&r(function(e){return e.length>16?e:""+e+n})};return Object(a.useEffect)(function(){return window.addEventListener("keydown",i),function(){window.removeEventListener("keydown",i)}},[e]),n}(e.onSubmit);return r.a.createElement("div",{className:u.a.textField},t)};var s={FiUserCheck:c.n,FiUserX:c.o},f=n(32),d=n(291),v=function(e){var t=e.onSubmit,n=Object(a.useRef)(null),c=Object(f.b)(),i=new d.BrowserQRCodeReader;return Object(a.useEffect)(function(){return i.decodeFromInputVideoDevice(void 0,n.current).then(function(e){t({text:e.text}),c()}).catch(function(e){return console.error(e)}),function(){return i.reset()}},[]),r.a.createElement("video",{ref:n,muted:!0,style:{display:"block"}})},m=n(35),E=function(e){var t=e.events,n=e.shiftDown,o=Object(a.useState)(t[0]),d=o[0],E=o[1],k=Object(a.useState)(0),b=k[0],p=k[1],w=function(){var e=Object(a.useState)(null),t=e[0],n=e[1],r=null;return Object(a.useEffect)(function(){return function(){clearTimeout(r)}},[]),[t,function(e){clearTimeout(r),r=setTimeout(function(){n(null)},1500),n(e)}]}(),h=w[0],g=w[1],y=n?(b+1)%d.actions.length:b,O=function(e){var t=e.text;!function(e,t,n,a){var o=function(t,n,a){var i=a?r.a.createElement(c.q,null):r.a.createElement(c.b,null),o=s[n];e({text:t||(a?"Okänt fel.":"Allt gick väl, men det är oklart vad som faktiskt hände."),icon:o?r.a.createElement(o,null):i,class:a?u.a.fail:u.a.success})};Object(i.e)("/checkin/register/",{event:t,identifier:n,action:a}).then(function(e){var t,n;if(e.data){var a=e.data;t=a.detail,n=a.icon}o(t,n,!1)}).catch(function(e){var t,n;if(e.response&&e.response.data){var a=e.response.data;t=a.detail,n=a.icon}o(t,n,!0)})}(g,d.id,t,y)},j=Object(f.a)(v)[0];return d?r.a.createElement("div",{className:u.a.container+" "+(h&&h.class)},r.a.createElement("h1",null,"Bleep Bloop"),r.a.createElement(m.b,{iconComponent:c.p,text:"QR",onClick:function(){return j("QR-registrering",{onSubmit:O},{noPadding:!0})}}),r.a.createElement("div",{className:u.a.controlContainer},r.a.createElement("select",{onChange:function(e){E(t.filter(function(t){return""+t.id===e.target.value})[0])},value:d.id},t.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})),r.a.createElement(l,{onSubmit:O}),d.actions.length>0&&r.a.createElement("select",{onChange:function(e){p(e.target.value)},value:y,disabled:d.actions.length<2},d.actions.map(function(e,t){return r.a.createElement("option",{key:e,value:t},e)}))),d.actions.length>1&&r.a.createElement("p",null,"Håll ner shift för att temporärt byta funktion."),r.a.createElement("div",{className:u.a.feedback},h&&h.icon,r.a.createElement("p",null,h&&h.text))):"Du är inte dörrvakt på något evenemang."};t.default=function(){var e=Object(i.f)({endpoint:"/checkin/events/"})[0],t=function(e){var t=Object(a.useState)(!1),n=t[0],r=t[1];function c(t){t.key===e&&r(!0)}var i=function(t){t.key===e&&r(!1)};return Object(a.useEffect)(function(){return window.addEventListener("keydown",c),window.addEventListener("keyup",i),function(){window.removeEventListener("keydown",c),window.removeEventListener("keyup",i)}},[]),n}("Shift");return e?r.a.createElement(E,{events:e.reverse(),shiftDown:t}):null}}}]);
//# sourceMappingURL=component---src-components-checkin-page-js-6e41bff4200487ee3147.js.map